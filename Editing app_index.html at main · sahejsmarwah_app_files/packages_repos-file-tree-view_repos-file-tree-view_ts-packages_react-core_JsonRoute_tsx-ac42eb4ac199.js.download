"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_repos-file-tree-view_repos-file-tree-view_ts-packages_react-core_JsonRoute_tsx"],{23451:(e,t,o)=>{o.d(t,{Z:()=>i});function i({appendQuery:e,retainScrollPosition:t,returnTarget:o}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:o}}))}},80780:(e,t,o)=>{o.d(t,{V3:()=>c,_y:()=>s,wk:()=>l});var i=o(54571),r=o(39111);let n={cursorNavigationHopWordLeft:{hotkey:"Alt+ArrowLeft,Ctrl+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationHopWordRight:{hotkey:"Alt+ArrowRight,Ctrl+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationTopOfPage:{hotkey:"Meta+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationBottomOfPage:{hotkey:"Meta+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationEnd:{hotkey:"End,Meta+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"]},cursorNavigationHome:{hotkey:"Home,Meta+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"]},cursorNavigationPageUp:{hotkey:"PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"]},cursorNavigationPageDown:{hotkey:"PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"]},cursorNavigationArrowDown:{hotkey:"ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"]},cursorNavigationArrowUp:{hotkey:"ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"]},cursorNavigationArrowLeft:{hotkey:"ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"]},cursorNavigationArrowRight:{hotkey:"ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"]},cursorNavigationShiftHopWordLeft:{hotkey:"Alt+Shift+ArrowLeft,Ctrl+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftHopWordRight:{hotkey:"Alt+Shift+ArrowRight,Ctrl+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationShiftTopOfPage:{hotkey:"Meta+Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftBottomOfPage:{hotkey:"Meta+Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftEnd:{hotkey:"Shift+End,Meta+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"],modifierRequired:!0},cursorNavigationShiftHome:{hotkey:"Shift+Home,Meta+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"],modifierRequired:!0},cursorNavigationShiftPageUp:{hotkey:"Shift+PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"],modifierRequired:!0},cursorNavigationShiftPageDown:{hotkey:"Shift+PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"],modifierRequired:!0},cursorNavigationShiftArrowDown:{hotkey:"Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftArrowUp:{hotkey:"Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftArrowLeft:{hotkey:"Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftArrowRight:{hotkey:"Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationHighlightLine:{text:"J",hotkey:"Shift+J",useWhileBlobFocused:!0,noModifierHotkey:["J"],modifierRequired:!0},cursorNavigationGoLineUp:{hotkey:"Ctrl+p",useWhileBlobFocused:!0,noModifierHotkey:["p"],modifierRequired:!0},cursorNavigationOpenHelpDialog:{hotkey:"Alt+F1,Control+Alt+\u02D9,Control+Alt+h",useWhileBlobFocused:!0,noModifierHotkey:["F1","h","\u02D9"],modifierRequired:!0},cursorNavigationGoLineDown:{hotkey:"Ctrl+n",useWhileBlobFocused:!0,noModifierHotkey:["n"],modifierRequired:!0},cursorNavigationEnter:{text:"\u2318 Enter",hotkey:"Meta+Enter",useWhileBlobFocused:!0,noModifierHotkey:["Enter"],modifierRequired:!0},cursorNavigationSpace:{hotkey:" ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!1},cursorNavigationShiftSpace:{hotkey:"Shift+ ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!0},expandAndFocusLineContextMenu:{text:"Shift Alt C",hotkey:"Alt+Shift+C,Alt+Shift+\xc7",useWhileBlobFocused:!0,noModifierHotkey:["C"],modifierRequired:!0},copyFilePathShortcut:{text:"\u2318 shift .",hotkey:"Meta+Shift+>",useWhileBlobFocused:!0,noModifierHotkey:["."],modifierRequired:!0},copyPermalinkShortcut:{text:"\u2318 shift ,",hotkey:"Meta+Shift+<",useWhileBlobFocused:!0,noModifierHotkey:[","],modifierRequired:!0},copyRawContentShortcut:{text:"\u2318 shift c",hotkey:"Meta+Shift+C",useWhileBlobFocused:!0,noModifierHotkey:["c"],modifierRequired:!0},downloadRawContentShortcut:{text:"\u2318 shift s",hotkey:"Meta+Shift+S",useWhileBlobFocused:!0,noModifierHotkey:["s"],modifierRequired:!0},editFileShortcut:{hotkey:"e,Shift+E",useWhileBlobFocused:!0,noModifierHotkey:["e","E"]},goToLineShortcut:{text:"l",hotkey:"l,Shift+L",ariaKeyShortcuts:"l",useWhileBlobFocused:!0,noModifierHotkey:["l","L"]},alternativeGoToLineShortcut:{hotkey:"Mod+Alt+g",ariaKeyShortcuts:"Mod+Alt+g",useWhileBlobFocused:!0,noModifierHotkey:["g","G"]},findInFileShortcut:{hotkey:"Meta+f, F3",text:"\u2318 f",ariaKeyShortcuts:"Meta+F",useWhileBlobFocused:!0,noModifierHotkey:["f","F3"],modifierRequired:!0},findFilesShortcut:{hotkey:"t,Shift+T",useWhileBlobFocused:!0,noModifierHotkey:["t","T"]},findSelectionShortcut:{hotkey:"Meta+e",useWhileBlobFocused:!0,noModifierHotkey:["e"],modifierRequired:!0},findNextShortcut:{hotkey:"Mod+g"},findPrevShortcut:{hotkey:"Mod+Shift+G"},openWithGitHubDevShortcut:{hotkey:"., Meta+Shift+/",useWhileBlobFocused:!0,noModifierHotkey:["."]},openWithGitHubDevInNewWindowShortcut:{hotkey:"Shift+.,Shift+>,>",useWhileBlobFocused:!0,noModifierHotkey:[">"]},permalinkShortcut:{hotkey:"y,Shift+Y",useWhileBlobFocused:!0,noModifierHotkey:["y","Y"]},searchShortcut:{hotkey:"/",useWhileBlobFocused:!0,noModifierHotkey:["/"]},selectAllShortcut:{hotkey:"Meta+a",useWhileBlobFocused:!0,noModifierHotkey:["a"],modifierRequired:!0},selectEditTabShortcut:{hotkey:"Mod+Shift+P"},submitCommitDialogShortcut:{hotkey:"Mod+Enter"},refSelectorShortcut:{hotkey:"w",text:"w",useWhileBlobFocused:!0,noModifierHotkey:["w"]},escapeRightClickMenu:{hotkey:"Escape",useWhileBlobFocused:!0,noModifierHotkey:["Escape"]},toggleFocusedPaneShortcut:{hotkey:"Meta+F6,Meta+Shift+F6",useWhileBlobFocused:!0,noModifierHotkey:["F6"],modifierRequired:!0},toggleSymbolsShortcut:{hotkey:"Meta+i",useWhileBlobFocused:!0,noModifierHotkey:["i"],modifierRequired:!0},toggleTreeShortcut:{hotkey:"Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"],modifierRequired:!0},viewBlameShortcut:{hotkey:"b,Shift+B,Meta+/ Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"]},viewCodeShortcut:{hotkey:"Meta+/ Meta+c",useWhileBlobFocused:!0,modifierRequired:!0},viewPreviewShortcut:{hotkey:"Meta+/ Meta+p"},viewRawContentShortcut:{text:"\u2318 / \u2318 r",hotkey:"Meta+/ Meta+r",useWhileBlobFocused:!0,noModifierHotkey:["r"],modifierRequired:!0},findSymbolShortcut:{hotkey:"r,Shift+R",useWhileBlobFocused:!0,noModifierHotkey:["r","R"],modifierRequired:!1}},a=new Map;function l(){let e=(0,r.X)(["mac"]),[t]=(0,i.I)(()=>!1,!0,[]),o=0;if(e?o=1:t||(o=2),!a.has(o)){var l,s;let i=n;e||t||(i=Object.keys(l=i).reduce((e,t)=>{let o=l[t];return e[t]={hotkey:o.hotkey?.replace(/Meta/g,"Control"),text:o.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:o.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:o.useWhileBlobFocused,modifierRequired:o.modifierRequired,noModifierHotkey:o.noModifierHotkey},e},{})),t&&(i=Object.keys(s=i).reduce((e,t)=>{let o=s[t];return e[t]={hotkey:void 0,text:o.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:o.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:o.useWhileBlobFocused,modifierRequired:o.modifierRequired,noModifierHotkey:o.noModifierHotkey},e},{})),a.set(o,i)}return a.get(o)}function s(){let e=l();return Object.keys(e).reduce((t,o)=>{let i=e[o];if(i.useWhileBlobFocused&&i.noModifierHotkey&&i.modifierRequired)for(let e of i.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}function c(){let e=l();return Object.keys(e).reduce((t,o)=>{let i=e[o];if(i.useWhileBlobFocused&&i.noModifierHotkey&&!i.modifierRequired)for(let e of i.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}},41617:(e,t,o)=>{function i(e){return"blob"in e}function r(e){return i(e)&&"blame"in e}function n(e){return"deleteInfo"in e&&"webCommitInfo"in e}function a(e){return"editInfo"in e&&"webCommitInfo"in e}o.d(t,{fP:()=>l,KR:()=>r,mM:()=>i,iS:()=>n,di:()=>a,Hf:()=>s});let l={README:"readme",CODE_OF_CONDUCT:"code_of_conduct",CONTRIBUTING:"contributing",LICENSE:"license",SECURITY:"security"};function s(e){return"tree"in e}},31315:(e,t,o)=>{function i(e){return r(e)[0]}function r(e){let t=[];for(let o of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[i,r]=o.trim().split("=");e===i&&void 0!==r&&t.push({key:i,value:r})}return t}function n(e,t,o=null,i=!1,r="lax"){let a=document.domain;if(null==a)throw Error("Unable to get document domain");a.endsWith(".github.com")&&(a="github.com");let l="https:"===location.protocol?"; secure":"",s=o?`; expires=${o}`:"";!1===i&&(a=`.${a}`);try{document.cookie=`${e}=${t}; path=/; domain=${a}${s}${l}; samesite=${r}`}catch{}}function a(e,t=!1){let o=document.domain;if(null==o)throw Error("Unable to get document domain");o.endsWith(".github.com")&&(o="github.com");let i=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",n=`; expires=${i}`;!1===t&&(o=`.${o}`);try{document.cookie=`${e}=''; path=/; domain=${o}${n}${r}`}catch{}}o.d(t,{OR:()=>r,Ri:()=>i,TV:()=>n,Yj:()=>a})},17182:(e,t,o)=>{o.d(t,{Nq:()=>$,H:()=>p,c2:()=>ec,Uy:()=>U,qn:()=>ew});var i=o(74848),r=o(12748),n=o(80780),a=o(8624),l=o(54571),s=o(38621),c=o(55847),d=o(34164),u=o(96540);let h={expandButton:"ExpandFileTreeButton-module__expandButton--oKI1R",filesButtonBreakpoint:"ExpandFileTreeButton-module__filesButtonBreakpoint--03FKA",Button_1:"ExpandFileTreeButton-module__Button_1--g8F6Q"},f=u.forwardRef(({expanded:e,onToggleExpanded:t,className:o,ariaControls:u,textAreaId:f,useFilesButtonBreakpoint:m=!0,variant:p,getTooltipDirection:y},g)=>{let{toggleTreeShortcut:x}=(0,n.wk)(),[w]=(0,l.I)(()=>!1,!0,[]),k=y?.(e)??"se";return(0,i.jsxs)(i.Fragment,{children:[m&&(!e||w)&&(0,i.jsx)(c.Q,{"aria-label":"Expand file tree",leadingVisual:s.ArrowLeftIcon,"data-hotkey":x.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:g,onClick:t,variant:p??"invisible",className:h.Button_1,children:"Files"}),(0,i.jsx)(a.L,{dataHotkey:x.hotkey,className:(0,d.$)(o,"position-relative",h.expandButton,{[h.filesButtonBreakpoint]:m&&(!e||w)}),expanded:e,alignment:"left",ariaLabel:e?"Collapse file tree":"Expand file tree",tooltipDirection:k,testid:"file-tree-button",ariaControls:u,ref:g,variant:p,onToggleExpanded:t}),(0,i.jsx)(r._,{buttonFocusId:f,buttonHotkey:x.hotkey,onButtonClick:t,onlyAddHotkeyScopeButton:!0})]})});f.displayName="ExpandFileTreeButton";var m=o(6665);function p({inputRef:e,onFindFilesShortcut:t,textAreaId:o}){let{sendRepoKeyDownEvent:a}=(0,m.T)(),{findFilesShortcut:l}=(0,n.wk)();return(0,i.jsx)(r._,{buttonFocusId:o,buttonHotkey:l.hotkey,onButtonClick:()=>{t?.(),e?.current?.focus(),a("GO_TO_FILE")}})}try{p.displayName||(p.displayName="FindFilesShortcut")}catch{}var y=o(6873),g=o(93753),x=o(31078),w=o(46209),k=o(19189),R=o(53419),b=o(25407),v=o(66108),F=o(94195),S=o(64830),_=o(96379),C=o(69676),N=o(75177),B=o(87330),T=o(93653),A=o(15540),M=o(30729),I=o(27104);let E=(0,u.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});try{E.displayName||(E.displayName="FileTreeContext")}catch{}let j={Pane:"ReposFileTreePane-module__Pane--D26Sw",HidePane:"ReposFileTreePane-module__HidePane--a07q8",HidePaneWithTreeOverlay:"ReposFileTreePane-module__HidePaneWithTreeOverlay--CJn2n",Overlay:"ReposFileTreePane-module__Overlay--ynIDA",HideTree:"ReposFileTreePane-module__HideTree--IyYTf",Box_1:"ReposFileTreePane-module__Box_1--ZT_4S",Box_2:"ReposFileTreePane-module__Box_2--RgzGf",Box_3:"ReposFileTreePane-module__Box_3--XDLn8",Box_4:"ReposFileTreePane-module__Box_4--TLAAU",IconButton:"ReposFileTreePane-module__IconButton--fpuBk",FileResultsList:"ReposFileTreePane-module__FileResultsList--YEf_n",Box_5:"ReposFileTreePane-module__Box_5--cckih",Box_6:"ReposFileTreePane-module__Box_6--zVfxO",Box_7:"ReposFileTreePane-module__Box_7--v7doA",Box_8:"ReposFileTreePane-module__Box_8--KVzCi"};var H=o(53552),W=o(25556),L=o(34535),O=o(96459),P=o(20426),D=o(12004);let q=(0,u.createContext)({});function $({children:e}){let t=(0,u.useRef)(!1),o=(0,u.useRef)(!1),r=(0,u.useRef)(!0),n=(0,u.useCallback)(e=>{t.current=e},[]),a=(0,u.useCallback)(e=>{o.current=e},[]),l=(0,u.useCallback)(e=>{r.current=e},[]),s=(0,u.useMemo)(()=>({expandAllFolders:t,refreshTree:o,shouldFetchFolders:r,setExpandAllFolders:n,setRefreshTree:a,setShouldFetchFolders:l}),[n,a,l]);return(0,i.jsx)(q.Provider,{value:s,children:e})}function U(){return(0,u.useContext)(q)}try{q.displayName||(q.displayName="FileTreeControlContext")}catch{}try{$.displayName||($.displayName="FileTreeControlProvider")}catch{}var G=o(65556);function V(e,t,o){let i=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),n=t.indexOf("/"),a=n>0?t.slice(0,n):t,l=`${e}/${a}`;if(o&&o.some(e=>e.path===l))continue;let s={items:[],data:{contentType:l===r?"file":"directory",name:a,path:l,isClientOnly:!0}};i.push(s)}return i}function K(e,t,o){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let i=t.name.slice(0,t.name.lastIndexOf("/")),r=i.indexOf("/")>-1,n={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:i,hasSimplifiedPath:r},a={items:[e],data:n};return(o.set(n.path,a),r)?K(a,{...n},o):a}let z={Box:"ReposFileTreeView-module__Box--bDodO",Box_1:"ReposFileTreeView-module__Box_1--Q_A5H",Octicon:"ReposFileTreeView-module__Octicon--XcIsb",Box_2:"ReposFileTreeView-module__Box_2--bCLXn"};function Z(e,t,o,i){if(!e)return{newRootItems:o,rootItemsUpdated:!1};let r=!!e[""]&&X("",t,o,e[""].items);for(let r of(i?.(o),Object.keys(e).sort()))if(r){let o=t.get(r);o&&(X(r,t,o.items,e[r].items,i),o.data.totalCount=e[r].totalCount)}return{newRootItems:o,rootItemsUpdated:r}}function X(e,t,o,i,r){let n=!1;for(let a of i){let i=e?`${e}/${a.name}`:a.name;if(!t.get(i)){let e={items:[],data:{...a}};if(t.set(i,e),a.hasSimplifiedPath){let i=K(e,a,t),l=o.findIndex(e=>e.data.path===i.data.path);-1!==l?i.items.length>o[l].items.length&&(o[l]=i,n=!0):(o.push(i),r?.(o))}else o.push(e),r?.(o)}}return n}function Y({isActive:e,file:t,onItemSelected:o,getItemUrl:r,selectedItemRef:n,navigate:a,onRenderRow:l,getFileTrailingVisual:c,getFileIcon:d}){let{sendRepoClickEvent:h}=(0,m.T)(),f=u.useRef(null),p=(0,L.Z)({focusRowRef:f,mouseRowRef:f}),y="submodule"===t.data.contentType,g=c?.(t.data),x=u.useCallback(i=>{y?(i.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):i.metaKey||i.ctrlKey||1===i.button?(window.open(r(t.data),"_blank"),i.preventDefault()):e?i.preventDefault():(o?.(),h("FILES_TREE.ITEM",{item_path:t.data.path}),a(r(t.data)),i.stopPropagation())},[t.data,r,e,y,a,o,h]);return l?.(),(0,i.jsxs)(P.G.Item,{ref:f,onSelect:x,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,i.jsx)(P.G.LeadingVisual,{children:d?d(t.data):y?(0,i.jsx)(s.FileSubmoduleIcon,{}):(0,i.jsx)(s.FileIcon,{})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{ref:n,style:{color:y?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:t.data.name}),p&&(0,i.jsx)(W.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:f,"aria-label":t.data.name,open:!0,direction:"ne"})]}),!!g?.screenReaderText&&(0,i.jsx)("span",{className:"sr-only",children:g.screenReaderText}),!!g?.trailingVisual&&(0,i.jsx)(P.G.TrailingVisual,{children:g.trailingVisual})]})}let J=u.memo(Y);function Q({clientOnlyFilePaths:e,directory:t,isActive:o,isAncestorOfActive:r,leadingPath:n="",onItemSelected:a,dispatchKnownFolders:l,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:h,onRenderRow:f,getFileTrailingVisual:p,getFileIcon:y,navigateOnClick:g=!0}){let{expandAllFolders:x,shouldFetchFolders:w}=U(),[k,R]=(0,u.useState)(x?.current||r),{sendRepoClickEvent:b}=(0,m.T)(),v=u.useRef(null),F=u.useRef(null),S=(0,L.Z)({focusRowRef:F,mouseRowRef:v}),[C,N,B,T,A,M,I]=function(e,t,o){let[i,r]=u.useState(e.items),[n,a]=u.useState(e.data.totalCount||0),[l,s]=u.useState(!1),[c,d]=u.useState(!1),{safeSetTimeout:h}=(0,G.A)();u.useEffect(()=>{r(e.items)},[e.items]),u.useEffect(()=>{void 0!==e.data.totalCount&&a(e.data.totalCount)},[e.data.totalCount]);let f=u.useCallback(()=>{d(!1)},[]),m=u.useCallback((e,t)=>{let o=e||[...i];r(o.slice(0,100)),h(()=>{r(o),void 0!==t&&a(t)},1)},[i,h]);return[u.useCallback(async i=>{let n=new Map;if(e.data.isClientOnly){if(i){let o=V(e.data.path,i);for(let e of o)n.set(e.data.path,e);t({type:"add",folders:n,processingTime:0}),o.length>100?m(o,o.length):(r(o),a(o.length))}}else{let l=o(e.data);d(!1),s(!0);let c=Date.now(),u=await (0,_.lS)(`${l}?noancestors=1`);try{if(u.ok){let o=await u.json(),l=o.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===o.payload.tree.items.length};return(n.set(e.path,t),e.hasSimplifiedPath)?K(t,e,n):t});if(i){let t=e.data.path,r=V(t,i,o.payload.tree.items);for(let e of(l.push(...r),r))n.set(e.data.path,e)}t({type:"add",folders:n,processingTime:Date.now()-c}),e.items=l,e.data.totalCount=o.payload.tree.totalCount,l.length>100?m(l,o.payload.tree.totalCount):(r(l),a(o.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}s(!1)},[o,e,t,m]),m,i,l,c,f,n]}(t,l,c),E=I-B.length,j=n?`${n}/`:"";(0,u.useEffect)(()=>{x?.current&&!k&&R(!0)},[t,x,k]);let H=u.useCallback(i=>{x?.current&&(x.current=!1),i&&!k&&!T&&!A&&(t.items.length>100?N():0!==t.items.length||o||r||w?.current===!1||C(e)),i!==k&&R(i)},[x,k,T,A,t.items.length,o,r,w,N,C,e]),O=u.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&g?(window.open(s(t.data),"_blank"),e.preventDefault()):o?e.preventDefault():(a?.(),b("FILES_TREE.ITEM",{item_path:t.data.path}),g?h(s(t.data)):H?.(!k),e.stopPropagation())},[t.data,s,o,k,h,g,a,H,b]);u.useEffect(()=>{r&&!k&&H?.(!0)},[r]),u.useEffect(()=>{0===t.items.length&&k?H?.(!1):!k&&t.autoExpand&&H?.(!0)},[t.items.length]);let D=u.useCallback(e=>{d&&o&&d(e),v.current=e},[d,o]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,i.jsx)(eo,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:j+t.data.name,inheritsActive:o,dispatchKnownFolders:l,onItemSelected:a,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:g,getFileTrailingVisual:p,getFileIcon:y}):(f?.(),(0,i.jsxs)(P.G.Item,{ref:F,expanded:k,onExpandedChange:H,current:o,onSelect:O,id:`${t.data.path}-item`,containIntrinsicSize:o?void 0:"auto 2rem",children:[(0,i.jsx)(P.G.LeadingVisual,{children:(0,i.jsx)(P.G.DirectoryIcon,{})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{ref:D,children:[j,t.data.name]}),S&&(0,i.jsx)(W.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:F,"aria-label":`${j}${t.data.name}`,open:!0,direction:"ne"})]}),(0,i.jsx)(P.G.SubTree,{state:T?"loading":A?"error":"done",children:A?(0,i.jsx)(P.G.ErrorDialog,{onRetry:C,onDismiss:M,children:"There was an error loading the folder contents."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eo,{clientOnlyFilePaths:e,directoryItems:B,dispatchKnownFolders:l,onItemSelected:a,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:g,getFileTrailingVisual:p,getFileIcon:y}),E>0&&(0,i.jsx)(er,{message:`${E} entries not shown`})]})})]}))}let ee=u.memo(Q);function et({clientOnlyFilePaths:e,directoryItems:t,leadingPath:o,inheritsActive:r,onItemSelected:n,dispatchKnownFolders:a,selectedItemRef:l,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:h,directoryNavigateOnClick:f=!0}){let{path:m}=(0,H.eu)(),p=(0,k.Z)(),y=(0,O.Z)(),g=u.useRef(y);return(0,i.jsx)(i.Fragment,{children:t.map(t=>{let u=m===t.data.path,y=u||m.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,i.jsx)(ee,{clientOnlyFilePaths:e,isActive:r||u,isAncestorOfActive:y,onItemSelected:n,leadingPath:o,directory:t,dispatchKnownFolders:a,getItemUrl:c,getFetchUrl:p.getItemUrl,selectedItemRef:y?l:void 0,navigate:g.current,onRenderRow:s,navigateOnClick:f,getFileTrailingVisual:d,getFileIcon:h,itemCount:t.items.length},t.data.name):(0,i.jsx)(J,{onItemSelected:n,file:t,isActive:u,getItemUrl:c,selectedItemRef:u?l:void 0,navigate:g.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:h},t.data.name)})})}let eo=u.memo(et);function ei(e){let{clientOnlyFilePaths:t,data:o,rootItems:r,setRootItems:n,fetchError:a,incompleteFileTree:l,processingTime:s,loading:c,onRenderRow:h,getItemUrl:f,getFileTrailingVisual:m,getFileIcon:p,sortDirectoryItems:y}=e,{knownFolders:g,dispatchKnownFolders:x}=(0,u.useContext)(E),{refreshTree:w}=U();u.useEffect(()=>{if(c)return;let e=new Map,t=[];w?.current||(e=new Map(g),t=r.slice());let{newRootItems:i,rootItemsUpdated:a}=Z(o,e,t,y);(i.length>r.length||a||w?.current)&&n(i),(e.size>g.size||w?.current)&&x({type:"set",folders:e,processingTime:s}),w?.current&&(w.current=!1)},[o,c]);let k=u.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{onMouseDown:k,className:(0,d.$)(e.className,z.Box),"data-testid":"repos-file-tree-container",children:c?(0,i.jsx)("div",{className:z.Box_1,children:(0,i.jsx)(D.A,{"aria-label":"Loading file tree"})}):(0,i.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,i.jsxs)(P.G,{"aria-label":"Files",children:[a&&(0,i.jsx)(er,{message:"Some files could not be loaded."}),l&&(0,i.jsx)(er,{message:"Sign in to see the full file tree."}),(0,i.jsx)(eo,{clientOnlyFilePaths:t,directoryItems:r,onItemSelected:e.onItemSelected,dispatchKnownFolders:x,selectedItemRef:e.selectedItemRef,onRenderRow:h,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:f,getFileTrailingVisual:m,getFileIcon:p})]})})})})}function er({message:e}){return(0,i.jsxs)(P.G.Item,{id:"error-tree-row",children:[(0,i.jsx)(P.G.LeadingVisual,{children:(0,i.jsx)(M.A,{icon:s.AlertFillIcon,className:z.Octicon})}),(0,i.jsx)("div",{className:z.Box_2,children:e||"Couldn't load."})]})}try{Y.displayName||(Y.displayName="WrappedFileTreeRow")}catch{}try{J.displayName||(J.displayName="FileTreeRow")}catch{}try{Q.displayName||(Q.displayName="WrappedDirectoryTreeRow")}catch{}try{ee.displayName||(ee.displayName="DirectoryTreeRow")}catch{}try{et.displayName||(et.displayName="WrappedDirectoryContents")}catch{}try{eo.displayName||(eo.displayName="DirectoryContents")}catch{}try{ei.displayName||(ei.displayName="ReposFileTreeView")}catch{}try{er.displayName||(er.displayName="ErrorTreeRow")}catch{}var en=o(23451);let ea={IconButton:"SearchButton-module__IconButton--kxA3Q"};function el({sx:e,onClick:t,textAreaId:o}){let{searchShortcut:a}=(0,n.wk)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.K,{"aria-label":"Search this repository",tooltipDirection:"nw",icon:s.SearchIcon,"data-hotkey":a.hotkey,sx:e,size:"medium",onClick:e=>{t?.(),(0,en.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})},className:ea.IconButton}),(0,i.jsx)(r._,{buttonFocusId:o,buttonHotkey:a.hotkey,onButtonClick:()=>{let e=document.getElementById(o);t?.(),(0,en.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},onlyAddHotkeyScopeButton:!0})]})}try{el.displayName||(el.displayName="SearchButton")}catch{}let es=F.Gy.xxxlarge;function ec({clientOnlyFilePaths:e,collapseTree:t,showTree:o,fileTree:r,treeToggleElement:n,treeToggleRef:a,onItemSelected:c,processingTime:h,searchBoxRef:f,repo:m,path:R,refInfo:H,isFilePath:W,foldersToFetch:L,incompleteFileTree:O,id:P,onFindFilesShortcut:D,textAreaId:q,getItemUrlOverride:$,headerClassName:U,paneClassName:G,paneContentsClassName:V,treeContainerClassName:K,findFileWorkerPath:z,headerContent:X,getFileTrailingVisual:Y,getFileIcon:J,sortDirectoryItems:Q,showFindFile:ee=!0,directoryNavigateOnClick:et=!0,showRefSelectorRow:eo=!0,paneResizable:er=!0}){if(ee&&void 0===z)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:en}=(0,w.Ak)(),[ea,ec]=u.useState(L.length>0),[eh,ef]=u.useState(!1),em=u.useRef([]),ep=u.useRef(null),ey=u.useRef(!1),eg=u.useRef(!1),ex=u.useRef(null),{query:ew}=(0,x.JS)(),ek=u.useRef(ew);ek.current=ew;let{codeCenterOption:eR}=(0,S.ud)(),eb=u.useRef(en),[ev]=(0,l.I)(()=>!1,!0,[]),{getItemUrl:eF}=(0,k.Z)(),eS=$||eF,e_=[],eC=new Map,eN=u.useRef(ea);!eN.current&&r&&(e_=Z(r,eC,[],Q).newRootItems),eN.current=!0;let[eB,eT]=u.useReducer(ed,eC),[eA,eM]=u.useState(e_);u.useEffect(()=>{o&&(!ew||window.innerWidth>=F.Gy.large)||(ex.current=null)},[o,ew]),u.useEffect(()=>{en&&eb.current!==en&&window.innerWidth<es&&t({setPreference:!1}),eb.current=en},[t,en]);let eI=u.useCallback(async e=>{let t=eF({contentType:"directory",path:e,name:e});try{let o=await (0,_.lS)(`${t}?noancestors=1`);if(o.ok){let t=await o.json(),i={items:t.payload.tree.items,totalCount:t.payload.tree.totalCount};r[e]=i}else ef(!0)}catch{ef(!0)}em.current.push(e),em.current.length===L.length&&ec(!1)},[r,L.length,eF]);u.useEffect(()=>{if(O)ec(!1);else if(L&&!ey.current)for(let e of L)eI(e);ey.current=!0},[eI,L,O,eB.size]);let eE=u.useCallback(e=>{o&&(!ek.current||window.innerWidth>=F.Gy.large)&&ep.current&&e&&(0,C.Rt)(e,ep.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[o]),ej=u.useCallback(e=>{e&&eg.current?eg.current=!1:ex.current!==e&&eE(e),ex.current=e},[eE]),eH=u.useCallback(e=>{ep.current=e,window.innerWidth>=es&&eE(ex.current)},[eE]),eW=u.useCallback(e=>{e&&eE(ex.current)},[eE]),{screenSize:eL}=(0,F.lm)(),eO=!ev&&(en&&eL<es||eL<F.Gy.xlarge)&&eL>=F.Gy.large,eP=u.useCallback(()=>{eO||c(),eg.current=!0},[c,eO]),eD=W?R.substring(0,R.lastIndexOf("/")):R,eq=(0,u.useMemo)(()=>({knownFolders:eB,dispatchKnownFolders:eT}),[eB]),e$=u.useMemo(()=>ev?null:(0,I.KF)(),[ev]),eU=u.useCallback(()=>{window.innerWidth>F.Gy.large&&window.innerWidth<F.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eG=(0,i.jsxs)(N.A,{id:P,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":ev?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"}},className:V,children:[(0,i.jsxs)("div",{className:(0,d.$)(U,j.Box_1),children:[X,eo&&(0,i.jsxs)("div",{className:j.Box_2,children:[(0,i.jsx)("div",{className:j.Box_3,children:(0,i.jsx)(g.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})}),(0,i.jsxs)("div",{className:j.Box_4,children:[H.canEdit&&(0,i.jsx)(B.K,{"aria-label":"Add file",tooltipDirection:"n",as:v.N,icon:s.PlusIcon,to:(0,b.IO9)({repo:m,path:eD,commitish:H.name,action:"new"}),onClick:eP,className:j.IconButton}),(0,i.jsx)(el,{sx:H.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eU,textAreaId:q})]})]})]}),H.currentOid&&ee&&z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.default,{commitOid:H.currentOid,findFileWorkerPath:z,onItemSelected:c,searchBoxRef:f,sx:{"@media screen and (max-width: 768px)":ev?{display:"none"}:void 0},className:j.FileResultsList}),(0,i.jsx)(p,{inputRef:f,onFindFilesShortcut:D,textAreaId:q})]}),(0,i.jsx)(eu,{scrollingRef:ep}),(0,i.jsxs)(N.A,{ref:eH,sx:{"@media screen and (max-width: 768px)":ev?{display:"none"}:void 0},className:j.Box_5,children:[ev?H.currentOid&&(0,i.jsx)("div",{className:ew?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,i.jsx)(ei,{clientOnlyFilePaths:e,data:r,rootItems:eA,selectedItemRef:ej,setRootItems:eM,onItemSelected:eP,processingTime:h,loading:ea,fetchError:eh,incompleteFileTree:O,directoryNavigateOnClick:et,getItemUrl:eS,className:K,getFileTrailingVisual:Y,getFileIcon:J,sortDirectoryItems:Q})}):e$&&(0,i.jsx)(I.bL,{node:e$}),!H.currentOid&&!m.isEmpty&&(0,i.jsxs)("div",{className:j.Box_6,children:[(0,i.jsx)(M.A,{icon:s.AlertFillIcon}),"\xa0Ref is invalid"]})]})]});return(0,i.jsxs)(E.Provider,{value:eq,children:[e$&&(0,i.jsx)(I.oj,{node:e$,children:H.currentOid&&(0,i.jsx)("div",{className:ew?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,i.jsx)(ei,{clientOnlyFilePaths:e,data:r,directoryNavigateOnClick:et,rootItems:eA,selectedItemRef:ej,setRootItems:eM,onItemSelected:eP,processingTime:h,loading:ea,fetchError:eh,incompleteFileTree:O,getItemUrl:eS,className:K,getFileTrailingVisual:Y,getFileIcon:J,sortDirectoryItems:Q})})}),!o&&eR.enabled&&n&&(0,i.jsx)(N.A,{sx:{"@media screen and (min-width: 1360px)":{display:"block"}},className:j.Box_7,children:n}),(0,i.jsx)(T.O7.Pane,{position:"start",sticky:!0,padding:"none",width:"large",resizable:!!er,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},className:(0,d.$)(j.Pane,!o&&j.HideTree,eO||en?j.HidePaneWithTreeOverlay:j.HidePane,G),children:o&&!eO&&(0,i.jsx)("div",{className:ev?en?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eG})}),o&&eO&&eb.current===en&&(0,i.jsx)(A.Ay,{className:(0,d.$)(ev?en?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,j.Overlay,!o&&j.HideTree),ref:eW,returnFocusRef:a,onClickOutside:eU,onEscape:eU,top:0,position:"fixed",children:(0,i.jsx)(i.Fragment,{children:eG})})]})}function ed(e,t){switch(t.type){case"set":{let o=e?.size>0;return(0,R.BI)("file-tree",{"fetch-count":o?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":o?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let o=new Map([...e,...t.folders]);return(0,R.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":o.size,"nav-type":"fetch","processing-time":t.processingTime}),o}default:throw Error(`Unknown action type: ${t.type}`)}}function eu({scrollingRef:e}){let[t,o]=u.useState(e.current&&e.current.scrollTop>0);return u.useEffect(()=>{if(e.current){let t=e.current,i=()=>{t&&t.scrollTop>0?o(!0):o(!1)};return t.addEventListener("scroll",i),()=>{t.removeEventListener("scroll",i)}}},[e]),t?(0,i.jsx)("div",{className:j.Box_8}):null}try{ec.displayName||(ec.displayName="ReposFileTreePane")}catch{}try{eu.displayName||(eu.displayName="TreeBorder")}catch{}var eh=o(16881),ef=o(31315),em=o(35898),ep=o(71315),ey=o(88431),eg=o(63557);let ex={Heading:"use-tree-pane-module__Heading--iI_ad"};function ew(e,t,o,r,n,a="fileTreeExpanded",l){let{sendRepoClickEvent:s}=(0,m.T)(),c=(0,em.i)(),d=a?(0,ef.Ri)(a):void 0,h=void 0===ep.XC,p=!c&&d&&"false"!==d.value||c&&o;void 0===p&&(p=!1);let y=(0,u.useRef)(null),g=(0,u.useRef)(null),{screenSize:x}=(0,F.lm)(),[w,k]=(0,u.useState)(p),R=(0,u.useRef)(p),b=(0,u.useRef)(!1),v=(0,u.useRef)(!1),S=(0,u.useCallback)(()=>!(t.current&&window.innerWidth>=es||!t.current&&window.innerWidth>=F.Gy.xlarge),[t]);(0,ey.N)(()=>{let e=S();e||(b.current=!1),k((0,eh.q)()&&x<F.Gy.large&&!v.current||(!e||b.current)&&(c&&w||!c&&d?.value!=="false"))},[b,d?.value,x,t,S,c]),(0,ey.N)(()=>{let e=!t.current&&window.innerWidth<F.Gy.xlarge,o=!t.current&&window.innerWidth>=F.Gy.xlarge;e&&R.current&&!(0,eh.q)()&&w&&k(!1),o&&R.current&&!w&&k(!0)},[t,x]),(0,ey.N)(()=>{let e=t.current&&window.innerWidth<es,o=t.current&&window.innerWidth>=es;e&&R.current&&!(0,eh.q)()&&w&&k(!1),o&&R.current&&!w&&k(!0)},[t]);let _=(0,u.useCallback)(e=>{if(k(!0),S()&&(b.current=!0),e?.setPreference&&(n?.(!0),R.current=!0,a)){let e=new Date(Date.now()+2592e6).toUTCString();(0,ef.TV)(a,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>y.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>g.current?.focus())},[a,2592e6,S,n]),C=(0,u.useCallback)(e=>{if(k(!1),b.current=!1,v.current=!0,e?.setPreference&&(n?.(!1),R.current=!1,a)){let e=new Date(Date.now()+2592e6).toUTCString();(0,ef.TV)(a,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>y.current?.focus())},[a,2592e6,n]),N=(0,u.useCallback)(e=>e&&window.innerWidth>=es||!t.current&&window.innerWidth>=F.Gy.xlarge,[t]),B=(0,u.useMemo)(()=>(0,i.jsx)(eg.A,{as:"h2",className:ex.Heading,children:(0,i.jsx)(f,{expanded:w,ariaControls:e,onToggleExpanded:()=>{s(w?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),w?C({focus:"toggleButton",setPreference:N(t.current)}):_({focus:"toggleButton",setPreference:N(t.current)})},className:void 0!==d||w||h?void 0:"react-tree-toggle-button-with-indicator",ref:y,textAreaId:r,...l})}),[w,e,d,h,r,l,s,C,N,t,_]);return{isTreeExpanded:w,expandTree:_,collapseTree:C,treeToggleElement:B,treeToggleRef:y,searchBoxRef:g}}},39111:(e,t,o)=>{o.d(t,{X:()=>r});var i=o(54571);function r(e){let t=e.join(","),[o]=(0,i.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return o}},12748:(e,t,o)=>{o.d(t,{_:()=>r});var i=o(74848);function r({buttonFocusId:e,buttonHotkey:t,onButtonClick:o,buttonTestLabel:r,onlyAddHotkeyScopeButton:n}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{hidden:!0,"data-testid":r||"","data-hotkey":t,onClick:o,"data-hotkey-scope":e}),!n&&(0,i.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:o})]})}try{r.displayName||(r.displayName="DuplicateOnKeydownButton")}catch{}},93753:(e,t,o)=>{o.d(t,{R:()=>h});var i=o(74848),r=o(78314),n=o(25407),a=o(38411),l=o(43258),s=o(96540),c=o(53552),d=o(80780),u=o(6665);function h({size:e,buttonClassName:t,allowResizing:o,idEnding:h}){let f=(0,r.t)(),{refInfo:m,path:p,action:y}=(0,c.eu)(),g=function(){let{addToast:e}=(0,l.Y6)();return(0,s.useCallback)(t=>e({type:"error",message:t}),[e])}(),{sendRepoClickEvent:x}=(0,u.T)(),{refSelectorShortcut:w}=(0,d.wk)();return(0,i.jsx)(a.PI,{currentCommitish:m.name,defaultBranch:f.defaultBranch,owner:f.ownerLogin,repo:f.name,canCreate:f.currentUserCanPush,cacheKey:m.listCacheKey,selectedRefType:m.refType,getHref:e=>`${(0,n.IO9)({repo:f,commitish:e,action:y,path:p})}${window.location.search}`,hotKey:w.hotkey,onBeforeCreate:e=>x("REF_SELECTOR_MENU.CREATE_BRANCH",{ref_name:e}),onCreateError:g,onOpenChange:e=>e&&x("REF_SELECTOR_MENU"),size:e,buttonClassName:t,allowResizing:o,idEnding:h||"repos-header-ref-selector",useFocusZone:!0})}try{h.displayName||(h.displayName="ReposHeaderRefSelector")}catch{}},6873:(e,t,o)=>{o.r(t),o.d(t,{FileResultRow:()=>j,default:()=>I});var i=o(74848),r=o(31078),n=o(53552),a=o(6665),l=o(19189),s=o(78314),c=o(65787),d=o(25407),u=o(66108),h=o(94195),f=o(96459),m=o(69676),p=o(38621),y=o(82678),g=o(69410),x=o(52446),w=o(81246),k=o(75177),R=o(9745),b=o(12004),v=o(30729),F=o(91385),S=o(96540),_=o(7808),C=o(64642),N=o(16881),B=o(54030);let T={Box:"FileResultsList-module__Box--vA4S3",OverlayEnabled:"FileResultsList-module__OverlayEnabled--TR58f",ActionList:"FileResultsList-module__ActionList--_Vf2k",ActionList_Overlay:"FileResultsList-module__ActionList_Overlay--_kFTy",Box_1:"FileResultsList-module__Box_1--b75fu",FilesSearchBox:"FileResultsList-module__FilesSearchBox--fSAh3",ActionList_Item:"FileResultsList-module__ActionList_Item--DMdMo",HighlightMatch:"FileResultsList-module__HighlightMatch--Is2AV",Box_2:"FileResultsList-module__Box_2--r62Lf",Octicon:"FileResultsList-module__Octicon--LtXx2",PrimerLink:"FileResultsList-module__PrimerLink--vMxOi"};var A=o(34164);let M={excludeDirectories:!1,excludeSeeAllResults:!1};function I({actionListClassName:e,additionalResults:t,commitOid:o,config:u=M,findFileWorkerPath:p,getItemUrl:b,onRenderRow:v,onItemSelected:F,searchBoxRef:I,className:j,sx:H}){let{excludeDirectories:W,excludeSeeAllResults:O}=u,{query:P,setQuery:D}=(0,r.JS)(),q=(0,s.t)(),$=S.useRef(null),U=I??$,[G,V]=S.useState(P.length>0),[K,z]=S.useState(!!P),{list:Z,directories:X,loading:Y,error:J}=(0,B.o)(o,G,!!W),{path:Q}=(0,n.eu)(),{getUrl:ee}=(0,l.Z)(),{queryText:et,queryLine:eo}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(P),{matches:ei,clearMatches:er}=function(e,t,o,i){let[r,n]=S.useState(),l=S.useRef(""),s=S.useRef(),{sendStats:c}=(0,a.T)(),d=S.useRef(!1),u=S.useCallback(()=>{let e=new _.z(o,C.j);e.onmessage=({data:e})=>{d.current=!1,n(e.list),l.current=e.query,e.startTime&&c("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[c,o]);return S.useEffect(()=>{if(i)return u(),function(){s.current?.terminate()}},[u,i]),S.useEffect(()=>{if(e.length&&t){d.current&&(s.current?.terminate(),u());let o=l.current&&t.startsWith(l.current);d.current=!0,s.current?.postMessage({baseList:o&&r||e,query:t,startTime:performance.now()})}},[e,t,u]),{matches:r,clearMatches:()=>n(void 0)}}((0,S.useMemo)(()=>[...Z,...t??[]].sort(),[t,Z]),et,p,G),{sendRepoClickEvent:en}=(0,a.T)(),ea=(0,f.Z)(),[el,es]=S.useState(0),[ec,ed]=S.useState(()=>(0,N.q)()),eu=S.useRef(null),eh=S.useRef(null),ef="file-results-list",{sendRepoKeyDownEvent:em}=(0,a.T)(),{screenSize:ep}=(0,h.lm)(),ey=u.enableOverlay??ep>=h.Gy.large,eg=S.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),F?.(e),z(!1)},[en,F]),ex=(e,t,o)=>b?b(e,t,o):ee({path:e,action:t?"tree":"blob",hash:o}),{containerRef:ew}=(0,y.G)({bindKeys:m.z0.ArrowVertical|m.z0.HomeAndEnd,focusInStrategy:"previous"},[Y,J]);S.useEffect(()=>{P||z(!1)},[P]),S.useEffect(()=>{document.activeElement!==U.current&&ey&&z(!1)},[Q,U,ey]);let ek=ei?.slice(0,40)||[],eR=ei&&ei.length>ek.length,eb=(0,i.jsx)("div",{className:(0,A.$)(T.Box,{[T.OverlayEnabled]:ey}),children:J?(0,i.jsx)(g.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,i.jsxs)(x.l,{ref:ew,className:(0,A.$)(e,T.ActionList,{[T.ActionList_Overlay]:ey}),role:"listbox",children:[!Y&&ek.map((e,t)=>{let o=X.includes(e),r=ex(e,o,eo?`L${eo}`:"");return(0,i.jsx)(L,{active:e===Q,index:t,focused:ec&&el===t,match:e,onRender:v,query:et,onClick:eg,isDirectory:o,to:r,useOverlay:ey,listRef:ew},e)}),(0,i.jsxs)("div",{className:"m-3 text-center",children:[(0,i.jsx)(E,{loading:Y||!ei,visibleResultCount:ek.length,truncated:!!eR}),eR&&!O&&(0,i.jsxs)(i.Fragment,{children:["\xa0",(0,i.jsx)(w.A,{id:"see-all-results-link",className:(0,A.$)("focus-visible",{[T.PrimerLink]:ec&&el===ek.length}),ref:eu,href:(0,d.Y8Y)({owner:q.ownerLogin,repo:q.name,searchTerm:`path:${et}`}),children:"See all results"})]})]})]})});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.A,{ref:eh,sx:H,className:(0,A.$)(j,T.Box_1),children:(0,i.jsx)(N.Z,{ariaActiveDescendant:(!ey&&P||ey&&K)&&ec&&el>-1?eR&&el===ek.length?"see-all-results-link":`file-result-${el}`:void 0,ariaExpanded:ey?K:void 0,ariaHasPopup:ey,ariaControls:ey?ef:void 0,ref:U,query:P,onKeyDown:e=>{let{key:t,shiftKey:o,metaKey:i,altKey:r,ctrlKey:n}=e;if(!o&&!i&&!r){if("Escape"===t)P?(em("FILE_TREE.CANCEL_SEARCH"),D(""),er()):document.activeElement&&document.activeElement.blur();else if(!P)return;else if("Enter"===t){if(!O&&eR&&el===ek.length)ea((0,d.Y8Y)({owner:q.ownerLogin,repo:q.name,searchTerm:`path:${et}`})),F?.();else if(ek[el]){let e=ek[el];ea(ex(ek[el],!1,eo?`L${eo}`:"")),z(!1),F?.(e)}}else if("ArrowDown"===t||n&&"n"===t){if(!O&&eR&&el>=ek.length-1){if(es(ek.length),eu.current&&ew.current){let e=(0,c.U)(ew.current);(0,m.Rt)(eu.current,e,{behavior:"instant"})}}else es(Math.min(el+1,ek.length-1));e.preventDefault();return}else if("ArrowUp"===t||n&&"p"===t){es(Math.max(el-1,0)),e.preventDefault();return}}},onPreload:()=>V(!0),onSearch:e=>{D(e),e?z(!0):(er(),z(!1)),es(0)},onBlur:e=>{ew.current?.contains(e.relatedTarget)||(z(!1),ed(!1))},onFocus:()=>{P&&z(!0),ed(!0)},className:T.FilesSearchBox})}),ey&&(0,i.jsx)(R.T,{anchorRef:eh,open:ey&&K,renderAnchor:null,onClose:()=>{z(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:ef,role:"dialog"},children:eb}),!ey&&P&&eb]})}function E({visibleResultCount:e,truncated:t,loading:o}){return(0,i.jsx)("span",{role:"status",className:o||t||0===e?void 0:"sr-only","aria-label":o?"Loading":void 0,children:o?(0,i.jsx)(b.A,{size:"large"}):0===e?"No matches found":t?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}let j=({active:e,focused:t,index:o,match:r,query:n,to:a,isDirectory:l,onClick:s,onRender:d,useOverlay:h,listRef:f})=>{let p=(0,F.Xq)(n,r);d?.();let y=S.useRef(null);S.useEffect(()=>{if(t&&y.current&&f?.current){let e=(0,c.U)(f.current);(0,m.Rt)(y.current,e,{behavior:"instant"})}},[t,f]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let w=(0,S.useCallback)(()=>{s?.(r)},[r,s]);return(0,i.jsx)(x.l.LinkItem,{id:`file-result-${o}`,ref:y,as:u.N,onClick:w,to:a,active:e,className:(0,A.$)("d-flex",T.ActionList_Item),sx:g,role:"option","data-focus-visible-added":t||void 0,tabIndex:h?-1:0,children:(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,i.jsx)(O,{text:r,positionsList:p,LeadingIcon:l?H:W,className:T.HighlightMatch})}),t&&(0,i.jsx)("div",{className:T.Box_2,children:`Go to ${l?"folder":"file"}`})]})},r)},H=()=>(0,i.jsx)(v.A,{"aria-label":"Directory",icon:p.FileDirectoryFillIcon,size:"small",className:T.Octicon}),W=()=>(0,i.jsx)(v.A,{"aria-label":"File",icon:p.FileIcon,className:"fgColor-muted mr-2",size:"small"}),L=S.memo(j);function O({text:e,positionsList:t,className:o,LeadingIcon:r}){let n=[],a=0;for(let o of t){if(Number(o)!==o||o<a||o>e.length)continue;let t=e.slice(a,o);t&&n.push(P(t)),a=o+1,n.push((0,i.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[o]},o))}return n.push(P(e.slice(a))),(0,i.jsx)("div",{className:o,children:(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(r,{}),n]})})}function P(e){return e.replaceAll("/","/\u200B")}try{I.displayName||(I.displayName="FileResultsList")}catch{}try{E.displayName||(E.displayName="FileResultsStatus")}catch{}try{j.displayName||(j.displayName="FileResultRow")}catch{}try{H.displayName||(H.displayName="DirectoryIcon")}catch{}try{W.displayName||(W.displayName="FileResultIcon")}catch{}try{L.displayName||(L.displayName="MemoizedFileResultRow")}catch{}try{O.displayName||(O.displayName="HighlightMatch")}catch{}},16881:(e,t,o)=>{o.d(t,{Z:()=>f,q:()=>m});var i=o(74848),r=o(70170),n=o(37272),a=o(6665),l=o(71315),s=o(38621),c=o(24815),d=o(96540);let u={TextInput:"FilesSearchBox-module__TextInput--Rvr17",Box:"FilesSearchBox-module__Box--QJMeO"};var h=o(34164);let f=d.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:o,ariaHasPopup:l,onBlur:f,onFocus:p,onKeyDown:y,onPreload:g,onSearch:x,query:w,sx:k,className:R},b)=>{let{sendRepoClickEvent:v}=(0,a.T)(),[F,S]=d.useState(w),_=d.useRef((0,r.s)(e=>x(e),250));d.useEffect(()=>{S(w)},[w]);let C=w?(0,i.jsx)(c.A.Action,{onClick:()=>{v("FILE_TREE.CANCEL_SEARCH"),x("")},icon:s.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,i.jsx)(c.A,{autoFocus:m(),ref:b,value:F,onKeyDown:y,onChange:e=>{S(e.target.value),g(),_.current(e.target.value)},sx:k,className:(0,h.$)(R,u.TextInput),"aria-label":"Go to file","aria-activedescendant":e,role:l?"combobox":void 0,"aria-controls":t,"aria-expanded":o,"aria-haspopup":l?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:"Go to file",leadingVisual:s.SearchIcon,trailingAction:C,trailingVisual:C?void 0:()=>(0,i.jsx)(n.E,{children:(0,i.jsx)("div",{className:u.Box,children:(0,i.jsx)("kbd",{children:"t"})})}),onFocus:e=>{g(),e.target.select(),p?.(e)},onBlur:f,onClick:()=>v("FILE_TREE.SEARCH_BOX")})});function m(){return"1"===new URLSearchParams(l.fV.search).get("search")}f.displayName="FilesSearchBox"},46209:(e,t,o)=>{o.d(t,{Ak:()=>h,cD:()=>u,iK:()=>d});var i=o(74848),r=o(41617),n=o(35898),a=o(82075),l=o(94195),s=o(96540);let c=(0,a.A)("localStorage"),d=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function u({children:e,payload:t,openPanelRef:o}){let a="blame"in t,u=(0,r.Hf)(t),h=(0,n.i)(),f=(0,s.useRef)(void 0),[m,p]=(0,s.useState)(()=>{let e=c.getItem("codeNavOpen");if(!h&&""!==e&&null!==e||h&&t.symbolsExpanded)return"codeNav"}),y=(a||u)&&"codeNav"===m?void 0:m;s.useEffect(()=>{o.current=y},[y,o]);let g=(0,s.useCallback)((e,t)=>{p(o=>(o&&f.current&&f.current.focus(),f.current=t,a||u&&"codeNav"===e?void 0:e))},[a,u]);var x=g;let{screenSize:w}=(0,l.lm)(),k=(0,s.useRef)(w);(0,s.useEffect)(()=>{let e=k.current>=l.Gy.large,t=k.current===w;w<l.Gy.large&&(e||t)&&x(void 0),k.current=w},[w,x]);let R=(0,s.useMemo)(()=>({openPanel:y,setOpenPanel:g}),[y,g]);return(0,i.jsx)(d.Provider,{value:R,children:e})}function h(){return(0,s.useContext)(d)}try{d.displayName||(d.displayName="OpenPanelContext")}catch{}try{u.displayName||(u.displayName="OpenPanelProvider")}catch{}},8624:(e,t,o)=>{o.d(t,{L:()=>s});var i=o(74848),r=o(21728),n=o(38621),a=o(87330),l=o(34164);let s=o(96540).forwardRef((e,t)=>{let o,s,c,d=(0,r.c)(17),{expanded:u,testid:h,ariaLabel:f,ariaControls:m,onToggleExpanded:p,alignment:y,dataHotkey:g,className:x,size:w,tooltipDirection:k,variant:R}=e,b=u?`collapse-${h}`:`expand-${h}`,v=u?"left"===y?n.SidebarExpandIcon:n.SidebarCollapseIcon:"left"===y?n.SidebarCollapseIcon:n.SidebarExpandIcon;d[0]!==p?(o=e=>{p(e)},d[0]=p,d[1]=o):o=d[1];let F=R??"invisible";return d[2]!==x?(s=(0,l.$)(x,"fgColor-muted"),d[2]=x,d[3]=s):s=d[3],d[4]!==m||d[5]!==f||d[6]!==g||d[7]!==u||d[8]!==t||d[9]!==w||d[10]!==b||d[11]!==v||d[12]!==o||d[13]!==F||d[14]!==s||d[15]!==k?(c=(0,i.jsx)(a.K,{"aria-label":f,tooltipDirection:k,ref:t,"data-testid":b,"aria-expanded":u,"aria-controls":m,icon:v,"data-hotkey":g,onClick:o,variant:F,size:w,className:s}),d[4]=m,d[5]=f,d[6]=g,d[7]=u,d[8]=t,d[9]=w,d[10]=b,d[11]=v,d[12]=o,d[13]=F,d[14]=s,d[15]=k,d[16]=c):c=d[16],c});s.displayName="ExpandButton"},70103:(e,t,o)=>{o.d(t,{a:()=>n});var i=o(51987),r=o(88057);function n({path:e,Component:t,shouldNavigateOnError:o,transitionType:n,children:a}){return{path:e,Component:t,coreLoader:async function e({location:e}){let t;try{let o=`${e.pathname}${e.search}`;t=await window.fetch(o,{headers:{Accept:"application/json",...(0,i.kt)(),"X-GitHub-Target":"dotcom","X-React-Router":"json",...(0,i.jC)("navigator")}});let n=t?.headers?.get("X-Github-Request-Id");n&&(0,r.Ex)(n)}catch{return{type:o?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:o?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch{return{type:o?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:n,children:a}}},64830:(e,t,o)=>{o.d(t,{T2:()=>c,cp:()=>m,ud:()=>y});var i=o(74848),r=o(21728),n=o(82075),a=o(96540);let l=(0,n.A)("localStorage"),s="codeView.codeFolding",c="codeView.codeWrapping",d="codeView.centerView",u="codeView.openSymbolsOnClick",h=new Map([[s,"Show code folding buttons"],[c,"Wrap lines"],[d,"Center content"],[u,"Open symbols on click"]]),f=(0,a.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}}),m=e=>{let t,o,n,a=(0,r.c)(8),{children:l}=e,h=p(s,!0),m=p(c,!1),y=p(d,!1),g=p(u,!0);return a[0]!==y||a[1]!==h||a[2]!==m||a[3]!==g?(o={codeFoldingOption:h,codeWrappingOption:m,codeCenterOption:y,openSymbolsOption:g},a[0]=y,a[1]=h,a[2]=m,a[3]=g,a[4]=o):o=a[4],t=o,a[5]!==l||a[6]!==t?(n=(0,i.jsx)(f.Provider,{value:t,children:l}),a[5]=l,a[6]=t,a[7]=n):n=a[7],n};function p(e,t){let o,i,n,s,c=(0,r.c)(11);c[0]!==e?(o=l.getItem(e),c[0]=e,c[1]=o):o=c[1];let d=o;c[2]!==t||c[3]!==d?(i=()=>d?"true"===d:t,c[2]=t,c[3]=d,c[4]=i):i=c[4];let[u,f]=(0,a.useState)(i);c[5]!==e?(n=h.get(e)||"",c[5]=e,c[6]=n):n=c[6];let m=n;return c[7]!==u||c[8]!==m||c[9]!==e?(s={name:e,enabled:u,setEnabled:f,label:m},c[7]=u,c[8]=m,c[9]=e,c[10]=s):s=c[10],s}function y(){return(0,a.useContext)(f)}try{f.displayName||(f.displayName="CodeViewOptionsContext")}catch{}try{m.displayName||(m.displayName="CodeViewOptionsProvider")}catch{}}}]);
//# sourceMappingURL=packages_repos-file-tree-view_repos-file-tree-view_ts-packages_react-core_JsonRoute_tsx-9e8f7eec14be.js.map