"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["lazy-react-partial-actions-survey","lazy-react-partial-configure-mcp-server-partial","lazy-react-partial-enterprise-team","lazy-react-partial-mergebox-partial","lazy-react-partial-ref-selector-partial","lazy-react-partial-single-sign-on-dropdown-partial","packages_react-core_BaseProviders_tsx-packages_react-core_CommonElements_tsx-packages_react-c-df95ea","packages_react-core_deferred-registry_ts-packages_agent-sessions_components_NewTaskChatInput_-2881e7","packages_react-core_deferred-registry_ts-packages_react-core_ProfilerContext_tsx-packages_rea-173383"],{6224:(e,t,n)=>{n.d(t,{A:()=>r});let r={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY"}},62227:(e,t,n)=>{n.d(t,{A:()=>r});let r={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},67154:(e,t,n)=>{n.d(t,{Y:()=>r,w:()=>a});let r={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled",Queued:"queued"};function a(e){switch(e){case r.InProgress:return"In progress";case r.Completed:return"Ready for review";case r.Failed:return"Failed";case r.Idle:return"Idle";case r.WaitingForUser:return"Waiting for user";case r.TimedOut:return"Timed out";case r.Cancelled:return"Cancelled";case r.Queued:return"Queued";default:return"Unknown"}}},51120:(e,t,n)=>{n.d(t,{I:()=>o,j:()=>FetchCAPI401Error});var r=n(34295),a=n(25641),i=n(21067);let FetchCAPI401Error=class FetchCAPI401Error extends Error{constructor(e){super(e),this.name="FetchCAPI401Error"}};async function o({path:e,apiURL:t,method:n="GET",streamingResponse:o=!1,body:l}){let s=new r.l,c=await s.getAuthToken();if(!c)throw Error("No token available");let d={authToken:c,basePath:(0,i._$)().copilotApiOverrideUrl??t??"https://api.githubcopilot.com",method:n,path:e,streamingResponse:o,body:l},u=await (0,a.p)(d);if(!u.ok){if(401===u.status)throw new FetchCAPI401Error("Unauthorized access - token may be invalid or expired");throw Error("Failed to fetch agent sessions")}return u}},55899:(e,t,n)=>{n.d(t,{u:()=>r});function r(){return crypto.randomUUID()}},6665:(e,t,n)=>{n.d(t,{T:()=>d});var r=n(78314),a=n(25407),i=n(91747),o=n(30459),l=n(96379),s=n(96540),c=n(35898);function d(){let{sendAnalyticsEvent:e}=(0,o.s)(),t=function(){let e=function(){let e=(0,r.t)(),t=(0,c.i)();return(0,s.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,r.t)(),n=(0,a.yH8)(a.tTz,{owner:t.ownerLogin,repo:t.name});return(0,s.useCallback)((t,r,a)=>{let i={target:t,interaction:r,context:a,...e,...{url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")}};(0,l.lS)(n,{method:"POST",body:i})},[e,n])}(),n=(0,i.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,s.useCallback)((r,a={})=>{e("repository.click",r,a),n&&t(r,"click",a)},[e,t,n]),sendRepoKeyDownEvent:(0,s.useCallback)((r,a={})=>{e("repository.keydown",r,a),n&&t(r,"keydown",a)},[e,t,n]),sendStats:(0,s.useCallback)((r,a={})=>{e(r,"",a),n&&t(r,"stats",a)},[e,t,n]),sendMarketplaceActionEvent:(0,s.useCallback)((t,n={})=>{e("marketplace.action.click",t,n)},[e])}}},54030:(e,t,n)=>{n.d(t,{o:()=>u});var r=n(5225),a=n(78314),i=n(25407),o=n(96379),l=n(96540);async function s(e){let t=await (0,o.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,r.A)(s,{cache:c});function u(e,t,n){let r=(0,a.t)(),[o,s]=(0,l.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:r,commitOid:e,includeDirectories:!n});return(0,l.useEffect)(()=>{let e=!1,n=async()=>{s({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let n=t?.paths||[],r=t?.directories||[];s({list:n.concat(r).sort(),directories:r,error:!t})};return t&&n(),function(){e=!0}},[c,t,n]),o}},19189:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(53552),a=n(78314),i=n(25407),o=n(54571),l=n(96540);function s(){let e=(0,a.t)(),{path:t,action:n,refInfo:s}=(0,r.eu)(),[c]=(0,o.I)(()=>!1,!0,[]);function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:l.useCallback(t=>(0,i.IO9)({repo:e,commitish:s.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,s.name]),getUrl(r={}){let a=(0,i.IO9)({repo:e,commitish:r.commitish||s.name,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(a,window.location.origin).href:a},createPermalink(r={}){let a=(0,i.IO9)({repo:e,commitish:s.currentOid,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(a,window.location.origin).href:a},isCurrentPagePermalink:()=>!c&&s.name===s.currentOid&&window.location.pathname.includes(s.currentOid)}}},7808:(e,t,n)=>{n.d(t,{z:()=>WebWorker});var r=n(35750),a=n(18150),i=n(85242),o=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,o._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var l=new WeakMap,s=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,r._)(this,l))return;let t={data:(0,r._)(this,s).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,i._)(this,l,!0)}constructor(e){(0,a._)(this,l,{writable:!0,value:!1}),(0,o._)(this,"onmessage",void 0),(0,a._)(this,s,{writable:!0,value:void 0}),(0,i._)(this,s,e)}}},64642:(e,t,n)=>{n.d(t,{j:()=>o});var r=n(5225),a=n(91385);let i=(0,r.A)(a.fN);function o({data:e}){let{query:t,baseList:n,startTime:r}=e,o=t.replaceAll("\\","");return{query:t,list:n.filter(e=>{var t,n;return t=e,""===(n=o)||(0,a.qA)(n,t)&&i(n,t)>0}).sort((e,t)=>i(o,t)-i(o,e)),baseCount:n.length,startTime:r}}},34295:(e,t,n)=>{n.d(t,{l:()=>AgentSessionsTokenProvider});var r=n(65411);let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends r.J{constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},7730:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n=(0,r.c)(2),[i,o]=(0,a.useState)(!1);return n[0]!==e.current?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let r=new IntersectionObserver(e=>{let[t]=e;return o(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(n),()=>r.disconnect()},n[0]=e.current,n[1]=t):t=n[1],(0,a.useEffect)(t),i}},26408:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(16654),a=n(82490),i=n(96540),o=n(18312),l=n(2635),s=n(33592),c=n(23657);function d(e,t,n,m,p=!1){let[h,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,l.Pk)(),_=(0,s.b)(),[v,b]=(0,i.useState)([]),[S,w]=(0,i.useState)(!y&&"initial"),C=(0,i.useRef)(void 0),j=(0,o.useRelayEnvironment)(),I=m&&""!==m.trim();if(h&&!y&&!e&&!I){let e=u(h||[]),{ownerLogin:t,name:n}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>_.setTopRepositoryTopics(e),10),w(!1),f(void 0)}let N=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(j,{first:n,owner:I?m:void 0});f(e)}catch{}finally{w(!1)}},[I,m,j,f,n]);return((0,i.useEffect)(()=>{t&&!I&&N()},[N,I,t,m]),(0,i.useEffect)(()=>{let t=async e=>{w(!0);let{repositories:t}=await (0,r.vO)(j,{query:I?(0,c.rl)(m,e,p):(0,a.J)(e,{includeForks:p}),onStart:e=>{C.current?.unsubscribe(),C.current=e}});b(t.length?u(t):[]),w(!1)};e||I?t(e):y&&b(y)},[e,I,m,j,y,p]),(0,i.useEffect)(()=>{_.setTopRepositoryTopics(void 0)},[_,m]),!y||e||I)?{repositories:v,loading:S,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},14521:(e,t,n)=>{n.d(t,{G:()=>c});var r=n(21728),a=n(79802),i=n(96540),o=n(2635),l=n(23657),s=n(72303);function c(){let e,t=(0,r.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,s.W)(e),r=(0,a.O)(t);return(0,l.Ym)(n.current,r)?n.current:(n.current=r,r)},t[0]=e):e=t[0];let c=(0,o.pn)(e);return(0,l.iI)()||c}},99054:(e,t,n)=>{n.d(t,{JE:()=>f,Z3:()=>p,bn:()=>m,kw:()=>g,qj:()=>h});var r=n(21728),a=n(97286),i=n(8625),o=n(96540),l=n(14521),s=n(25641),c=n(2635),d=n(33592),u=n(72206);let m="https://github.com/marketplace?type=apps&copilot_app=true",p="@",h=/^@(?<slug>\S+)$/;function f(e){let t,n,i,o,m,p,h=(0,r.c)(25),{agentsPath:f,model:g}=(0,c.bP)("agentsPath","model"),y=(0,u.tD)(),x=(0,d.b)(),_=!!(0,l.G)(),v=g?.hasLimitedCapabilities;h[0]!==y||h[1]!==_||h[2]!==v?(t=e=>{let{messages:t}=y();if(v||_)return{agents:[],showLimit:!1};let n=(0,s.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},h[0]=y,h[1]=_,h[2]=v,h[3]=t):t=h[3];let b=t;h[4]!==f?(n=["copilot-chat","agents",f],h[4]=f,h[5]=n):n=h[5],h[6]!==f||h[7]!==x?(i=()=>f?x.fetchAgents(f):[],h[6]=f,h[7]=x,h[8]=i):i=h[8];let S=(void 0===e||e)&&!v&&!_;h[9]!==b||h[10]!==n||h[11]!==i||h[12]!==S?(o={queryKey:n,queryFn:i,select:b,enabled:S},h[9]=b,h[10]=n,h[11]=i,h[12]=S,h[13]=o):o=h[13];let{isLoading:w,data:C,refetch:j,isStale:I,isFetched:N}=(0,a.I)(o);h[14]!==C||h[15]!==N||h[16]!==I||h[17]!==j?(m=async()=>!N||I?(await j()).data:C,h[14]=C,h[15]=N,h[16]=I,h[17]=j,h[18]=m):m=h[18];let k=m,R=C?.agents,E=C?.showLimit??!1;return h[19]!==k||h[20]!==w||h[21]!==R||h[22]!==E||h[23]!==v?(p={loading:w,disabled:v,availableAgents:R,showLimit:E,imperativelyFetch:k},h[19]=k,h[20]=w,h[21]=R,h[22]=E,h[23]=v,h[24]=p):p=h[24],p}function g({inputOnChange:e,inputRef:t}){let n=(0,i.H)({inputRef:t,fallbackEventHandler:e});return(0,o.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let r=`${p}${e}`;n(r,[0,0],r.length)},[n,t])}},26875:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},57448:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>y,Tz:()=>S,W5:()=>m,cx:()=>f,r_:()=>b,vn:()=>v,xG:()=>p});var r=n(21728),a=n(51987),i=n(97665),o=n(40458),l=n(94747),s=n(97286),c=n(96379),d=n(96540),u=n(79064);n(2635),n(33592);let m={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},p={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},h=[p.NotFound,p.Unauthorized,p.ServiceUnavailable,p.QuotaExhausted,p.Forbidden,p.RequestFailed],f=256,g=400;function y(e){var t,n;let a,s,c,d,u,f,g,y,v,b,S=(0,r.c)(22),w=(0,i.jE)();S[0]!==w||S[1]!==e?(a=()=>Promise.all(e.map(e=>w.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),S[0]=w,S[1]=e,S[2]=a):a=S[2];let j=a;S[3]!==e?(s=e.map(_),S[3]=e,S[4]=s):s=S[4],S[5]!==s?(c={queries:s},S[5]=s,S[6]=c):c=S[6];let k=(0,o.E)(c);S[7]===Symbol.for("react.memo_cache_sentinel")?(d=["repos-indexing-state"],S[7]=d):d=S[7],S[8]!==e?(u=()=>C(e),S[8]=e,S[9]=u):u=S[9],S[10]!==j||S[11]!==u?(f={mutationKey:d,mutationFn:u,onSuccess:j},S[10]=j,S[11]=u,S[12]=f):f=S[12];let{mutate:R}=(0,l.n)(f);S[13]!==k?(g={requestStatus:0===(n=(t=k.map(x)).map(e=>e.requestStatus)).length?p.Unknown:n.some(e=>h.includes(e))?p.IndexingError:n.every(e=>e===p.CanIndex)?p.CanIndex:(n.every(e=>e===p.Unknown),p.Unknown),code:I(t.map(e=>e.code)),docs:I(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens},S[13]=k,S[14]=g):g=S[14];let E=g,A=E.code===m.Indexing&&E.requestStatus!==p.IndexingError;return S[15]!==j?(y=()=>void j(),S[15]=j,S[16]=y):y=S[16],N(y,1e4*!!A),S[17]!==R?(v=()=>R(),S[17]=R,S[18]=v):v=S[18],S[19]!==E||S[20]!==v?(b=[E,v],S[19]=E,S[20]=v,S[21]=b):b=S[21],b}function x(e){return e.data}function _(e){return{queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:p.Unknown,code:m.Unknown,docs:m.Unknown},staleTime:1/0}}function v(e){let t,n,a,o,c,d,u,h,f,g,y,x=(0,r.c)(23),_=(0,i.jE)();x[0]!==_||x[1]!==e?(t=()=>Promise.resolve(_.invalidateQueries({queryKey:["repo-indexing-state",e]})),x[0]=_,x[1]=e,x[2]=t):t=x[2];let v=t;x[3]!==e?(n=["copilot-chat","repo-indexing-state",e],a=()=>w(e),x[3]=e,x[4]=n,x[5]=a):(n=x[4],a=x[5]),x[6]===Symbol.for("react.memo_cache_sentinel")?(o={requestStatus:p.Unknown,code:m.Unknown,docs:m.Unknown},x[6]=o):o=x[6],x[7]!==n||x[8]!==a?(c={queryKey:n,queryFn:a,placeholderData:o,staleTime:1/0},x[7]=n,x[8]=a,x[9]=c):c=x[9];let b=(0,s.I)(c);x[10]===Symbol.for("react.memo_cache_sentinel")?(d=["repo-indexing-state"],x[10]=d):d=x[10],x[11]!==e?(u=()=>C([e]),x[11]=e,x[12]=u):u=x[12],x[13]!==v||x[14]!==u?(h={mutationKey:d,mutationFn:u,onSuccess:v},x[13]=v,x[14]=u,x[15]=h):h=x[15];let{mutate:S}=(0,l.n)(h),j=b.data,I=j.code===m.Indexing&&j.requestStatus!==p.IndexingError;return x[16]!==v?(f=()=>void v(),x[16]=v,x[17]=f):f=x[17],N(f,1e4*!!I),x[18]!==S?(g=()=>S(),x[18]=S,x[19]=g):g=x[19],x[20]!==j||x[21]!==g?(y=[j,g],x[20]=j,x[21]=g,x[22]=y):y=x[22],y}function b(e){let t,n=(0,r.c)(2);n[0]!==e?(t={queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>j(e),staleTime:1/0},n[0]=e,n[1]=t):t=n[1];let a=(0,s.I)(t);return!a.isError&&!!a.data?.canChat}function S(){let e=u.Jt.getPanelHeight(),t=u.Jt.getPanelWidth(),n=(0,d.useRef)(null),r=(0,d.useRef)(e),a=(0,d.useRef)(e),i=(0,d.useRef)(null),o=(0,d.useRef)(t),l=(0,d.useRef)(t),[s,c]=(0,d.useState)(e),[m,p]=(0,d.useState)(t),h=(0,d.useRef)(0);(0,d.useEffect)(()=>{h.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,f),window.innerHeight-h.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*h.current),_=(0,d.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(r.current+t);c(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(o.current+t);p(n),l.current=n}},[]),v=(0,d.useCallback)(()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v),null!==n.current&&(u.Jt.setPanelHeight(a.current),n.current=null),null!==i.current&&(u.Jt.setPanelWidth(l.current),i.current=null)},[_]),b=(0,d.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=s),t&&(i.current=e.clientX,o.current=m),window.addEventListener("mousemove",_),window.addEventListener("mouseup",v))},[s,m,_,v]),S=(0,d.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(s+4);c(t),u.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(s-4);c(t),u.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);p(t),u.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);p(t),u.Jt.setPanelWidth(t),e.preventDefault()}},[s,m]);return{panelWidth:m,panelHeight:s,startResize:b,onResizerKeyDown:S}}async function w(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,a.kt)()}});if(!t.ok)return{requestStatus:p.RequestFailed,code:m.Unknown,docs:m.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function C(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,c.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function j(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,a.kt)()}});return t.ok?await t.json():{canChat:!1}}function I(e){return e.every(e=>e===m.Indexed)?m.Indexed:e.every(e=>e===m.Unindexed)?m.Unindexed:e.some(e=>e===m.Indexing)?m.Indexing:e.some(e=>e===m.Unindexed)?m.PartiallyIndexed:m.Unknown}function N(e,t){let n,a,i,o,l=(0,r.c)(6),s=(0,d.useRef)(void 0),c=(0,d.useRef)(e);return l[0]!==e?(n=()=>{c.current=e},a=[e],l[0]=e,l[1]=n,l[2]=a):(n=l[1],a=l[2]),(0,d.useEffect)(n,a),l[3]!==t?(i=()=>{if(t>0)return s.current=window.setInterval(()=>c.current(),t),()=>window.clearInterval(s.current)},o=[t],l[3]=t,l[4]=i,l[5]=o):(i=l[4],o=l[5]),(0,d.useEffect)(i,o),s}},60905:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(50467),a=n(53419),i=n(25641),o=n(35247),l=n(76166),s=n(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,r]=e.reduce(([e,n],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],n]:[e,[...n,r]],[[],[]]);return[n,r]}static getAttachmentLimit(){return o.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let n=crypto.randomUUID(),r=new s.N(n,e,t);return{id:n,attachment:r,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,r=!1){if(0===e.length)return[];let s=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=o.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&!u)try{c=(s=await this.manager.createThread({customCopilotId:n,preventThreadSelection:r})).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,p=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>p){let e=o.W.attachMultipleImages?`You can add up to ${p} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,l.d)("file_limit_reached"),[]}let h=[],f=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,l.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,l.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,l.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,i.Vc)(n.name);this.manager.addReference(r,"image-attacher"),0===f.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),f.push({file:n,placeholder:r,reference:e})}return await Promise.all(f.map(async({file:e,placeholder:n,reference:r})=>{try{s&&await r.attachment.prefetch(),this.manager.setImageAttachmentUploaded(r.id,r.attachment),this.manager.replaceReference(n,r),(0,a.BI)("dotcom_chat.vision.image_added",{uploadType:t}),h.push(r)}catch(r){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,l.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,l.d)(r.name,{message:r.message}),"GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),r&&n&&s&&this.manager.setPendingThreadId(s.id,n),h}constructor(e,t){(0,r._)(this,"state",void 0),(0,r._)(this,"manager",void 0),this.state=e,this.manager=t}}},76166:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(53419);function a(e,t){(0,r.BI)("dotcom_chat.vision.error",{type:e,...t})}},72439:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>l});var r=n(50467),a=n(53419),i=n(25641),o=n(23967);let l="application/x.clipboard",s=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(o.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,r=0;for(let a=0;a<t;a++){let t=e.charCodeAt(a);0===t?n++:t>127&&r++}let a=n/t,i=r/t;return a<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),r=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,r)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,a.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let a=await e.text();if(!CopilotTextAttacher.isPlainText(a))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)r=this.makeReferenceSync(a,n),this.manager.addReference(r,"text-attacher");else{let n=(0,i.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0});try{r=await this.makeReference(e,t),this.manager.replaceReference(n,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=r.ok?s.exec(r.payload)?.[1]:null;return i?(0,a.BI)("copilot.generate_pasted_file_name.success"):(0,a.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,r=n?e.substring(0,t):e,a=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${a}`);)i++;return`${r}${i}${a}`}defaultFileName(e){return e===l?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,r._)(this,"manager",void 0),(0,r._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,r._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},79216:(e,t,n)=>{n.d(t,{Q:()=>o});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,a=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},o={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,r,a,...o]=t.pathname.split("/"),l=o.join("/"),s=i.fromUrlType(a);if(n&&r&&s)return{repo:`${n}/${r}`,type:l?s:"repository",id:l}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=a.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>o.stringify(e)===o.stringify(t),refersTo(e,t){let n=o.for(t);return null!==n&&o.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},97949:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(99054),a=n(25641),i=n(79216);let o=function({references:e,agents:t}){this.parser=function(n){let o=n.split(/(\s+)/),l=[];for(let[n,s]of o.entries()){let o=0===n&&r.qj.exec(s)?.groups?.slug,c=o&&t.find(e=>e.slug===o);if(c){l.push({type:"agent-mention",value:s,data:{mentionedAgent:c}});continue}let d=i.Q.parse(s),u=d&&e?.find(e=>i.Q.refersTo(d,e));if(d){l.push({type:"reference-mention",value:s,data:{mentionedReferenceId:u&&(0,a.Vb)(u),referenceMention:d}});continue}let m=l.at(-1);m?.type==="text"?m.value+=s:l.push({type:"text",value:s})}return{type:"root",children:l}}}},16378:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>o});var r=n(47970),a=n(99054);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function o(e){return a.qj.test(e.split(/\s/)[0]??"")}},84646:(e,t,n)=>{n.d(t,{$7:()=>u,AV:()=>y,Ao:()=>h,BV:()=>g,OW:()=>CopilotSpaceSSOError,Tx:()=>f,e9:()=>m,i9:()=>CopilotSpaceNotFoundError,jS:()=>p});var r=n(50467),a=n(97665),i=n(94747),o=n(97286),l=n(72011),s=n(33592),c=n(96540),d=n(2635);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,r._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function u(){let e=(0,a.jE)();return(0,i.n)({mutationFn:async e=>{let t=await (0,l.ee)(e);if(!t.ok)throw Error(t.error);return{status:t.status,ok:!0,payload:t.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:l.O6})}})}function m(e){let t=(0,s.b)(),{data:n}=p(e,{throwOnError:!1});(0,c.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function p(e,t={}){return(0,o.I)({queryKey:l.O6,queryFn:l.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function h(e){return(0,o.I)({queryKey:(0,l.dp)(e),queryFn:async()=>{let t=await (0,l.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function f(e,t){return(0,o.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,l.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function g(){return(0,d.A3)("customCopilotsEnabled")}function y(){let e=function(){let e=(0,d.A3)("customCopilots");return e?.length??0}(),[t,n]=(0,c.useState)(null),r=(0,c.useMemo)(()=>`New Space ${e+1}`,[e]);return(0,c.useEffect)(()=>{null===t&&n(r)},[r,t]),{name:t||"",setName:n,defaultName:r}}},17485:(e,t,n)=>{n.d(t,{C:()=>o});var r=n(25536),a=n(14521),i=n(96540);function o(){let e=(0,a.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:o}=(0,r.O)(),l=!!o||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let s=t||e,c=(0,i.useCallback)(e=>{l||n({id:e.id,owner:e.owner})},[n,l]),d=(0,i.useCallback)(()=>{l||n(void 0)},[n,l]);return{activeCopilotSpaceId:s,readOnly:l,handleSpaceSelect:c,clearSpaceSelection:d}}},51563:(e,t,n)=>{n.d(t,{$:()=>u});var r=n(33592),a=n(23657),i=n(72011),o=n(69599),l=n(97665),s=n(94747),c=n(96379),d=n(31971);let u=e=>{let t=(0,r.b)(),n=(0,l.jE)(),u=(0,o.G7)("copilot_spaces_upsert_reload_in_background"),{mutateAsync:m,...p}=(0,s.n)({onSuccess:async()=>{if(!u)return e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)}),n.invalidateQueries({queryKey:i.O6});n.invalidateQueries({queryKey:i.O6}),e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async n=>{let r=e?(0,a.fn)(e):"/custom_copilots",i=e?"PUT":"POST",o={custom_copilot:{owner_id:n.ownerId,owner_type:n.ownerType,name:n.name,icon_type:n.iconType,icon_color:n.iconColor,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,d.M)(e)})),visibility:n.visibility,base_role:n.baseRole}},l=await (0,c.lS)(r,{method:i,body:o}),s=await l.json();if(!l.ok)throw s.errorMessages;return t.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s}});return{upsertCopilotSpace:m,...p}}},97564:(e,t,n)=>{n.d(t,{V:()=>a});var r=n(96379);async function a(e){let t=await (0,r.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},72011:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>l,dp:()=>s,ee:()=>u});var r=n(25641),a=n(23657),i=n(96379);let o="/github-copilot/chat",l=["copilot-chat","custom-copilots"];function s(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${o}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${r.nN[e.status]||r.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,a=`${o}/custom_copilots/${t}/${n}`,l=await (0,i.lS)(a);if(!l.ok)return{status:l.status,ok:!1,error:r.nN[l.status]||r.DW};let s=await l.json();return{status:l.status,ok:!0,payload:s}}async function u(e){let t=await (0,i.lS)((0,a.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,a.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},31971:(e,t,n)=>{n.d(t,{M:()=>r});function r(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},65787:(e,t,n)=>{n.d(t,{U:()=>i});let r=e=>{let t=getComputedStyle(e,null);return["overflow","overflow-y","overflow-x"].some(e=>{let n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},a=(e,t)=>e&&null!==e.parentNode?a(e.parentNode,t.concat([e])):t;function i(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of a(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&r(t))return t;return document.scrollingElement||document.documentElement}}},60429:(e,t,n)=>{n.d(t,{A:()=>o});let r=n.p+"jetbrains-e16495e63a33.png",a=n.p+"neovim-3301f23c4307.png",i=n.p+"vscode-380056900de8.png",o={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:i,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:r,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:a,name:"Neovim",eventName:"NEOVIM"}}},51407:(e,t,n)=>{n.d(t,{Y:()=>r});function r(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},86917:(e,t,n)=>{n.d(t,{R:()=>DeferredRegistry});var r=n(35750),a=n(18150),i=n(51407),o=new WeakMap;let DeferredRegistry=class DeferredRegistry{register(e,t){let n=(0,r._)(this,o).get(e);if(n)n.resolve(t);else{let n=(0,i.Y)();n.resolve(t),(0,r._)(this,o).set(e,n)}}getRegistration(e){let t=(0,r._)(this,o).get(e);if(t)return t;let n=(0,i.Y)();return(0,r._)(this,o).set(e,n),n}constructor(){(0,a._)(this,o,{writable:!0,value:new Map})}}},7820:(e,t,n)=>{n.d(t,{z:()=>r});let r={"Workers not ready":"Alloy is warming its workers. This is expected during deploys and should resolve shortly."}},83952:(e,t,n)=>{let r;n.d(t,{A:()=>u});var a=n(21728),i=n(71315),o=n(96540);function l(e){return{colorMode:function(e){switch(e){case"light":return"day";case"dark":return"night";default:return"auto"}}(e.colorMode),dayScheme:e.lightTheme,nightScheme:e.darkTheme}}let s=new Set(["light_colorblind_high_contrast","light_tritanopia_high_contrast","dark_colorblind_high_contrast","dark_tritanopia_high_contrast","dark_dimmed_high_contrast"]),c={light_colorblind_high_contrast:"light_high_contrast",light_tritanopia_high_contrast:"light_high_contrast",dark_colorblind_high_contrast:"dark_high_contrast",dark_tritanopia_high_contrast:"dark_high_contrast",dark_dimmed_high_contrast:"dark_high_contrast"};function d(e){var t;return void 0!==e&&(t=e,s.has(t))?c[e]:e}let u=i.XC?function(){let e,t,n,r,s,c,u=(0,a.c)(11),{documentElement:m}=i.XC;u[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>l(m.dataset),u[0]=e):e=u[0];let[p,h]=(0,o.useState)(e);return u[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=new MutationObserver(()=>h(l(m.dataset)));return e.observe(m,{attributes:!0,attributeFilter:["data-color-mode","data-light-theme","data-dark-theme"]}),()=>e.disconnect()},n=[m],u[1]=t,u[2]=n):(t=u[1],n=u[2]),(0,o.useEffect)(t,n),u[3]!==p.dayScheme?(r=d(p.dayScheme),u[3]=p.dayScheme,u[4]=r):r=u[4],u[5]!==p.nightScheme?(s=d(p.nightScheme),u[5]=p.nightScheme,u[6]=s):s=u[6],u[7]!==p||u[8]!==r||u[9]!==s?(c={...p,dayScheme:r,nightScheme:s},u[7]=p,u[8]=r,u[9]=s,u[10]=c):c=u[10],c}:function(){return l(r||{})}},28600:(e,t,n)=>{n.d(t,{A:()=>l});let{getItem:r,setItem:a,removeItem:i}=(0,n(82075).A)("localStorage"),o="REACT_PROFILING_ENABLED",l={enable:()=>a(o,"true"),disable:()=>i(o),isEnabled:()=>!!r(o)}},34535:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(96540);function a({focusRowRef:e,mouseRowRef:t}){let[n,a]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),n}},67960:(e,t,n)=>{n.d(t,{Q:()=>f});var r=n(74848),a=n(22303),i=n(33592),o=n(96540),l=n(96379),s=n(6011),c=n(46642),d=n(38411),u=n(69599),m=n(85788);let p=["Find and fix bugs or anti-patterns","Improve performance of data loading","Find and refactor duplicated code","Generate or update developer documentation","Find 5 TODOs in the codebase and fix them","Detect unused code or dead files in the codebase","Identify and suggest improvements to slow or inefficient code","Suggest more descriptive variable and function names","Add missing error handling and input validation","Convert inline styles to CSS classes or styled components","Add a light/dark mode switcher","Add client-side form validation for email inputs","Add keyboard shortcuts for common actions","Add auto-save functionality to forms","Create a print-friendly view for reports","Add confirmation dialogs for destructive actions","Implement undo/redo functionality for text editors","Add drag and drop upload and progress meters to file inputs","Implement read/unread status for notifications","Add column sorting to data tables"];async function h(e=""){let t=await (0,l.lS)("/copilot/agent-sessions/repositories");if(t.ok){let n=(await t.json()).repositories.map(e=>({id:e.id,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility}));if(e.trim()){let t=e.toLowerCase();n=n.filter(e=>e.nameWithOwner.toLowerCase().includes(t)||e.nameOnly.toLowerCase().includes(t))}return n}return[]}function f({handleUserSubmit:e,initialRepo:t,hideRepoSelector:n}){let f=(0,i.b)(),[g,y]=(0,o.useState)(null),[x,_]=(0,o.useState)(!0),[v,b]=(0,o.useState)(!1),[S]=(0,o.useState)(()=>p[Math.floor(Math.random()*p.length)]),w=(0,u.G7)("copilot_immersive_agent_branch_selection"),[C]=(0,m.ok)(),j=C.get("branch"),[I,N]=(0,o.useState)(""),k=t&&`${t.ownerLogin}/${t.name}`,R=C.get("repo")??k;(0,o.useEffect)(()=>{if(t){let e=`${t.ownerLogin}/${t.name}`;y({id:t.id,owner:t.ownerLogin,name:e,nameOnly:t.name,nameWithOwner:e,enabled:!0,defaultBranch:t.defaultBranch,private:t.private});let n=j??t?.defaultBranch;if(n)N(n);else{let t=async()=>{try{let t=await (0,l.lS)(`/_filter/repositories?q=${e}`);if(!t.ok)return;let n=(await t.json()).repositories.find(t=>t.nameWithOwner===e);n&&N(n.defaultBranch)}finally{b(!1)}};b(!0),t()}f.clearCurrentReferences(),_(!1)}else(async()=>{try{let e=await h(),t=R?e.find(e=>e.nameWithOwner===R&&e.enabled):void 0;t||(t=e.find(e=>e.enabled)),t&&(y(t),N(j??t.defaultBranch))}catch{}finally{_(!1)}})()},[]);let E=(0,o.useCallback)(async t=>e(t,g,I),[e,g,I]);return(0,r.jsx)(a.V,{hideAttachmentButton:!0,placeholder:S,size:"large",onSubmit:E,submitButtonLabel:"Start task",hideShadow:!0,extraToolbarLeft:(0,r.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[x?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.f,{height:"32px",width:"130px"})}):n?null:(0,r.jsx)(c.P,{repositoryLoader:h,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&(y(e),N(e.defaultBranch))},currentSelection:g||void 0,buttonText:g?.nameWithOwner||"Select repository",width:"medium",additionalButtonProps:{"aria-label":`Repository: ${g?.nameWithOwner||"Select repository"}`}}),w&&(g&&!v?(0,r.jsx)(d.PI,{cacheKey:"agent-sessions-ref-selector",canCreate:!1,currentCommitish:I,defaultBranch:g.defaultBranch,owner:g.owner,repo:g.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,onSelectItem:e=>{N(e)}}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.f,{height:"32px",width:"100px"})}))]}),submitDisabled:!g||!I})}try{f.displayName||(f.displayName="NewTaskChatInput")}catch{}},5106:(e,t,n)=>{n.d(t,{eB:()=>b,ZL:()=>v,TO:()=>_});var r,a=n(74848),i=n(21728),o=n(80679),l=n(89169),s=n(38621);let c={description:"TaskListItem-module__description--UXlQ1",iconTransition:"TaskListItem-module__iconTransition--qlkQV",fadeOut:"TaskListItem-module__fadeOut--HZHZN",fadeText:"TaskListItem-module__fadeText--S_0MH",entering:"TaskListItem-module__entering--mxeSa",exiting:"TaskListItem-module__exiting--DO7Ic"};var d=n(96540),u=n(67154),m=n(30388),p=n(82595),h=n(84511);let f={animatedDot:"WithAnimatedEllipsis-module__animatedDot--Dbgsr"},g=e=>{let t,n,r,o=(0,i.c)(4),{children:l}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("style",{children:`
    @keyframes dot1 {
      0%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot2 {
      0% { opacity: 0; }
      15% { opacity: 0; }
      25%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot3 {
      0% { opacity: 0; }
      40% { opacity: 0; }
      50%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
  `}),n=[1,2,3].map(y),o[0]=t,o[1]=n):(t=o[0],n=o[1]),o[2]!==l?(r=(0,a.jsxs)(a.Fragment,{children:[l,t,n]}),o[2]=l,o[3]=r):r=o[3],r};try{g.displayName||(g.displayName="WithAnimatedEllipsis")}catch{}function y(e){return(0,a.jsx)(h.A,{sx:{animationName:`dot${e}`},className:f.animatedDot,children:"."},`dot${e}`)}let x=e=>{let t,n,r,o=(0,i.c)(7),{text:l}=e,[s,u]=(0,d.useState)(null),[m,p]=(0,d.useState)("none");o[0]!==s||o[1]!==l?(t=()=>{if(null===s)return void u(l);if(l!==s){p("exiting");let e=setTimeout(()=>{u(l),p("entering")},400);return()=>clearTimeout(e)}},n=[l,s],o[0]=s,o[1]=l,o[2]=t,o[3]=n):(t=o[2],n=o[3]),(0,d.useEffect)(t,n);let h=`${c.fadeText} ${"entering"===m?c.entering:"exiting"===m?c.exiting:null}`;return o[4]!==s||o[5]!==h?(r=(0,a.jsx)("span",{className:h,children:s}),o[4]=s,o[5]=h,o[6]=r):r=o[6],r};function _(e,t,n){if(t)return{icon:s.GitMergeQueueIcon,color:"var(--fgColor-attention)","data-testid":"icon-git-merge-queue"};if("queued"===n)return{icon:s.ClockIcon,color:"var(--fgColor-attention)","data-testid":"icon-clock"};if("open"===e){if("waiting_for_user"===n||"completed"===n)return{icon:s.CheckCircleFillIcon,color:"var(--fgColor-success)","data-testid":"icon-check-circle-fill"};if("failed"===n||"timed_out"===n)return{icon:s.StopIcon,color:"var(--fgColor-danger)","data-testid":"icon-stop"};if("in_progress"===n)return{icon:()=>(0,a.jsx)(o.gX,{animated:!0}),color:"attention.fg","data-testid":"icon-spinning-circle"};if("idle"===n)return{icon:s.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-dot"};if("cancelled"===n)return{icon:s.SkipIcon,color:"var(--fgColor-muted)","data-testid":"icon-skip"}}return"merged"===e?{icon:s.GitMergeIcon,color:"var(--fgColor-done)","data-testid":"icon-git-merge"}:"closed"===e?{icon:s.GitPullRequestClosedIcon,color:"var(--fgColor-danger)","data-testid":"icon-skip"}:{icon:s.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-idle"}}function v(e){let t,n,r,o,s,h,f,g,y,v,b,S,w=(0,i.c)(32),{state:C,revisionCount:j,startedAt:I,prState:N,prUrl:k,prTitle:R,prNwo:E,prNumber:A,prInMergeQueue:T}=e,[L,P]=(0,d.useState)(null),[F,O]=(0,d.useState)(!1);w[0]!==T||w[1]!==N||w[2]!==C?(n="merged"===N?"Merged":"closed"===N?"Closed":T?"Queued to merge":C&&(0,u.w)(C)||"",w[0]=T,w[1]=N,w[2]=C,w[3]=n):n=w[3],t=n,w[4]!==T||w[5]!==N||w[6]!==C?(o=_(N,T,C),w[4]=T,w[5]=N,w[6]=C,w[7]=o):o=w[7],r=o,w[8]!==L||w[9]!==r?(s=()=>{if(!L)return void P(r);if(L.icon!==r.icon){O(!0);let e=setTimeout(()=>{P(r),O(!1)},300);return()=>clearTimeout(e)}},h=[r,L],w[8]=L,w[9]=r,w[10]=s,w[11]=h):(s=w[10],h=w[11]),(0,d.useEffect)(s,h);let D=j>0?`${j} revision${j>1?"s":""} \xb7 `:null,M=`${c.iconTransition} ${F?c.fadeOut:""}`;return w[12]!==r||w[13]!==M?(f=(0,a.jsx)(m.qJ.Item.LeadingVisual,{children:(0,a.jsx)(p.I,{...r,className:M})}),w[12]=r,w[13]=M,w[14]=f):f=w[14],w[15]!==R?(g=(0,a.jsx)(m.qJ.Item.Title,{children:R}),w[15]=R,w[16]=g):g=w[16],w[17]!==I?(y=(0,a.jsx)(l.A,{format:"micro",datetime:I}),w[17]=I,w[18]=y):y=w[18],w[19]!==t?(v=(0,a.jsx)(x,{text:t}),w[19]=t,w[20]=v):v=w[20],w[21]!==A||w[22]!==E||w[23]!==D||w[24]!==y||w[25]!==v?(b=(0,a.jsx)(m.qJ.Item.Description,{children:(0,a.jsxs)("span",{className:c.description,children:[E,"#",A," \xb7 started ",y," ago \xb7"," ",D,v]})}),w[21]=A,w[22]=E,w[23]=D,w[24]=y,w[25]=v,w[26]=b):b=w[26],w[27]!==k||w[28]!==b||w[29]!==f||w[30]!==g?(S=(0,a.jsxs)(m.qJ.Item,{href:k,isExternalLink:!0,children:[f,g,b]}),w[27]=k,w[28]=b,w[29]=f,w[30]=g,w[31]=S):S=w[31],S}function b(e){let t,n,r,o,l=(0,i.c)(7),{repositoryNwo:d}=e,u=`Creating task in ${d}`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(m.qJ.Item.LeadingVisual,{children:(0,a.jsx)(p.I,{icon:s.DotFillIcon,color:"var(--fgColor-attention)"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(m.qJ.Item.Title,{children:(0,a.jsx)(g,{children:"Creating task"})}),l[1]=n):n=l[1],l[2]!==d?(r=(0,a.jsxs)(m.qJ.Item.Description,{children:[(0,a.jsx)("span",{className:c.description,children:d})," \xb7 Initializing pull request\u2026"]}),l[2]=d,l[3]=r):r=l[3],l[4]!==u||l[5]!==r?(o=(0,a.jsxs)(m.qJ.Item,{"aria-label":u,children:[t,n,r]}),l[4]=u,l[5]=r,l[6]=o):o=l[6],o}try{x.displayName||(x.displayName="FadeText")}catch{}try{v.displayName||(v.displayName="TaskListItem")}catch{}try{(r=function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(r.displayName="LoadingTaskListItem")}catch{}try{b.displayName||(b.displayName="OptimisticTaskListItem")}catch{}},97189:(e,t,n)=>{n.d(t,{Fn:()=>s,eS:()=>l});var r=n(74848),a=n(21728),i=n(96540);let o=(0,i.createContext)(void 0);function l(){let e=(0,i.useContext)(o);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function s(e){let t,n,l,s,d,u=(0,a.c)(7),{children:m}=e,[p,h]=(0,i.useState)(0);return u[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>h(c),l=()=>h(0),u[0]=n,u[1]=l):(n=u[0],l=u[1]),u[2]!==p?(s={numberOf401s:p,increment401s:n,reset401s:l},u[2]=p,u[3]=s):s=u[3],t=s,u[4]!==m||u[5]!==t?(d=(0,r.jsx)(o.Provider,{value:t,children:m}),u[4]=m,u[5]=t,u[6]=d):d=u[6],d}function c(e){return e+1}try{o.displayName||(o.displayName="ConsecutiveCAPI401sContext")}catch{}try{s.displayName||(s.displayName="ConsecutiveCAPI401sProvider")}catch{}},42455:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(97286),a=n(51120),i=n(97189),o=n(34295),l=n(96540);function s(...e){let t=(0,r.I)(...e),{numberOf401s:n,increment401s:c,reset401s:d}=(0,i.eS)(),{isError:u,isLoading:m,error:p}=t;return(0,l.useEffect)(()=>{u&&p instanceof a.j?c():u||m?n>5&&(new o.l().removeLocalStorageAuthToken(),d()):d()},[u,m,p,c,d,n]),t}},47865:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(21728),a=n(97665),i=n(94747),o=n(69599),l=n(51120),s=n(55899),c=n(73694);function d(e){let t,n,l,d,m,p,h,f,g,y=(0,r.c)(22),{apiURL:x,onError:_}=e,v=(0,a.jE)();y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("copilot_immersive_agent_branch_selection"),y[0]=t):t=y[0];let b=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=["createTask"],y[1]=n):n=y[1],y[2]!==v?(l=async e=>{await v.cancelQueries({queryKey:c.Z});let t=v.getQueryData(c.Z)??[],n=function({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,eventType:a}){return{resource_type:"pull",resource_id:-1,session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:a,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r}}(e);return v.setQueryData(c.Z,[n,...t]),{previousTasks:t}},y[2]=v,y[3]=l):l=y[3],y[4]!==x?(d=async e=>{if(!(await u({...e,apiURL:x,isBranchSelectionEnabled:b,title:e.problemStatement})).ok)throw Error(`Failed to create task: ${e.clientGeneratedId}`);return e.clientGeneratedId},y[4]=x,y[5]=d):d=y[5],y[6]!==_||y[7]!==v?(m=(e,t)=>{let n=(v.getQueryData(c.Z)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);v.setQueryData(c.Z,n),_?.(e,t)},y[6]=_,y[7]=v,y[8]=m):m=y[8],y[9]!==v?(p=()=>{v.invalidateQueries({queryKey:c.Z})},y[9]=v,y[10]=p):p=y[10],y[11]!==l||y[12]!==d||y[13]!==m||y[14]!==p?(h={mutationKey:n,onMutate:l,mutationFn:d,onError:m,onSuccess:p},y[11]=l,y[12]=d,y[13]=m,y[14]=p,y[15]=h):h=y[15];let S=(0,i.n)(h);y[16]!==S?(f=e=>{let t=(0,s.u)();S.mutate({...e,clientGeneratedId:t})},y[16]=S,y[17]=f):f=y[17];let w=f;return y[18]!==w||y[19]!==S.error||y[20]!==S.isPending?(g={createTask:w,isCreating:S.isPending,createError:S.error},y[18]=w,y[19]=S.error,y[20]=S.isPending,y[21]=g):g=y[21],g}async function u({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,apiURL:a,isBranchSelectionEnabled:i,eventType:o,title:s}){let c=`/agents/swe/jobs/${t}`;return await (0,l.I)({apiURL:a,path:c,method:"POST",body:{problem_statement:n,pull_request:{...i&&{base_ref:`refs/heads/${r}`},...s&&{title:s}},event_identifiers:[e],event_type:o}})}},73694:(e,t,n)=>{n.d(t,{Z:()=>c,s:()=>d});var r=n(21728),a=n(97665),i=n(42455),o=n(51120),l=n(96540),s=n(97286);let c=["agent-tasks"];function d(e){let t,n,d,h,f,g,y,x,_=(0,r.c)(24),{apiURL:v,sessionsPollingInterval:b,initialTasks:S,initialPullRequestsMap:w}=e,C=void 0===b?3e3:b,j=(0,a.jE)();_[0]!==v||_[1]!==j?(t=async()=>{let e=await (0,o.I)({apiURL:v,path:"/agents/sessions"}),t=function(e){let t=new Map;for(let n of e){let e="0001-01-01T00:00:00Z"!==n.completed_at&&n.completed_at?n.completed_at:n.created_at,r=t.get(n.resource_id.toString());r?(r.session_count+=1,new Date(e)>new Date(r.latest_session_updated_at)&&(r.latest_session_updated_at=e,r.latest_session_state=n.state)):t.set(n.resource_id.toString(),{resource_type:n.resource_type,resource_id:n.resource_id,session_count:1,latest_session_updated_at:e,latest_session_state:n.state,event_identifiers:n.event_identifiers})}return Array.from(t.values()).sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}((await e.json()).sessions),n=(j.getQueryData(c)||[]).filter(p),r=t.map(e=>{let t=n.find(t=>e.event_identifiers?.includes(t.clientGeneratedId));return{...e,isOptimistic:!!t,...t&&{problemStatement:t.problemStatement,nwo:t.nwo,baseRef:t.baseRef,clientGeneratedId:t.clientGeneratedId}}}),a=n.filter(e=>!r.some(t=>t.event_identifiers?.includes(e.clientGeneratedId)));return[...r,...a].sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())},_[0]=v,_[1]=j,_[2]=t):t=_[2],_[3]!==S||_[4]!==C||_[5]!==t?(n={queryKey:c,queryFn:t,initialData:S,refetchInterval:C,refetchIntervalInBackground:!1},_[3]=S,_[4]=C,_[5]=t,_[6]=n):n=_[6];let I=(0,i.b)(n);_[7]!==I.data?(h=I.data||[],_[7]=I.data,_[8]=h):h=_[8],d=h,_[9]!==d?(f=d.filter(m),_[9]=d,_[10]=f):f=_[10];let N=f;_[11]!==w||_[12]!==C||_[13]!==N?(g={tasks:N,sessionsPollingInterval:C,initialPullRequestsMap:w},_[11]=w,_[12]=C,_[13]=N,_[14]=g):g=_[14];let{data:k,isError:R,isLoading:E}=function({tasks:e,sessionsPollingInterval:t=3e3,initialPullRequestsMap:n={}}){let r=Array.from(new Set(e?e.map(e=>e.resource_id):[])).sort((e,t)=>Number(e)-Number(t)).join(","),a=(0,l.useRef)(n),i=(0,s.I)({queryKey:["agent-sessions-pull-requests",r],queryFn:async()=>{let e=await fetch(`/copilot/agent-sessions/pull-requests?pull_request_ids=${encodeURIComponent(r)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Failed to fetch pull requests");return(await e.json()).pull_requests},refetchInterval:t,refetchIntervalInBackground:!1,enabled:r.length>0});i.data&&(a.current={...a.current,...i.data});let o=(0,l.useMemo)(()=>a.current,[i.data]);return{...i,data:o}}(g);if(_[15]!==d||_[16]!==k){let e;_[18]!==k?(e=e=>{if(void 0===e.resource_id)return e;let t=k[e.resource_id];return t?{...e,isOptimistic:!1,pull:t}:{...e,pull:void 0}},_[18]=k,_[19]=e):e=_[19],y=d.map(e).filter(u),_[15]=d,_[16]=k,_[17]=y}else y=_[17];let A=y,T=I.isLoading&&!I.data||E&&!w,L=I.isError||R;return _[20]!==L||_[21]!==T||_[22]!==A?(x={tasks:A,isLoading:T,isError:L},_[20]=L,_[21]=T,_[22]=A,_[23]=x):x=_[23],x}function u(e){return!0===e.isOptimistic||void 0!==e.pull}function m(e){return void 0!==e.resource_id}function p(e){return!0===e.isOptimistic}},37272:(e,t,n)=>{n.d(t,{E:()=>i});var r=n(74848),a=n(64375);function i({children:e}){return(0,a.P)()?(0,r.jsx)(r.Fragment,{children:e}):null}try{i.displayName||(i.displayName="AllShortcutsEnabled")}catch{}},64375:(e,t,n)=>{n.d(t,{$:()=>o,P:()=>l});var r=n(74848),a=n(96540);let i=a.createContext(!0);function o({allShortcutsEnabled:e,children:t}){return(0,r.jsxs)(i.Provider,{value:e,children:[" ",t," "]})}function l(){return a.useContext(i)}try{i.displayName||(i.displayName="AllShortcutsEnabledContext")}catch{}try{o.displayName||(o.displayName="AllShortcutsEnabledProvider")}catch{}},31078:(e,t,n)=>{n.d(t,{Ck:()=>l,JS:()=>o});var r=n(74848),a=n(96540);let i=(0,a.createContext)({query:"",setQuery:()=>void 0});function o(){return(0,a.useContext)(i)}function l({children:e}){let[t,n]=(0,a.useState)(""),o=(0,a.useMemo)(()=>({query:t,setQuery:n}),[n,t]);return(0,r.jsx)(i.Provider,{value:o,children:e})}try{i.displayName||(i.displayName="FileQueryContext")}catch{}try{l.displayName||(l.displayName="FileQueryProvider")}catch{}},53552:(e,t,n)=>{n.d(t,{eu:()=>s,qV:()=>l,sq:()=>c});var r=n(74848),a=n(79634),i=n(96540);let o=i.createContext({});function l({children:e,...t}){return(0,r.jsx)(o.Provider,{value:t,children:e})}function s(){return i.useContext(o)}function c(){return(0,a.X)()}try{o.displayName||(o.displayName="FilesPageInfoContext")}catch{}try{l.displayName||(l.displayName="FilesPageInfoProvider")}catch{}},97793:(e,t,n)=>{n.d(t,{O:()=>h});var r=n(74848),a=n(96379),i=n(38621),o=n(96665),l=n(65029),s=n(24815),c=n(43371),d=n.n(c),u=n(96540);let m={dialogForm:"McpServerDialog-module__dialogForm--pUtNF",underline:"McpServerDialog-module__underline--YKUMk",inputError:"McpServerDialog-module__inputError--Ojb_P",formField:"McpServerDialog-module__formField--rsUqW",hiddenSubmitButton:"McpServerDialog-module__hiddenSubmitButton--KcK0s"},p=(0,r.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),h=({isOpen:e,onClose:t,returnUrl:n,onServerAdded:c,returnFocusRef:h,showSettingsLink:f=!0})=>{let[g,y]=(0,u.useState)(""),[x,_]=(0,u.useState)(""),[v,b]=(0,u.useState)(null),[S,w]=(0,u.useState)(null),C=(0,u.useCallback)(()=>{y(""),_(""),b(null),w(null),t()},[t]),j=async e=>{if(e&&e.preventDefault(),""===g.trim()||""===x.trim()){x.trim()||b("MCP server URL is required"),g.trim()||w("Name is required");return}try{if(b(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),n=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!n.test(e)}catch{return!1}}(x))return void b("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",x.trim()),e.append("name",g.trim()),n&&e.append("return_url",n);let t=await (0,a.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);if("unsupported_server_type"===t.error)e=(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",p,"."]});else if(t.field_errors){for(let[e,n]of Object.entries(t.field_errors)){let t=n.join(", ");"mcp_server_url"===e?b(t):"display_name"===e&&w(t)}return}else t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")||"Client setup failed"===n.trim()?(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",p,"."]}):n||e}}catch{e="Failed to add MCP server"}b(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(C(),c?.(),window.location.assign(i)):(C(),c?.())}catch(e){e instanceof Error?b(e.message):b("An unknown error occurred")}};return e?(0,r.jsx)(o.l,{title:"Add remote MCP",onClose:C,footerButtons:[{buttonType:"default",content:"Cancel",onClick:C},{buttonType:"primary",content:(0,r.jsxs)(r.Fragment,{children:["Connect to MCP",(0,r.jsx)("span",{style:{marginLeft:8},children:(0,r.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{j()}}],returnFocusRef:h,children:(0,r.jsxs)("form",{className:m.dialogForm,onSubmit:j,autoComplete:"on",children:[(0,r.jsxs)(l.A,{required:!0,className:m.formField,children:[(0,r.jsx)(l.A.Label,{children:"Name"}),(0,r.jsx)(s.A,{name:"mcp-server-name",type:"text",value:g,onChange:e=>{y(e.target.value),w(null)},placeholder:"Enter a name for this MCP",className:S?m.inputError:void 0,autoComplete:"on",block:!0}),S&&(0,r.jsx)(l.A.Validation,{variant:"error",children:S})]}),(0,r.jsxs)(l.A,{required:!0,className:m.formField,children:[(0,r.jsx)(l.A.Label,{children:"MCP server URL"}),(0,r.jsx)(s.A,{name:"mcp-url",type:"url",value:x,onChange:e=>{_(e.target.value),b(null)},placeholder:"https://mcp.example.com/sse",className:v?m.inputError:void 0,autoComplete:"on",block:!0}),v&&(0,r.jsx)(l.A.Validation,{variant:"error",children:v})]}),(0,r.jsx)("button",{type:"submit",className:m.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,r.jsxs)("p",{children:["MCP data will be processed by models coming from third-party providers. Always review the permissions required by the MCP and only connect to MCPs you know and trust.",f&&(0,r.jsxs)(r.Fragment,{children:[" ","You can revoke access for the MCP at any time in"," ",(0,r.jsx)("a",{href:"/settings",className:m.underline,children:"your settings"}),"."]})]})]})}):null};try{p.displayName||(p.displayName="MCP_SPEC_LINK")}catch{}try{h.displayName||(h.displayName="McpServerDialog")}catch{}},22303:(e,t,n)=>{n.d(t,{V:()=>t5});var r,a,i=n(74848),o=n(21728),l=n(53419),s=n(85788),c=n(5945),d=n(46309),u=n(12004),m=n(52446),p=n(96540),h=n(82595),f=n(35247),g=n(84646),y=n(2635),x=n(79802),_=n(17485),v=n(25641),b=n(34164);let S={toggleButton:"ToggleButton-module__toggleButton--JlWKX",selected:"ToggleButton-module__selected--fx0LM",icon:"ToggleButton-module__icon--mJLXC",textContent:"ToggleButton-module__textContent--xX6cl"},w=(0,p.forwardRef)((e,t)=>{let n,r,a,l,s,c,d,u,m,p,h,f,g,y,x,_,v,w=(0,o.c)(35);w[0]!==e?({icon:r,isSelected:c,onClick:a,hasMenu:d,isMenuOpen:u,selectedItemLabel:s,children:n,...l}=e,w[0]=e,w[1]=n,w[2]=r,w[3]=a,w[4]=l,w[5]=s,w[6]=c,w[7]=d,w[8]=u):(n=w[1],r=w[2],a=w[3],l=w[4],s=w[5],c=w[6],d=w[7],u=w[8]);let C=void 0!==c&&c,j=void 0!==d&&d,I=void 0!==u&&u;w[9]!==l?(m=Object.keys(l).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=l[t]),e),{}),w[9]=l,w[10]=m):m=w[10];let N=m;w[11]!==j||w[12]!==I||w[13]!==C?(p=()=>j?{"aria-haspopup":"menu","aria-expanded":I}:{"aria-pressed":C},w[11]=j,w[12]=I,w[13]=C,w[14]=p):p=w[14];let k=p;w[15]!==k?(h=k(),w[15]=k,w[16]=h):h=w[16],w[17]!==N||w[18]!==h?(f={...N,...h},w[17]=N,w[18]=h,w[19]=f):f=w[19];let R=f,E=j&&s?s:n;w[20]!==a?(g=e=>{a&&a(e)},w[20]=a,w[21]=g):g=w[21];let A=g,T=C&&S.selected;return w[22]!==T?(y=(0,b.$)(S.toggleButton,T),w[22]=T,w[23]=y):y=w[23],w[24]!==r?(x=!!r&&(0,i.jsx)("span",{className:S.icon,children:r}),w[24]=r,w[25]=x):x=w[25],w[26]!==E?(_=(0,i.jsx)("span",{className:S.textContent,children:E}),w[26]=E,w[27]=_):_=w[27],w[28]!==R||w[29]!==A||w[30]!==t||w[31]!==y||w[32]!==x||w[33]!==_?(v=(0,i.jsxs)("button",{ref:t,type:"button",className:y,onClick:A,...R,children:[x,_]}),w[28]=R,w[29]=A,w[30]=t,w[31]=y,w[32]=x,w[33]=_,w[34]=v):v=w[34],v});w.displayName="ToggleButton";var C=n(37238);function j(){let[e,t]=(0,p.useState)(!1),n=(0,s.Zp)(),{handleSpaceSelect:r,clearSpaceSelection:a,activeCopilotSpaceId:o,readOnly:b}=(0,_.C)(),S=(0,p.useRef)(null),j=(0,p.useRef)(null),[I,N]=(0,p.useState)(!1),k=()=>{f.W.spacesV3UI?N(!0):n(v.QT),(0,l.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:R=[],isLoading:E}=function(){let{threads:e}=(0,y.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,x.O)(e)).filter(e=>null!==e),n=(0,g.jS)(!0),{data:r}=n;if(void 0===r)return n;let a=new Set,i=[...t.map(e=>r.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!a.has(t)&&(a.add(t),!0)}),...[...r].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!a.has(t)})].slice(0,5);return{...n,data:i}}(),{data:A=[],isLoading:T}=(0,g.jS)(!0),L=(0,g.BV)(),P=E||T;if((0,p.useEffect)(()=>{if(P&&e&&S.current)S.current.focus();else if(!P&&e&&j.current){let e=setTimeout(()=>{j.current?.focus()},0);return()=>clearTimeout(e)}},[P,e]),!L||b)return;let F=o?A.find(e=>e.id===o.id&&e.owner===o.owner):void 0,O=F?F.name:"Space",D="260px";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.W,{open:e,onOpenChange:t,children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(w,{icon:(0,i.jsx)(h.I,{icon:"spaces"}),isSelected:!!F,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:O,children:O})}),(0,i.jsx)(c.W.Overlay,{style:R.length>0?{width:D}:{},children:P?(0,i.jsxs)(d.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:D},children:[(0,i.jsx)("div",{ref:S,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,i.jsx)(u.A,{})]}):(0,i.jsx)(m.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:R.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.l.Group,{children:[(0,i.jsx)(m.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),R.map((e,n)=>{let s=!!o&&e.id===o.id&&e.owner===o.owner;return(0,i.jsx)(m.l.Item,{ref:0===n?j:void 0,role:"menuitemradio",onSelect:()=>{o&&e.id===o.id&&e.owner===o.owner?a():(r({id:e.id,owner:e.owner}),(0,l.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:s,"aria-checked":s,children:(0,i.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(m.l.Item,{onSelect:()=>{n(v.VR),(0,l.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:" View all spaces"}),(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(m.l.Item,{onSelect:k,children:"Create a space"})]}):(0,i.jsx)(m.l.Item,{ref:j,onSelect:k,children:"Create your first space"})})})]}),I?(0,i.jsx)(C.D,{closeDialog:()=>{(0,l.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),N(!1)}}):null]})}try{j.displayName||(j.displayName="SpacesSelect")}catch{}var I=n(29731),N=n(83494),k=n(8625),R=n(38621),E=n(65556),A=n(55847),T=n(94747),L=n(96379),P=n(7277),F=n(47970),O=n(33592),D=n(79216),M=n(97949);let B=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,$=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function U(e){let t=await (0,L.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new $;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function q(e){let{itemUrl:t}=e,n=await (0,L.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var z=n(88431),V=n(79064),W=n(72303);let H=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=(({manager:e})=>[{label:"Delete conversation",command:"delete",icon:R.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,W.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,l.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:R.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,W.W)(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,l.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:R.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,l.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}])({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let a=r[0],i=e.substring(a.command.length).trim();return await a.action(i,t),!0};var G=n(46062);function K(e,t,n){if("immersive"===e&&/^\/copilot(\/agents)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var Q=n(26239),J=n(60905),X=n(76166),Z=n(72439),Y=n(23657),ee=n(14521),et=n(99054),en=n(77430);function er(e){let t,n,r,a,s,d,u=(0,o.c)(24),{onSelectPanel:p,onSelectAgent:h}=e,{availableAgents:f,showLimit:g,disabled:y,loading:x}=(0,et.JE)(),_=f&&f.length>0;if(x){let e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(m.l.Item,{disabled:!0,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.MentionIcon,{})}),"Extension"]}),u[0]=e):e=u[0],e}if(y){let e,t,n;return u[1]!==p?(e=()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),p("agents-not-supported")},u[1]=p,u[2]=e):e=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.MentionIcon,{})}),u[3]=t):t=u[3],u[4]!==e?(n=(0,i.jsxs)(m.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),u[4]=e,u[5]=n):n=u[5],n}if(!_){let e,t,n;return u[6]!==p?(e=()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),p("no-agents-available")},u[6]=p,u[7]=e):e=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.MentionIcon,{})}),u[8]=t):t=u[8],u[9]!==e?(n=(0,i.jsxs)(m.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),u[9]=e,u[10]=n):n=u[10],n}if(u[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(c.W.Anchor,{children:(0,i.jsxs)(m.l.Item,{onSelect:ei,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.MentionIcon,{})}),"Extension"]})}),u[11]=t):t=u[11],u[12]!==f||u[13]!==h||u[14]!==g){let e;u[16]!==h||u[17]!==g?(e=e=>(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),h(e)},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(en.r,{src:e.avatarUrl})}),e.name,!g&&(0,i.jsxs)(m.l.Description,{variant:"inline",truncate:!0,children:[et.Z3,e.slug]}),g&&(0,i.jsx)(m.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),u[16]=h,u[17]=g,u[18]=e):e=u[18],n=f.map(e),u[12]=f,u[13]=h,u[14]=g,u[15]=n}else n=u[15];return u[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(m.l.Divider,{}),u[19]=r):r=u[19],u[20]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.TelescopeIcon,{})}),u[20]=a):a=u[20],u[21]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsxs)(m.l.LinkItem,{href:et.bn,onClick:ea,children:[a,"Marketplace",(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(R.LinkExternalIcon,{})})]}),u[21]=s):s=u[21],u[22]!==n?(d=(0,i.jsxs)(c.W,{children:[t,(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsxs)(m.l,{children:[n,r,s]})})]}),u[22]=n,u[23]=d):d=u[23],d}function ea(){(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ei(){(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{er.displayName||(er.displayName="AgentMenu")}catch{}var eo=n(81246),el=n(96665);let es={AgentsDialogsMainContainer:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",dialogContentWrapper:"AgentsDialogs-module__dialogContentWrapper--v7abd",dialogTitle:"AgentsDialogs-module__dialogTitle--tEo3x",dialogDescription:"AgentsDialogs-module__dialogDescription--LPgKm",documentationLinkContainer:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",AgentsDialogsAlternateContainer:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",alertIconContainer:"AgentsDialogs-module__alertIconContainer--jNjdz"};function ec(e){let t,n,r=(0,o.c)(4),{onClose:a,returnFocusRef:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},r[0]=t):t=r[0],r[1]!==a||r[2]!==l?(n=(0,i.jsx)(el.l,{width:"large",title:"Extensions",position:t,onClose:a,returnFocusRef:l,renderBody:ed}),r[1]=a,r[2]=l,r[3]=n):n=r[3],n}function ed(){return(0,i.jsx)("div",{className:es.AgentsDialogsMainContainer,children:(0,i.jsxs)("div",{className:es.dialogContentWrapper,children:[(0,i.jsx)(R.TelescopeIcon,{size:24}),(0,i.jsx)("h3",{className:es.dialogTitle,children:"Chat with your favorite tools and services"}),(0,i.jsx)("p",{className:es.dialogDescription,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,i.jsx)(A.Q,{as:"a",href:et.bn,children:"Browse marketplace"}),(0,i.jsx)("div",{className:es.documentationLinkContainer,children:(0,i.jsx)(eo.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eu(e){let t,n,r,a=(0,o.c)(9),{onClose:l,returnFocusRef:s}=e,c=(0,O.b)(),d=(0,y.Pk)(),u=(0,g.BV)(),m=(0,G.GF)(d.availableModels);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==u||a[2]!==m||a[3]!==c?(n=()=>(0,i.jsx)("div",{className:es.AgentsDialogsAlternateContainer,children:(0,i.jsxs)("div",{className:es.dialogContentWrapper,children:[(0,i.jsx)("div",{className:es.alertIconContainer,children:(0,i.jsx)(R.AlertIcon,{size:24})}),(0,i.jsxs)("h3",{className:es.dialogTitle,children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,i.jsxs)("p",{className:es.dialogDescription,children:["Switch back to the ",m.displayName," model or start a new conversation"]}),(0,i.jsx)(A.Q,{onClick:()=>{c.selectThread(null),c.selectModel(m)},children:"New conversation"})]})}),a[1]=u,a[2]=m,a[3]=c,a[4]=n):n=a[4],a[5]!==l||a[6]!==s||a[7]!==n?(r=(0,i.jsx)(el.l,{width:"large",title:"Extensions",position:t,onClose:l,returnFocusRef:s,renderBody:n}),a[5]=l,a[6]=s,a[7]=n,a[8]=r):r=a[8],r}try{ec.displayName||(ec.displayName="NoAgentsAvailableDialog")}catch{}try{eu.displayName||(eu.displayName="AgentsNotSupportedDialog")}catch{}var em=n(19566),ep=n(97564);function eh(e){let t,n,r,a,l=(0,o.c)(14),{isOpen:s,onClose:c,initialRepo:d,onRepoSelect:u}=e,m=(0,O.b)(),{findFileWorkerPath:h}=(0,y.Pk)(),f=(0,p.useRef)(null);l[0]!==m||l[1]!==c?(t=async e=>{let t=await (0,ep.V)(e.repositoryId),n=(0,v.qS)(t);m.addReference(n,"references-menu"),c()},l[0]=m,l[1]=c,l[2]=t):t=l[2];let g=t;l[3]!==m||l[4]!==c?(n=async e=>{if(0===e.length)return void c();for(let t of e){let e=await (0,ep.V)(t.repositoryId),n=(0,v.Od)(t.filePath,e);m.addReference(n,"references-menu")}c()},l[3]=m,l[4]=c,l[5]=n):n=l[5];let x=n;return s?(l[6]===Symbol.for("react.memo_cache_sentinel")?(r=[],l[6]=r):r=l[6],l[7]!==h||l[8]!==x||l[9]!==g||l[10]!==d||l[11]!==c||l[12]!==u?(a=(0,i.jsx)(em.Q,{formData:r,onCancel:c,onSaveFiles:x,onSaveRepository:g,findFileWorkerPath:h,attachmentButtonRef:f,initialRepo:d,onRepoSelect:u}),l[7]=h,l[8]=x,l[9]=g,l[10]=d,l[11]=c,l[12]=u,l[13]=a):a=l[13],a):null}try{eh.displayName||(eh.displayName="CopilotFilePicker")}catch{}var ef=n(82075),eg=n(87330),ey=n(94016),ex=n(63557),e_=n(75177),ev=n(9745),eb=n(1002),eS=n(30729),ew=n(40961);let eC={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--5fRzV",knowledgeBaseIcon:"KnowledgeSelectPanel-module__knowledgeBaseIcon--peP3C",KnowledgeSelectPanelContainer:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--_RbkD",panelHeader:"KnowledgeSelectPanel-module__panelHeader--kWY60",headerContent:"KnowledgeSelectPanel-module__headerContent--AQ0gC",panelTitle:"KnowledgeSelectPanel-module__panelTitle--oQLU4",emptyStateContainer:"KnowledgeSelectPanel-module__emptyStateContainer--Rk1JI",emptyStateContent:"KnowledgeSelectPanel-module__emptyStateContent--BiaDj",emptyStateMessage:"KnowledgeSelectPanel-module__emptyStateMessage--S8iOa",emptyStateDescription:"KnowledgeSelectPanel-module__emptyStateDescription--d4gqH",emptyStateInstructions:"KnowledgeSelectPanel-module__emptyStateInstructions--pOJKv",actionButtonsContainer:"KnowledgeSelectPanel-module__actionButtonsContainer--NjnfZ",createButton:"KnowledgeSelectPanel-module__createButton--AfP6G",organizationsSection:"KnowledgeSelectPanel-module__organizationsSection--YaCxl",sectionTitle:"KnowledgeSelectPanel-module__sectionTitle--hm4Tw",organizationsList:"KnowledgeSelectPanel-module__organizationsList--UvNcy",organizationLink:"KnowledgeSelectPanel-module__organizationLink--UkWa7",organizationAvatar:"KnowledgeSelectPanel-module__organizationAvatar--igPHI",organizationName:"KnowledgeSelectPanel-module__organizationName--V_3Jw",ssoNotice:"KnowledgeSelectPanel-module__ssoNotice--EKDTO"},ej=(0,p.forwardRef)(function(e,t){let n,r,a,l,s,c=(0,o.c)(12);c[0]!==e?({open:r,setOpen:a,...n}=e,c[0]=e,c[1]=n,c[2]=r,c[3]=a):(n=c[1],r=c[2],a=c[3]);let d=!!r||void 0;return c[4]!==r||c[5]!==a?(l=()=>a(!r),c[4]=r,c[5]=a,c[6]=l):l=c[6],c[7]!==n||c[8]!==t||c[9]!==d||c[10]!==l?(s=(0,i.jsx)(eg.K,{ref:t,"aria-expanded":d,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:R.BookIcon,onClick:l,variant:"invisible",className:eC.knowledgeBaseIcon,...n}),c[7]=n,c[8]=t,c[9]=d,c[10]=l,c[11]=s):s=c[11],s});function eI({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,anchorRef:a}){let o=(0,y.Pk)(),l=(0,O.b)(),s=(0,ef.A)("localStorage"),{knowledgeBases:c}=o,[d,u]=(0,p.useState)([]),[m,h]=(0,p.useState)(!0),[f,g]=(0,p.useState)(""),x=(0,p.useRef)(null),_=s.getItem("lastUsedKnowledgeBaseId")||"",b=s.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:S}=o;(0,p.useEffect)(()=>{n||g("")},[n]);let w=(0,p.useMemo)(()=>""===f?c:c.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,c]),C=(0,p.useMemo)(()=>w.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[w]),[j,N]=(0,p.useState)(!1),k=m||"pending"===o.knowledgeBasesLoading.state,R=j||"error"===o.knowledgeBasesLoading.state,E=(0,p.useRef)(!1);(0,p.useEffect)(()=>{let e=async()=>{h(!0),await l.fetchKnowledgeBases();let e=await l.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?u(e.payload||[]):N(!0),h(!1)};n&&!E.current&&(E.current=!0,e())},[n,l]);let A=eT();if(o.model?.hasLimitedCapabilities)return(0,i.jsx)(eF,{open:n,setOpen:r,...e});if(!k&&0===c.length)return(0,i.jsx)(eN,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:o.mode,...t});let T=w.sort((e,t)=>e.id===_?-1:+(t.id===_)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),L=[...C].sort((e,t)=>e.org===b?-1:+(t.org===b)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),P=c.filter(e=>S.some(t=>(0,v.P)(t)&&t.id===e.id));return(0,i.jsx)("div",{ref:x,...(0,I.G)("knowledge-select-panel"),children:(0,i.jsx)(ey.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,ew.flushSync)(()=>r(!1)),a.current?.focus()},open:n,renderAnchor:null,anchorRef:a,onOpenChange:r,loading:k,items:T,onFilterChange:g,groupMetadata:L,notice:null!==A?{text:A,variant:"info"}:void 0,message:R?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===C.length?{variant:"empty",title:`No knowledge bases found for \`${f}\``,body:"Try a different search term"}:void 0,...{selected:P,onSelectedChange:e=>(e=>{var t=e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e);let n=t.filter(e=>(0,v.P)(e)&&!S.some(t=>(0,v.P)(t)&&t.id===e.id));for(let e of S.filter(e=>(0,v.P)(e)&&!t.some(t=>t.id===e.id)))l.removeReference(e);for(let e of n)l.addReference((0,v.UU)(e),"docsetMenu")})(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function eN(e){let t,n,r,a,l,s,c,d,u,m,p,h,f,g,y,x,_,v,b,S,w,C,j,N,k=(0,o.c)(53),{administratedCopilotEnterpriseOrganizations:E,anchorRef:A,open:T,setOpen:L}=e,P=eT();k[0]!==A||k[1]!==T||k[2]!==L?(t=A?{anchorRef:A,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(ej,{open:T,setOpen:L,...t})}},k[0]=A,k[1]=T,k[2]=L,k[3]=t):t=k[3];let F=t,O=E?.length===0;k[4]!==O?(n=O?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{},k[4]=O,k[5]=n):n=k[5];let D=n;k[6]!==O?(r=O?{maxHeight:"100%"}:{},k[6]=O,k[7]=r):r=k[7];let M=r;k[8]!==O?(a=O?{height:"100%"}:{},k[8]=O,k[9]=a):a=k[9];let B=a;return k[10]!==L?(l=()=>L(!0),s=()=>L(!1),k[10]=L,k[11]=l,k[12]=s):(l=k[11],s=k[12]),k[13]===Symbol.for("react.memo_cache_sentinel")?(c={anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},k[13]=c):c=k[13],k[14]!==B?(d={...B},k[14]=B,k[15]=d):d=k[15],k[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,I.G)("empty-knowledge-base-picker"),k[16]=u):u=k[16],k[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(ex.A,{id:"knowledge-base-dialog-title",as:"h4",className:eC.panelTitle,children:"Attach a knowledge base"}),k[17]=m):m=k[17],k[18]!==L?(p=(0,i.jsx)("div",{className:eC.panelHeader,children:(0,i.jsxs)("div",{className:eC.headerContent,children:[m,(0,i.jsx)(eg.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:R.XIcon,variant:"invisible",onClick:()=>L(!1)})]})}),k[18]=L,k[19]=p):p=k[19],k[20]!==D?(h={...D},k[20]=D,k[21]=h):h=k[21],k[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(eS.A,{icon:R.BookIcon,size:"medium",className:eC.knowledgeBaseIcon}),k[22]=f):f=k[22],k[23]!==M?(g={...M},k[23]=M,k[24]=g):g=k[24],k[25]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)("span",{className:eC.emptyStateMessage,children:"You don't have any knowledge bases"}),k[25]=y):y=k[25],k[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),k[26]=x):x=k[26],k[27]!==O?(_=O&&(0,i.jsx)("p",{className:eC.emptyStateInstructions,...(0,I.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."}),k[27]=O,k[28]=_):_=k[28],k[29]!==_?(v=(0,i.jsxs)("div",{className:eC.emptyStateDescription,children:[x,_]}),k[29]=_,k[30]=v):v=k[30],k[31]!==E?(b=E.length>0&&(0,i.jsx)(ek,{administratedCopilotEnterpriseOrganizations:E}),k[31]=E,k[32]=b):b=k[32],k[33]!==g||k[34]!==v||k[35]!==b?(S=(0,i.jsxs)(e_.A,{sx:g,className:eC.emptyStateContent,children:[y,v,b]}),k[33]=g,k[34]=v,k[35]=b,k[36]=S):S=k[36],k[37]!==h||k[38]!==S?(w=(0,i.jsxs)(e_.A,{sx:h,className:eC.emptyStateContainer,children:[f,S]}),k[37]=h,k[38]=S,k[39]=w):w=k[39],k[40]!==P?(C=P&&(0,i.jsx)("div",{className:eC.actionButtonsContainer,children:(0,i.jsx)(eA,{message:P})}),k[40]=P,k[41]=C):C=k[41],k[42]!==p||k[43]!==w||k[44]!==C||k[45]!==d?(j=(0,i.jsxs)(e_.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:d,className:eC.KnowledgeSelectPanelContainer,...u,children:[p,w,C]}),k[42]=p,k[43]=w,k[44]=C,k[45]=d,k[46]=j):j=k[46],k[47]!==F||k[48]!==T||k[49]!==j||k[50]!==l||k[51]!==s?(N=(0,i.jsx)(ev.T,{open:T,onOpen:l,onClose:s,overlayProps:c,...F,children:j}),k[47]=F,k[48]=T,k[49]=j,k[50]=l,k[51]=s,k[52]=N):N=k[52],N}function ek(e){let t=(0,o.c)(11),{administratedCopilotEnterpriseOrganizations:n}=e;if(1===n.length){let e,r,a;return t[0]!==n[0]?(e=eP(n[0]),t[0]=n[0],t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,I.G)("create-knowledge-base-button"),t[2]=r):r=t[2],t[3]!==e?(a=(0,i.jsx)(A.Q,{as:"a",href:e,className:eC.createButton,...r,children:"Create a knowledge base"}),t[3]=e,t[4]=a):a=t[4],a}{let e,r,a,o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,I.G)("create-knowledge-base-dropdown"),r=(0,i.jsx)(ex.A,{as:"h3",className:eC.sectionTitle,children:"Create a knowledge base for an organization"}),t[5]=e,t[6]=r):(e=t[5],r=t[6]),t[7]!==n?(a=n.map(eR),t[7]=n,t[8]=a):a=t[8],t[9]!==a?(o=(0,i.jsxs)("div",{className:eC.organizationsSection,...e,children:[r,(0,i.jsx)(m.l,{className:eC.organizationsList,children:a})]}),t[9]=a,t[10]=o):o=t[10],o}}function eR(e){return(0,i.jsx)(eE,{org:e},e.id)}function eE(e){let t,n,r,a,l=(0,o.c)(11),{org:s}=e;return l[0]!==s?(t=eP(s),l[0]=s,l[1]=t):t=l[1],l[2]!==s.avatarUrl||l[3]!==s.login?(n=(0,i.jsx)(en.r,{square:!0,src:s.avatarUrl,alt:s.login,"aria-hidden":"true",className:eC.organizationAvatar}),l[2]=s.avatarUrl,l[3]=s.login,l[4]=n):n=l[4],l[5]!==s.login?(r=(0,i.jsx)(eb.A,{inline:!0,title:s.login,className:eC.organizationName,children:s.login}),l[5]=s.login,l[6]=r):r=l[6],l[7]!==t||l[8]!==n||l[9]!==r?(a=(0,i.jsx)(m.l.Item,{children:(0,i.jsxs)(eo.A,{href:t,className:eC.organizationLink,children:[n,r]})}),l[7]=t,l[8]=n,l[9]=r,l[10]=a):a=l[10],a}function eA(e){let t,n=(0,o.c)(2),{message:r}=e;return r?(n[0]!==r?(t=(0,i.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:eC.ssoNotice,children:r}),n[0]=r,n[1]=t):t=n[1],t):null}function eT(){let e=(0,y.Pk)(),t=e.ssoOrganizations.map(eL);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eL(e){return e.login}function eP(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eF(e){let t,n,r,a,l,s=(0,o.c)(13),{anchorRef:c,open:d,setOpen:u}=e;s[0]!==c||s[1]!==d||s[2]!==u?(t=c?{anchorRef:c,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(ej,{open:d,setOpen:u,...t})}},s[0]=c,s[1]=d,s[2]=u,s[3]=t):t=s[3];let m=t;return s[4]!==u?(n=()=>u(!0),r=()=>u(!1),s[4]=u,s[5]=n,s[6]=r):(n=s[5],r=s[6]),s[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:(0,b.$)("m-3 d-flex flex-column flex-items-center text-center",eC.disabledForPreviewModelsPanel),children:[(0,i.jsx)(R.AlertIcon,{className:"fgColor-attention mb-3"}),(0,i.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,i.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]}),s[7]=a):a=s[7],s[8]!==m||s[9]!==d||s[10]!==n||s[11]!==r?(l=(0,i.jsx)(ev.T,{open:d,onOpen:n,onClose:r,...m,children:a}),s[8]=m,s[9]=d,s[10]=n,s[11]=r,s[12]=l):l=s[12],l}try{ej.displayName||(ej.displayName="KBIconButton")}catch{}try{(r=KBIconButtonInner).displayName||(r.displayName="KBIconButtonInner")}catch{}try{eI.displayName||(eI.displayName="KnowledgeSelectPanel")}catch{}try{eN.displayName||(eN.displayName="EmptyKnowledgeBase")}catch{}try{ek.displayName||(ek.displayName="CreateKnowledgeBaseButton")}catch{}try{eE.displayName||(eE.displayName="CreateKnowledgeBaseActionRow")}catch{}try{eA.displayName||(eA.displayName="SSOFooter")}catch{}try{eF.displayName||(eF.displayName="DisabledForPreviewModels")}catch{}var eO=n(35673),eD=n(70170),eM=n(79274),eB=n(97286);async function e$(e,t,n,r){return new Promise((a,i)=>{if(!window.Worker)return void setTimeout(()=>a(e.filter(e=>e.includes(t))));let o=new Worker(n);o.addEventListener("message",e=>a(e.data.list)),o.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{o.terminate(),i(Error("Worker aborted"))}),o.postMessage({baseList:e,query:t})})}function eU(e,t){let n,r,a,i=(0,o.c)(9),{findFileWorkerPath:l}=(0,y.Pk)();i[0]!==e||i[1]!==t||i[2]!==l?(n=["copilot-worker-filter",l,e,t],r=async n=>{let{signal:r}=n;return e?0===t.length?e:e$(e,t,l,r):[]},i[0]=e,i[1]=t,i[2]=l,i[3]=n,i[4]=r):(n=i[3],r=i[4]);let s=null!==e;return i[5]!==n||i[6]!==r||i[7]!==s?(a={queryKey:n,queryFn:r,enabled:s,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:eq},i[5]=n,i[6]=r,i[7]=s,i[8]=a):a=i[8],(0,eB.I)(a)}function eq(e){return e}function ez(e,t){let n,r,a,i=(0,o.c)(11),l=void 0===t||t,s=(0,O.b)(),c=null!==e;return i[0]!==l||i[1]!==e?(n=["copilot-repository-files",e,l],i[0]=l,i[1]=e,i[2]=n):n=i[2],i[3]!==l||i[4]!==s||i[5]!==e?(r=async()=>{if(!e)return{};let t=await s.service.listRepoFiles(e,l);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},i[3]=l,i[4]=s,i[5]=e,i[6]=r):r=i[6],i[7]!==c||i[8]!==n||i[9]!==r?(a={enabled:c,queryKey:n,queryFn:r,staleTime:3e5},i[7]=c,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eB.I)(a)}function eV(e,t){let n,r,a,i=(0,o.c)(11),l=(0,O.b)(),s=null!==e&&t.length>0;return i[0]!==e||i[1]!==t?(n=["copilot-repository-symbols",e,t],i[0]=e,i[1]=t,i[2]=n):n=i[2],i[3]!==l||i[4]!==e||i[5]!==t?(r=async()=>{if(!e)return[];let n=await l.service.querySymbols(e,t);if(!n.ok)throw Error("Failed to fetch symbols for repository");return n.payload.filter(eW)},i[3]=l,i[4]=e,i[5]=t,i[6]=r):r=i[6],i[7]!==s||i[8]!==n||i[9]!==r?(a={enabled:s,queryKey:n,queryFn:r},i[7]=s,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eB.I)(a)}function eW(e){return!!e.symbol}var eH=n(26875),eG=n(70845);let eK={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--zT6kZ",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--T61jD",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--sQVTX",selectPanelContainer:"ReferencesSelectPanel-module__selectPanelContainer--wSTmy",ActionList:"ReferencesSelectPanel-module__ActionList--SpdwU",referenceListItem:"ReferencesSelectPanel-module__referenceListItem--mq8Ni",referenceItemText:"ReferencesSelectPanel-module__referenceItemText--JlIMs"};var eQ=n(87086);let eJ="Search",eX=e=>{let t,n,r,a,l,s,c,d,u,m,h,f=(0,o.c)(34);f[0]!==e?({open:r,onOpenChange:n,cancelReturnFocusRef:t,submitReturnFocusRef:l,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a,f[5]=l):(t=f[1],n=f[2],r=f[3],a=f[4],l=f[5]);let g=(0,O.b)(),[x,_]=(0,p.useState)();f[6]===Symbol.for("react.memo_cache_sentinel")?(s=()=>_(void 0),f[6]=s):s=f[6],f[7]!==r?(c=[r],f[7]=r,f[8]=c):c=f[8],(0,p.useEffect)(s,c);let v=(0,y.pn)(e7);f[9]!==v?(d=new Set(v.filter(e8).map(e9)),f[9]=v,f[10]=d):d=f[10];let b=d,[S,w]=(0,p.useState)(),C=(0,p.useRef)(!1);f[11]!==g.service?(u=async e=>{w(void 0),C.current=!0;let t=await g.service.fetchRepo(e);t.ok?_(t.payload):w("Error: failed to load repository details. Please try again."),C.current=!1},f[11]=g.service,f[12]=u):u=f[12];let j=u,I=a.supportedReferenceTypes??eZ;f[13]!==I?(m=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Choose a repository to browse for files, folders, and symbols.":t&&n?"Choose a repository to browse for files and folders.":t&&r?"Choose a repository to browse for files and symbols.":n&&r?"Choose a repository to browse for folders and symbols.":t?"Choose a repository to browse for files.":n?"Choose a repository to browse for folders.":r?"Choose a repository to browse for symbols.":"Choose a repository to browse for references."})(I),f[13]=I,f[14]=m):m=f[14];let N=m;if(!x){let e,a,o;return f[15]!==n?(e=e=>{C.current||n(e)},f[15]=n,f[16]=e):e=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,f[17]=a):a=f[17],f[18]!==t||f[19]!==N||f[20]!==j||f[21]!==r||f[22]!==b||f[23]!==S||f[24]!==l||f[25]!==e?(o=(0,i.jsx)(eQ.X1,{selectionVariant:"instant",open:r,onOpenChange:e,selectedRepoIds:a,onSelectRepo:j,cancelReturnFocusRef:t,submitReturnFocusRef:l,description:N,featuredRepoIds:b,error:S}),f[18]=t,f[19]=N,f[20]=j,f[21]=r,f[22]=b,f[23]=S,f[24]=l,f[25]=e,f[26]=o):o=f[26],o}return f[27]!==t||f[28]!==n||f[29]!==r||f[30]!==a||f[31]!==x||f[32]!==l?(h=(0,i.jsx)(eY,{...a,open:r,onOpenChange:n,sourceRepository:x,cancelReturnFocusRef:t,submitReturnFocusRef:l}),f[27]=t,f[28]=n,f[29]=r,f[30]=a,f[31]=x,f[32]=l,f[33]=h):h=f[33],h},eZ=["files","folders","symbols"],eY=e=>{let t,n,r,a,l,s,c,d,u,h,f,g,x,_=(0,o.c)(40),{renderAnchor:b,anchorRef:S,open:w,onOpenChange:C,submitReturnFocusRef:j,cancelReturnFocusRef:I,sourceRepository:N,supportedReferenceTypes:k}=e,R=void 0===k?eZ:k,[E,A]=(0,p.useState)("");_[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eD.s)(A,250),_[0]=t):t=_[0];let T=(0,p.useRef)(t);_[1]!==w?(n=()=>{w||A("")},r=[w],_[1]=w,_[2]=n,_[3]=r):(n=_[2],r=_[3]),(0,p.useEffect)(n,r);let{initialLoading:L,filterLoading:P,selected:F,unselected:D,toggleSelection:M}=function(e,t,n,r=eZ){let a=(0,y.Pk)(),i=(0,O.b)(),l=function(e,t,n,r){let a,i,l,s,c,d=(0,o.c)(16),u=void 0===r?eZ:r;d[0]!==u?(a=u.includes("folders"),d[0]=u,d[1]=a):a=d[1];let m=a,p=u.includes("symbols");d[2]!==u?(i=u.includes("files"),d[2]=u,d[3]=i):i=d[3];let h=i,f=n?t:null,g=ez(f,m),y=eU(g.data?.paths??null,e),x=eU(g.data?.directories??null,e),_=eV(p?f:null,e);d[4]!==_.data?(l=_.data?.map(e6)??null,d[4]=_.data,d[5]=l):l=d[5];let v=eU(l,e);if(d[6]!==x||d[7]!==y.data||d[8]!==v.data||d[9]!==h||d[10]!==m){let e=h?y.data?.slice(0,7).map(e4)??[]:[];s=[...e,...m?x.data?.slice(0,7).map(e5)??[]:[],...v.data?.slice(0,7).map(e3)??[]],d[6]=x,d[7]=y.data,d[8]=v.data,d[9]=h,d[10]=m,d[11]=s}else s=d[11];let b=s,S=null===y.data&&null===x.data&&null===_.data,w=g.isFetching||y.isFetching||x.isFetching||_.isFetching||v.isFetching;return d[12]!==w||d[13]!==S||d[14]!==b?(c={items:b,filterLoading:w,initialLoading:S},d[12]=w,d[13]=S,d[14]=b,d[15]=c):c=d[15],c}(t,n,e,r),s=r.includes("symbols"),c=eV(e&&s?n:null,t).data,[d,u,m]=(0,p.useMemo)(()=>{let e=new Set,t=new Set,r=new Set;for(let i of a.currentReferences)"file"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?e.add(i.path):"folder"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?t.add(i.path):"symbol"===i.type&&"suggestionSymbol"===i.kind&&i.suggestionDefinitions?.some(e=>e.repoOwner===n?.ownerLogin&&e.repoName===n?.name)&&r.add(i.name);return[e,t,r]},[a.currentReferences,n?.ownerLogin,n?.name]),{selected:h=[],unselected:f=[]}=(0,eH.O)(l.items,e=>{switch(e.type){case"file":return d.has(e.text)?"selected":"unselected";case"folder":return u.has(e.text)?"selected":"unselected";case"symbol":return m.has(e.text)?"selected":"unselected"}}),g=(0,p.useCallback)(e=>{let t;if(!n)return;switch(e.type){case"file":t=(0,v.Od)(e.text,n);break;case"folder":t=(0,v.OC)(e.text,n);break;case"symbol":{let r=c?.find(t=>(0,v.Sm)(t)===e.text);if(!r)return;t=(0,v.Qt)(r,n)}}let r=(0,v.Vb)(t),o=a.currentReferences.find(e=>r===(0,v.Vb)(e));o?i.removeReference(o):i.addReference(t,"references-menu")},[i,n,a.currentReferences,c]);return{...l,selected:h,unselected:f,toggleSelection:g}}(w,E,N,R),B=F.length+D.length,$=`${N.ownerLogin}/${N.name}`;return _[4]!==b?(a=b?.({}),_[4]=b,_[5]=a):a=_[5],_[6]!==R?(l=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Select files, folders, and symbols":t&&n?"Select files and folders":t&&r?"Select files and symbols":n&&r?"Select folders and symbols":t?"Select files":n?"Select folders":r?"Select symbols":"Select references"})(R),_[6]=R,_[7]=l):l=_[7],_[8]!==$||_[9]!==R?(s=((e,t)=>{let n=t.includes("files"),r=t.includes("folders"),a=t.includes("symbols"),i="references";return n&&r&&a?i="files, folders, and symbols":n&&r?i="files and folders":n&&a?i="files and symbols":r&&a?i="folders and symbols":n?i="files":r?i="folders":a&&(i="symbols"),`Choose ${i} from ${e} to chat about. Use fewer references for more accurate responses.`})($,R),_[8]=$,_[9]=R,_[10]=s):s=_[10],_[11]!==C||_[12]!==j.current?(c=()=>{(0,ew.flushSync)(()=>C(!1)),j.current?.focus()},_[11]=C,_[12]=j.current,_[13]=c):c=_[13],_[14]!==I.current||_[15]!==C?(d=()=>{(0,ew.flushSync)(()=>C(!1)),I.current?.focus()},_[14]=I.current,_[15]=C,_[16]=d):d=_[16],_[17]===Symbol.for("react.memo_cache_sentinel")?(u=e=>T.current(e.target.value),_[17]=u):u=_[17],_[18]!==P?(h=(0,i.jsx)(eM.X.Header,{children:(0,i.jsx)(eM.X.SearchInput,{loading:P,onChange:u,placeholder:eJ,"aria-label":eJ})}),_[18]=P,_[19]=h):h=_[19],_[20]!==P||_[21]!==L||_[22]!==F||_[23]!==R||_[24]!==M||_[25]!==B||_[26]!==D?(f=(0,i.jsx)(m.l,{className:eK.ActionList,children:L?(0,i.jsx)(eM.X.Loading,{children:(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Fetching files, folders, and symbols\u2026":t&&n?"Fetching files and folders\u2026":t&&r?"Fetching files and symbols\u2026":n&&r?"Fetching folders and symbols\u2026":t?"Fetching files\u2026":n?"Fetching folders\u2026":r?"Fetching symbols\u2026":"Fetching references\u2026"})(R)}):0!==B||P?(0,i.jsxs)(i.Fragment,{children:[F.map(e=>(0,i.jsx)(e2,{item:e,selected:!0,toggleSelection:M},e1(e))),F.length>0&&D.length>0&&(0,i.jsx)(m.l.Divider,{}),D.map(e=>(0,i.jsx)(e2,{item:e,selected:!1,toggleSelection:M},e1(e)))]}):(0,i.jsx)("div",{children:(0,i.jsx)(eG.O,{delay:500,children:(0,i.jsx)(eM.X.Message,{variant:"empty",title:(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"No files, folders, or symbols found":t&&n?"No files or folders found":t&&r?"No files or symbols found":n&&r?"No folders or symbols found":t?"No files found":n?"No folders found":r?"No symbols found":"No references found"})(R),children:"Try a different search term"})})})}),_[20]=P,_[21]=L,_[22]=F,_[23]=R,_[24]=M,_[25]=B,_[26]=D,_[27]=f):f=_[27],_[28]!==S||_[29]!==w||_[30]!==h||_[31]!==f||_[32]!==l||_[33]!==s||_[34]!==c||_[35]!==d?(g=(0,i.jsxs)(eM.X,{anchorRef:S,title:l,description:s,onCancel:c,onSubmit:d,open:w,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[h,f]}),_[28]=S,_[29]=w,_[30]=h,_[31]=f,_[32]=l,_[33]=s,_[34]=c,_[35]=d,_[36]=g):g=_[36],_[37]!==g||_[38]!==a?(x=(0,i.jsxs)("div",{className:eK.selectPanelContainer,children:[a,g]}),_[37]=g,_[38]=a,_[39]=x):x=_[39],x};function e0(e){let t,n,r,a,l,s=(0,o.c)(11),{open:c,setOpen:d,renderAnchor:u}=e;return s[0]!==d?(t=()=>d(!0),n=()=>d(!1),s[0]=d,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==u?(r=e=>u?.(e)??(0,i.jsx)(i.Fragment,{}),s[3]=u,s[4]=r):r=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:eK.chooseRepoInstructionPanel,children:[(0,i.jsx)(R.PaperclipIcon,{}),(0,i.jsx)("h3",{className:eK.chooseRepoTitle,children:"Attach a repository first"}),(0,i.jsx)("p",{className:eK.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]}),s[5]=a):a=s[5],s[6]!==c||s[7]!==t||s[8]!==n||s[9]!==r?(l=(0,i.jsx)(ev.T,{open:c,onOpen:t,onClose:n,renderAnchor:r,children:a}),s[6]=c,s[7]=t,s[8]=n,s[9]=r,s[10]=l):l=s[10],l}let e1=e=>`${e.type}#${e.text}`;function e2(e){let t,n,r,a,l,s=(0,o.c)(15),{toggleSelection:c,selected:d,item:u}=e;return s[0]!==u||s[1]!==c?(t=()=>{c(u),setTimeout(()=>{document.getElementById(e1(u))?.focus()})},s[0]=u,s[1]=c,s[2]=t):t=s[2],s[3]!==u?(n=e1(u),s[3]=u,s[4]=n):n=s[4],s[5]!==u.type?(r=(0,i.jsx)(m.l.LeadingVisual,{children:"symbol"===u.type?(0,i.jsx)(R.CodeSquareIcon,{}):"folder"===u.type?(0,i.jsx)(R.FileDirectoryFillIcon,{}):(0,i.jsx)(R.FileIcon,{})}),s[5]=u.type,s[6]=r):r=s[6],s[7]!==u.text?(a=(0,i.jsx)("div",{className:eK.referenceItemText,children:u.text}),s[7]=u.text,s[8]=a):a=s[8],s[9]!==d||s[10]!==t||s[11]!==n||s[12]!==r||s[13]!==a?(l=(0,i.jsxs)(m.l.Item,{onSelect:t,selected:d,id:n,className:eK.referenceListItem,children:[r,a]}),s[9]=d,s[10]=t,s[11]=n,s[12]=r,s[13]=a,s[14]=l):l=s[14],l}function e3(e){return{type:"symbol",text:e}}function e5(e){return{type:"folder",text:e}}function e4(e){return{type:"file",text:e}}function e6(e){return(0,v.Sm)(e)}try{(a=e=>{let t,n,r,a,l=(0,o.c)(12);l[0]!==e?({open:n,onOpenChange:t,...r}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=r):(t=l[1],n=l[2],r=l[3]);let{currentTopic:s}=(0,y.Pk)();if(!(0,v.Z6)(s)){let e;return l[4]!==t||l[5]!==n?(e=(0,i.jsx)(e0,{open:n,setOpen:t}),l[4]=t,l[5]=n,l[6]=e):e=l[6],e}return l[7]!==s||l[8]!==t||l[9]!==n||l[10]!==r?(a=(0,i.jsx)(eY,{...r,open:n,onOpenChange:t,sourceRepository:s}),l[7]=s,l[8]=t,l[9]=n,l[10]=r,l[11]=a):a=l[11],a}).displayName||(a.displayName="TopicReferencesSelectPanel")}catch{}try{eX.displayName||(eX.displayName="MultistepReferencesSelectPanel")}catch{}try{eY.displayName||(eY.displayName="ReferencesSelectPanel")}catch{}try{e0.displayName||(e0.displayName="ChooseRepositoryInstruction")}catch{}try{e2.displayName||(e2.displayName="ReferenceListItem")}catch{}function e7(e){return e.currentReferences}function e8(e){return"repository"===e.type}function e9(e){return e.id}let te=(0,p.memo)(e=>{let t,n,r,a,s,d,u,h,g,x,_,b,S,w,C,j,N,k,E,A,T,L,P,F,D,M,B,$=(0,o.c)(97);$[0]!==e?({panel:a,onPanelChange:d,anchorRef:t,initialRepo:n,onRepoSelect:r,...s}=e,$[0]=e,$[1]=t,$[2]=n,$[3]=r,$[4]=a,$[5]=s,$[6]=d):(t=$[1],n=$[2],r=$[3],a=$[4],s=$[5],d=$[6]);let{inputRef:U}=s,q=(0,O.b)(),z=(0,y.Pk)(),{supportedAttachmentTypes:V,supportedReferenceTypes:W}=function(){let e=(0,y.Pk)(),t=null!==(0,ee.G)(),n=["upload"],r=e.renderKnowledgeBases&&(e.currentTopic&&(0,v.Z6)(e.currentTopic)||!e.currentTopic);return t||n.push("repositories"),n.push("references"),r&&!t&&n.push("knowledge-bases"),t||n.push("agents"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders","symbols"]}}(),{model:H}=(0,y.bP)("model"),G="immersive"===z.mode&&!!H.capabilities?.supports?.vision,K=(0,et.kw)(s),Q=(0,p.useRef)(null),X=(0,ee.G)(),en=(0,Y.FQ)(!0),ea=!!(X&&en);$[7]!==X||$[8]!==G||$[9]!==q||$[10]!==H||$[11]!==ea||$[12]!==z||$[13]!==V?(u=V.includes("upload")&&(0,i.jsx)("input",{id:"image-uploader",...(0,I.G)("image-uploader"),hidden:!0,ref:Q,type:"file",accept:[G?J.s.getAllowedImageFileExtensions(H):"",Z.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=J.s.getAllowedFiles([...e.target.files],H),r=[];for(let e of(G?new J.s(z,q).addImageAttachments(t,"menu",X,ea):r.push(...t),n))new Z.E(q).addAttachment(e);for(let e of r)(0,l.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),$[7]=X,$[8]=G,$[9]=q,$[10]=H,$[11]=ea,$[12]=z,$[13]=V,$[14]=u):u=$[14];let ei="attachment-types"===a;$[15]!==d?(h=e=>d(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),$[15]=d,$[16]=h):h=$[16];let eo="assistive"===z.mode?eO.E5:void 0;$[17]!==d||$[18]!==z.mode||$[19]!==V?(g=V.includes("repositories")&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:z.mode}),d("repositories")},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.RepoIcon,{})}),"Repositories\u2026"]}),$[17]=d,$[18]=z.mode,$[19]=V,$[20]=g):g=$[20],$[21]!==d||$[22]!==z.mode?(x=()=>{f.W.multiFilePickerAttachment?((0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:z.mode}),d("multi-file-picker")):((0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:z.mode}),d("references"))},$[21]=d,$[22]=z.mode,$[23]=x):x=$[23];let el=V.includes("references")?void 0:"First attach a repository";$[24]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.FileCodeIcon,{})}),$[24]=_):_=$[24],$[25]!==W?(b=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols"),a="References";return t&&n&&r?a="Files, folders, and symbols":t&&n?a="Files and folders":t&&r?a="Files and symbols":n&&r?a="Folders and symbols":t?a="Files":n?a="Folders":r&&(a="Symbols"),a})(W),$[25]=W,$[26]=b):b=$[26],$[27]!==x||$[28]!==el||$[29]!==b?(S=(0,i.jsxs)(m.l.Item,{onSelect:x,inactiveText:el,children:[_,b,"\u2026"]}),$[27]=x,$[28]=el,$[29]=b,$[30]=S):S=$[30],$[31]!==d||$[32]!==z.mode||$[33]!==V?(w=V.includes("knowledge-bases")&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:z.mode}),d("knowledge-bases")},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.BookIcon,{})}),(0,i.jsx)("span",{...(0,I.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),$[31]=d,$[32]=z.mode,$[33]=V,$[34]=w):w=$[34],$[35]!==d||$[36]!==z.mode||$[37]!==V?(C=V.includes("upload")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:z.mode}),d(null),Q.current?.click()},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.UploadIcon,{})}),"Upload from computer"]})]}),$[35]=d,$[36]=z.mode,$[37]=V,$[38]=C):C=$[38],$[39]!==K||$[40]!==d||$[41]!==V?(j=V.includes("agents")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(er,{onSelectPanel:e=>d(e),onSelectAgent:e=>setTimeout(()=>K(e.slug))})]}),$[39]=K,$[40]=d,$[41]=V,$[42]=j):j=$[42],$[43]!==S||$[44]!==w||$[45]!==C||$[46]!==j||$[47]!==g?(N=(0,i.jsxs)(m.l,{children:[g,S,w,C,j]}),$[43]=S,$[44]=w,$[45]=C,$[46]=j,$[47]=g,$[48]=N):N=$[48],$[49]!==N||$[50]!==eo?(k=(0,i.jsx)(c.W.Overlay,{width:"small",side:"outside-top",align:"start",portalContainerName:eo,children:N}),$[49]=N,$[50]=eo,$[51]=k):k=$[51],$[52]!==t||$[53]!==k||$[54]!==ei||$[55]!==h?(E=(0,i.jsx)(c.W,{anchorRef:t,open:ei,onOpenChange:h,children:k}),$[52]=t,$[53]=k,$[54]=ei,$[55]=h,$[56]=E):E=$[56],$[57]!==t||$[58]!==U||$[59]!==a||$[60]!==d||$[61]!==W?(A="references"===a&&(0,i.jsx)(eX,{open:!0,onOpenChange:e=>d(e?"references":null),submitReturnFocusRef:U,cancelReturnFocusRef:t,supportedReferenceTypes:W}),$[57]=t,$[58]=U,$[59]=a,$[60]=d,$[61]=W,$[62]=A):A=$[62],$[63]!==n||$[64]!==r||$[65]!==a||$[66]!==d?(T="multi-file-picker"===a&&(0,i.jsx)(eh,{isOpen:!0,onClose:()=>d(null),initialRepo:n,onRepoSelect:r}),$[63]=n,$[64]=r,$[65]=a,$[66]=d,$[67]=T):T=$[67];let es="repositories"===a;return $[68]!==d?(L=e=>d(e?"repositories":null),$[68]=d,$[69]=L):L=$[69],$[70]!==t||$[71]!==U||$[72]!==es||$[73]!==L?(P=(0,i.jsx)(eQ.FZ,{open:es,onOpenChange:L,submitReturnFocusRef:U,cancelReturnFocusRef:t}),$[70]=t,$[71]=U,$[72]=es,$[73]=L,$[74]=P):P=$[74],$[75]!==t||$[76]!==a||$[77]!==d||$[78]!==V?(F=V.includes("knowledge-bases")&&(0,i.jsx)(eI,{disabledForPreviewModelsProps:{anchorRef:t},emptyKnowledgeBaseProps:{anchorRef:t},open:"knowledge-bases"===a,onOpenChange:e=>d(e?"knowledge-bases":null),anchorRef:t}),$[75]=t,$[76]=a,$[77]=d,$[78]=V,$[79]=F):F=$[79],$[80]!==t||$[81]!==a||$[82]!==d?(D="no-agents-available"===a&&(0,i.jsx)(ec,{onClose:()=>d(null),returnFocusRef:t}),$[80]=t,$[81]=a,$[82]=d,$[83]=D):D=$[83],$[84]!==t||$[85]!==a||$[86]!==d?(M="agents-not-supported"===a&&(0,i.jsx)(eu,{onClose:()=>d(null),returnFocusRef:t}),$[84]=t,$[85]=a,$[86]=d,$[87]=M):M=$[87],$[88]!==u||$[89]!==E||$[90]!==A||$[91]!==T||$[92]!==P||$[93]!==F||$[94]!==D||$[95]!==M?(B=(0,i.jsxs)("div",{children:[u,E,A,T,P,F,D,M]}),$[88]=u,$[89]=E,$[90]=A,$[91]=T,$[92]=P,$[93]=F,$[94]=D,$[95]=M,$[96]=B):B=$[96],B});te.displayName="AttachmentMenu";var tt=n(71555);let tn={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},tr=[{name:tn.agents,icon:R.StackIcon,value:"agents",where:"start"},{name:tn.repositories,icon:R.RepoIcon,value:"repositories",where:"anywhere"},{name:tn.files,icon:R.FileIcon,value:"repositories:files",where:"anywhere"},{name:tn.issues,icon:R.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:tn.pulls,icon:R.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:tn.discussions,icon:R.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],ta={is:e=>tr.some(t=>t.value===e)};function ti(e){let t,n,r,a,l,s=(0,o.c)(12);return s[0]!==e?({agent:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t.avatarUrl?(r=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(en.r,{src:t.avatarUrl})}),s[3]=t.avatarUrl,s[4]=r):r=s[4],s[5]!==t.slug?(a=(0,i.jsxs)(m.l.Description,{variant:"inline",truncate:!0,children:[et.Z3,t.slug]}),s[5]=t.slug,s[6]=a):a=s[6],s[7]!==t.name||s[8]!==n||s[9]!==r||s[10]!==a?(l=(0,i.jsxs)(m.l.Item,{...n,children:[r,t.name,a]}),s[7]=t.name,s[8]=n,s[9]=r,s[10]=a,s[11]=l):l=s[11],l}try{ti.displayName||(ti.displayName="AgentSuggestion")}catch{}function to(e){let t,n,r,a,l,s,c,d,u=(0,o.c)(20);u[0]!==e?({leadingVisual:t,...n}=e,u[0]=e,u[1]=t,u[2]=n):(t=u[1],n=u[2]);let h=(0,p.useId)(),f=(0,p.useId)();return u[3]!==f||u[4]!==h?(r=(0,b.$)(h,f),u[3]=f,u[4]=h,u[5]=r):r=u[5],u[6]!==t?(a=void 0!==t&&(0,i.jsx)(m.l.LeadingVisual,{children:t}),u[6]=t,u[7]=a):a=u[7],u[8]!==h||u[9]!==n.children?(l=(0,i.jsx)("span",{id:h,children:n.children}),u[8]=h,u[9]=n.children,u[10]=l):l=u[10],u[11]!==f?(s=(0,i.jsx)("span",{className:"d-none","aria-hidden":!0,id:f,children:"Opens in new tab."}),u[11]=f,u[12]=s):s=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(R.LinkExternalIcon,{})}),u[13]=c):c=u[13],u[14]!==n||u[15]!==r||u[16]!==a||u[17]!==l||u[18]!==s?(d=(0,i.jsxs)(m.l.Item,{...n,"aria-labelledby":r,children:[a,l,s,c]}),u[14]=n,u[15]=r,u[16]=a,u[17]=l,u[18]=s,u[19]=d):d=u[19],d}try{to.displayName||(to.displayName="LinkSuggestion")}catch{}function tl(e){return{value:`@${e.slug}`,render:t=>(0,i.jsx)(ti,{agent:e,...t})}}function ts(e){let t,n,r,a,l,s=(0,o.c)(9);return s[0]!==e?({leadingVisual:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t?(r=void 0!==t&&(0,i.jsx)(m.l.LeadingVisual,{children:t}),s[3]=t,s[4]=r):r=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(R.ArrowRightIcon,{})}),s[5]=a):a=s[5],s[6]!==n||s[7]!==r?(l=(0,i.jsxs)(m.l.Item,{"aria-haspopup":!0,...n,children:[r,n.children,a]}),s[6]=n,s[7]=r,s[8]=l):l=s[8],l}try{ts.displayName||(ts.displayName="MultistepSuggestion")}catch{}function tc(e){let t,n,r,a,l=(0,o.c)(9);l[0]!==e?({category:n,...t}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]);let{name:s,icon:c}=n;return l[3]!==c?(r=(0,i.jsx)(c,{}),l[3]=c,l[4]=r):r=l[4],l[5]!==s||l[6]!==t||l[7]!==r?(a=(0,i.jsx)(ts,{leadingVisual:r,...t,children:s}),l[5]=s,l[6]=t,l[7]=r,l[8]=a):a=l[8],a}try{tc.displayName||(tc.displayName="CategorySuggestion")}catch{}let td={asyncSuggestion:"shared-module__asyncSuggestion--AXibl",stale:"shared-module__stale--R4Im6"};function tu(e){let t,n,r,a,l,s,c,d,u,p,h,f=(0,o.c)(25);f[0]!==e?({discussion:n,stale:a,className:t,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a):(t=f[1],n=f[2],r=f[3],a=f[4]);let g=a&&td.stale;return f[5]!==t||f[6]!==g?(l=(0,b.$)(td.asyncSuggestion,g,t),f[5]=t,f[6]=g,f[7]=l):l=f[7],f[8]!==n.state?(s="open"===n.state&&(0,i.jsx)(R.CommentDiscussionIcon,{className:"fgColor-open"}),f[8]=n.state,f[9]=s):s=f[9],f[10]!==n.state?(c="closed"===n.state&&(0,i.jsx)(R.DiscussionClosedIcon,{className:"fgColor-muted"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==s||f[13]!==c?(d=(0,i.jsxs)(m.l.LeadingVisual,{children:[s,c]}),f[12]=s,f[13]=c,f[14]=d):d=f[14],f[15]!==n.title?(u=(0,i.jsx)(eb.A,{title:n.title,maxWidth:350,children:n.title}),f[15]=n.title,f[16]=u):u=f[16],f[17]!==n.number?(p=(0,i.jsxs)(m.l.Description,{children:["#",n.number]}),f[17]=n.number,f[18]=p):p=f[18],f[19]!==r||f[20]!==l||f[21]!==d||f[22]!==u||f[23]!==p?(h=(0,i.jsxs)(m.l.Item,{...r,className:l,children:[d,u,p]}),f[19]=r,f[20]=l,f[21]=d,f[22]=u,f[23]=p,f[24]=h):h=f[24],h}try{tu.displayName||(tu.displayName="DiscussionSuggestion")}catch{}function tm(e){let t,n,r,a,l,s,c,d,u,p,h,f,g,y,x,_=(0,o.c)(35);if(_[0]!==e?({type:l,path:n,stale:a,className:t,...r}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=r,_[4]=a,_[5]=l):(t=_[1],n=_[2],r=_[3],a=_[4],l=_[5]),_[6]!==t||_[7]!==n||_[8]!==r||_[9]!==a||_[10]!==l){let e=n.split("/"),o=e.pop();c=m.l.Item,p=r;let y=a&&td.stale;_[19]!==t||_[20]!==y?(h=(0,b.$)(td.asyncSuggestion,y,t),_[19]=t,_[20]=y,_[21]=h):h=_[21],_[22]!==l?(f=(0,i.jsx)(m.l.LeadingVisual,{children:"folder"===l?(0,i.jsx)(R.FileDirectoryFillIcon,{}):(0,i.jsx)(R.FileIcon,{})}),_[22]=l,_[23]=f):f=_[23],g=o,s=m.l.Description,d="inline",u=e.join("/"),_[6]=t,_[7]=n,_[8]=r,_[9]=a,_[10]=l,_[11]=s,_[12]=c,_[13]=d,_[14]=u,_[15]=p,_[16]=h,_[17]=f,_[18]=g}else s=_[11],c=_[12],d=_[13],u=_[14],p=_[15],h=_[16],f=_[17],g=_[18];return _[24]!==s||_[25]!==d||_[26]!==u?(y=(0,i.jsxs)(s,{variant:d,children:[u,"/"]}),_[24]=s,_[25]=d,_[26]=u,_[27]=y):y=_[27],_[28]!==c||_[29]!==p||_[30]!==h||_[31]!==f||_[32]!==g||_[33]!==y?(x=(0,i.jsxs)(c,{...p,className:h,children:[f,g,y]}),_[28]=c,_[29]=p,_[30]=h,_[31]=f,_[32]=g,_[33]=y,_[34]=x):x=_[34],x}try{tm.displayName||(tm.displayName="FileSuggestion")}catch{}function tp(e){let t,n,r,a,l,s,c,d,u,p,h,f,g=(0,o.c)(28);g[0]!==e?({issue:n,stale:a,className:t,...r}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let y=a&&td.stale;return g[5]!==t||g[6]!==y?(l=(0,b.$)(td.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=l):l=g[7],g[8]!==n.state?(s="draft"===n.state&&(0,i.jsx)(R.IssueDraftIcon,{className:"fgColor-neutral"}),g[8]=n.state,g[9]=s):s=g[9],g[10]!==n.state?(c="open"===n.state&&(0,i.jsx)(R.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==n.state?(d="closed"===n.state&&(0,i.jsx)(R.IssueClosedIcon,{className:"fgColor-done"}),g[12]=n.state,g[13]=d):d=g[13],g[14]!==s||g[15]!==c||g[16]!==d?(u=(0,i.jsxs)(m.l.LeadingVisual,{children:[s,c,d]}),g[14]=s,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==n.title?(p=(0,i.jsx)(eb.A,{title:n.title,maxWidth:350,children:n.title}),g[18]=n.title,g[19]=p):p=g[19],g[20]!==n.number?(h=(0,i.jsxs)(m.l.Description,{children:["#",n.number]}),g[20]=n.number,g[21]=h):h=g[21],g[22]!==r||g[23]!==l||g[24]!==u||g[25]!==p||g[26]!==h?(f=(0,i.jsxs)(m.l.Item,{...r,className:l,children:[u,p,h]}),g[22]=r,g[23]=l,g[24]=u,g[25]=p,g[26]=h,g[27]=f):f=g[27],f}try{tp.displayName||(tp.displayName="IssueSuggestion")}catch{}function th(e){let t,n,r,a,l,s,c,d,u,p,h,f,g=(0,o.c)(28);g[0]!==e?({pullRequest:r,stale:a,className:t,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let y=a&&td.stale;return g[5]!==t||g[6]!==y?(l=(0,b.$)(td.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=l):l=g[7],g[8]!==r.state?(s="draft"===r.state&&(0,i.jsx)(R.GitPullRequestDraftIcon,{className:"fgColor-neutral"}),g[8]=r.state,g[9]=s):s=g[9],g[10]!==r.state?(c="open"===r.state&&(0,i.jsx)(R.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=r.state,g[11]=c):c=g[11],g[12]!==r.state?(d="closed"===r.state&&(0,i.jsx)(R.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=r.state,g[13]=d):d=g[13],g[14]!==s||g[15]!==c||g[16]!==d?(u=(0,i.jsxs)(m.l.LeadingVisual,{children:[s,c,d]}),g[14]=s,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==r.title?(p=(0,i.jsx)(eb.A,{title:r.title,maxWidth:350,children:r.title}),g[18]=r.title,g[19]=p):p=g[19],g[20]!==r.number?(h=(0,i.jsxs)(m.l.Description,{children:["#",r.number]}),g[20]=r.number,g[21]=h):h=g[21],g[22]!==n||g[23]!==l||g[24]!==u||g[25]!==p||g[26]!==h?(f=(0,i.jsxs)(m.l.Item,{...n,className:l,children:[u,p,h]}),g[22]=n,g[23]=l,g[24]=u,g[25]=p,g[26]=h,g[27]=f):f=g[27],f}try{th.displayName||(th.displayName="PullRequestSuggestion")}catch{}function tf(e){let t,n,r,a,l,s,c,d,u=(0,o.c)(18);u[0]!==e?({repository:a,isMultistep:n,stale:l,className:t,...r}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=a,u[5]=l):(t=u[1],n=u[2],r=u[3],a=u[4],l=u[5]);let p=l&&td.stale;u[6]!==t||u[7]!==p?(s=(0,b.$)(td.asyncSuggestion,p,t),u[6]=t,u[7]=p,u[8]=s):s=u[8];let h=s;u[9]!==a.isInOrganization||u[10]!==a.ownerAvatarUrl?(c=a.ownerAvatarUrl?(0,i.jsx)(en.r,{src:a.ownerAvatarUrl,alt:"",size:16,square:a.isInOrganization}):(0,i.jsx)(R.RepoIcon,{}),u[9]=a.isInOrganization,u[10]=a.ownerAvatarUrl,u[11]=c):c=u[11];let f=c;return u[12]!==f||u[13]!==h||u[14]!==n||u[15]!==r||u[16]!==a.nwo?(d=n?(0,i.jsx)(ts,{...r,className:h,leadingVisual:f,children:a.nwo},a.nwo):(0,i.jsxs)(m.l.Item,{...r,className:h,children:[(0,i.jsx)(m.l.LeadingVisual,{children:f}),a.nwo]},a.nwo),u[12]=f,u[13]=h,u[14]=n,u[15]=r,u[16]=a.nwo,u[17]=d):d=u[17],d}try{tf.displayName||(tf.displayName="RepositorySuggestion")}catch{}function tg(e){return{value:null,key:e.value,render:t=>(0,i.jsx)(tc,{category:e,...t})}}function ty(e){return null!==e}function tx(e){let t,n,r=(0,o.c)(3),[a,i]=(0,p.useState)(null);return(null===a&&null!==e||null!==a&&null===e)&&i(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>i(e),200);return()=>clearTimeout(t)},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,p.useEffect)(t,n),a}function t_(e){return e}function tv(e){return e}function tb(e){return e}var tS=n(26408);function tw(e){let t,n,r,a,l=(0,o.c)(9);return l[0]!==e?({org:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(r=(0,i.jsx)(en.r,{square:!0,src:t.avatarUrl}),l[3]=t.avatarUrl,l[4]=r):r=l[4],l[5]!==t.login||l[6]!==n||l[7]!==r?(a=(0,i.jsx)(to,{leadingVisual:r,...n,children:t.login}),l[5]=t.login,l[6]=n,l[7]=r,l[8]=a):a=l[8],a}function tC(e){let t,n,r,a=(0,o.c)(7);return a[0]!==e?({orgs:t,...n}=e,a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==t[0]?.login||a[4]!==t.length||a[5]!==n?(r=1===t.length?(0,i.jsxs)(to,{leadingVisual:(0,i.jsx)(R.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,i.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,i.jsx)(ts,{leadingVisual:(0,i.jsx)(R.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),a[3]=t[0]?.login,a[4]=t.length,a[5]=n,a[6]=r):r=a[6],r}try{tw.displayName||(tw.displayName="SSOOrgSuggestion")}catch{}try{tC.displayName||(tC.displayName="SSOPromptSuggestion")}catch{}let tj=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tI(e){return{value:null,key:`open-link:${tj(e)}`,render:t=>(0,i.jsx)(tw,{org:e,...t})}}let tN=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}];function tk(e){let t,n,r,a,s,c,d,u,h,f,g=(0,o.c)(25),{children:x,onSelectReference:_,onShowAgentsDialog:v}=e,{mode:b}=(0,y.Pk)(),[S,w]=(0,p.useState)(tR);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>w(!0),n=[],g[0]=t,g[1]=n):(t=g[0],n=g[1]),(0,p.useEffect)(t,n);let[C,j]=(0,p.useState)(null),{suggestions:I,stale:N}=function(e){let t=(0,o.c)(7),n=function(e){let t,n=(0,o.c)(3),{currentReferences:r}=(0,y.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==r||n[1]!==e){let t=e.filter.toLowerCase(),o=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,l=r.map(e=>{let t=D.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!o(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tf,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!o(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tp,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!o(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(th,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!o(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tu,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!o(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tm,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(ty),s=tr.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(tg);if(s.length>0){let e=l.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{...e}),(0,i.jsx)(m.l.Divider,{})]})}}a=l.concat(s),n[0]=r,n[1]=e,n[2]=a}else a=n[2];t=a}return t}(e?.category==="categories"?e:null),r=function(e){let t,n=(0,o.c)(4),{availableAgents:r,loading:a,showLimit:l,disabled:s}=(0,et.JE)(null!==e);e:{let o;if(s||!e){t=null;break e}if(a&&!r){t="loading";break e}n[0]!==r||n[1]!==e||n[2]!==l?(o=r?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(tl).concat({value:null,key:`open-link:${et.bn}`,render:e=>(0,i.jsxs)(i.Fragment,{children:[r.length>0&&(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(to,{leadingVisual:(0,i.jsx)(R.TelescopeIcon,{}),...e,inactiveText:l?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=r,n[1]=e,n[2]=l,n[3]=o):o=n[3],t=o}return t}(e?.category==="agents"?e:null),a=function(e){let{currentReferences:t}=(0,y.Pk)(),n=tx(e),r=e!==n,{repositories:a,loading:o}=(0,tS.U)(n?.filter??"",null!==n),l=(0,p.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:s}=(0,y.Pk)();return{suggestions:(0,p.useMemo)(()=>{if(!n)return null;if("initial"===o)return"loading";let e=void 0!==n.nextCategory,t=a.toSorted((e,t)=>l.has(e.databaseId)&&!l.has(t.databaseId)?-1:l.has(t.databaseId)&&!l.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:D.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,i.jsx)(tf,{repository:t,isMultistep:e,stale:!!o||r,...n})}))??[];return s.length>0&&t.push({value:null,key:1===s.length?`open-link:${tj(s[0])}`:"sso-orgs",render:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(tC,{orgs:s,...e})]})}),t},[a,o,n,l,s,r]),stale:!0===o}}(e?.category==="repositories"?e:null),l=function(e){let t,n,r,a,l,s=(0,o.c)(18),{service:c}=(0,O.b)(),d=tx(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;s[0]!==p||s[1]!==h?(t=["copilot-autocomplete-issues",p,h],s[0]=p,s[1]=h,s[2]=t):t=s[2],s[3]!==d||s[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),s[3]=d,s[4]=c,s[5]=n):n=s[5],s[6]!==m||s[7]!==t||s[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tv},s[6]=m,s[7]=t,s[8]=n,s[9]=r):r=s[9];let f=(0,eB.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}s[10]!==d||s[11]!==u||s[12]!==f.data||s[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:D.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tp,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,s[10]=d,s[11]=u,s[12]=f.data,s[13]=f.isPlaceholderData,s[14]=e):e=s[14],a=e}let g=a;return s[15]!==f.isPlaceholderData||s[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},s[15]=f.isPlaceholderData,s[16]=g,s[17]=l):l=s[17],l}(e?.category==="issues"?e:null),s=function(e){let t,n,r,a,l,s=(0,o.c)(18),{service:c}=(0,O.b)(),d=tx(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;s[0]!==p||s[1]!==h?(t=["copilot-autocomplete-pulls",p,h],s[0]=p,s[1]=h,s[2]=t):t=s[2],s[3]!==d||s[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),s[3]=d,s[4]=c,s[5]=n):n=s[5],s[6]!==m||s[7]!==t||s[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tb},s[6]=m,s[7]=t,s[8]=n,s[9]=r):r=s[9];let f=(0,eB.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}s[10]!==d||s[11]!==u||s[12]!==f.data||s[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:D.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(th,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,s[10]=d,s[11]=u,s[12]=f.data,s[13]=f.isPlaceholderData,s[14]=e):e=s[14],a=e}let g=a;return s[15]!==f.isPlaceholderData||s[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},s[15]=f.isPlaceholderData,s[16]=g,s[17]=l):l=s[17],l}(e?.category==="pulls"?e:null),c=function(e){let t,n,r,a,l,s=(0,o.c)(18),{service:c}=(0,O.b)(),d=tx(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;s[0]!==p||s[1]!==h?(t=["copilot-autocomplete-discussions",p,h],s[0]=p,s[1]=h,s[2]=t):t=s[2],s[3]!==d||s[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),s[3]=d,s[4]=c,s[5]=n):n=s[5],s[6]!==m||s[7]!==t||s[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:t_},s[6]=m,s[7]=t,s[8]=n,s[9]=r):r=s[9];let f=(0,eB.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}s[10]!==d||s[11]!==f.data||s[12]!==f.isPlaceholderData||s[13]!==u?(e=f.data?.map(e=>({value:D.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tu,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,s[10]=d,s[11]=f.data,s[12]=f.isPlaceholderData,s[13]=u,s[14]=e):e=s[14],a=e}let g=a;return s[15]!==f.isPlaceholderData||s[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},s[15]=f.isPlaceholderData,s[16]=g,s[17]=l):l=s[17],l}(e?.category==="discussions"?e:null),d=function(e){let t,n,r,a,l,s,c,d,u,m=(0,o.c)(23),p=(0,O.b)(),h=null!==e,f=e?.repository;m[0]!==f?(t=["copilot-repository",f],m[0]=f,m[1]=t):t=m[1],m[2]!==p||m[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await p.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},m[2]=p,m[3]=e?.repository,m[4]=n):n=m[4],m[5]!==h||m[6]!==t||m[7]!==n?(r={enabled:h,queryKey:t,queryFn:n,staleTime:3e5},m[5]=h,m[6]=t,m[7]=n,m[8]=r):r=m[8];let g=(0,eB.I)(r),y=ez(g.data??null);y.data?.directories,m[9]!==y.data?.directories?(l=y.data?.directories??[],m[9]=y.data?.directories,m[10]=l):l=m[10],m[11]!==l?(s=new Set(l),m[11]=l,m[12]=s):s=m[12],a=s,m[13]!==y.data?(c=y.data?(y.data.paths??[]).concat(y.data.directories??[]):null,m[13]=y.data,m[14]=c):c=m[14];let x=eU(c,e?.filter??"");e:{let t;if(!e){d=null;break e}if(g.isLoading||y.isLoading||x.isLoading){d="loading";break e}m[15]!==a||m[16]!==x.data||m[17]!==x.isPlaceholderData||m[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:D.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,i.jsx)(tm,{...e,path:t,type:a.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],m[15]=a,m[16]=x.data,m[17]=x.isPlaceholderData,m[18]=e,m[19]=t):t=m[19];let n=t;d=n.length>0?n:null}let _=d;return m[20]!==g.isPlaceholderData||m[21]!==_?(u={suggestions:_,stale:g.isPlaceholderData},m[20]=g.isPlaceholderData,m[21]=_,m[22]=u):u=m[22],u}(e?.category==="files"?e:null),u=function(e){let t,n=(0,o.c)(5),{ssoOrganizations:r}=(0,y.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==e||n[1]!==r){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],a=r.filter(t).slice(0,10).map(tI),n[0]=e,n[1]=r,n[2]=a}else a=n[2];t=a}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case void 0:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[0]=e):e=t[0],e}case"categories":{let e;return t[1]!==n?(e={suggestions:n,stale:!1},t[1]=n,t[2]=e):e=t[2],e}case"repositories":return a;case"issues":return l;case"agents":{let e;return t[3]!==r?(e={suggestions:r,stale:!1},t[3]=r,t[4]=e):e=t[4],e}case"discussions":return c;case"pulls":return s;case"files":return d;case"sso-orgs":{let e;return t[5]!==u?(e={suggestions:u,stale:!1},t[5]=u,t[6]=e):e=t[6],e}}}(C);if(g[2]!==v||g[3]!==C?(r={query:C,onShowAgentsDialog:v},g[2]=v,g[3]=C,g[4]=r):r=g[4],!function(e){let t,n,r=(0,o.c)(12),{query:a,onShowAgentsDialog:i}=e,l=a?.category==="agents",{availableAgents:s,loading:c,disabled:d}=(0,et.JE)(l);r[0]!==l||r[1]!==s?.length||r[2]!==d||r[3]!==c||r[4]!==i?(t=()=>{l&&!c&&(d?i("agents-not-supported"):s?.length||i("no-agents-available"))},r[0]=l,r[1]=s?.length,r[2]=d,r[3]=c,r[4]=i,r[5]=t):t=r[5],r[6]!==l||r[7]!==s||r[8]!==d||r[9]!==c||r[10]!==i?(n=[l,c,s,d,i],r[6]=l,r[7]=s,r[8]=d,r[9]=c,r[10]=i,r[11]=n):n=r[11],(0,p.useEffect)(t,n)}(r),!S){let e;return g[5]!==x?(e=(0,i.jsx)("div",{children:x}),g[5]=x,g[6]=e):e=g[6],e}g[7]!==b||g[8]!==_||g[9]!==C?(a=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;(0,l.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:b,suggestion:n});let r=null!==n&&C?.category!=="agents"?D.Q.parse(n):void 0;if(r&&_(r),"object"!=typeof t||null!==t.value)return;let a=/^open-link:(.+)$/.exec(t.key);if(a){j(null),window.open(a[1],"_blank");return}switch(C?.category){case"categories":ta.is(t.key)&&j(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?j({category:"sso-orgs",filter:""}):C.nextCategory&&j({category:C.nextCategory,filter:"",repository:t.key})}},g[7]=b,g[8]=_,g[9]=C,g[10]=a):a=g[10];let k=a;g[11]===Symbol.for("react.memo_cache_sentinel")?(s=e=>j(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)}),g[11]=s):s=g[11];let E=s;g[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>j(null),g[12]=c):c=g[12];let A=c;return g[13]!==C?(d=C&&function(e){switch(e.category){case"categories":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${tn[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return tn[e.category];case"discussions":case"issues":case"pulls":case"files":return`${tn[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(C)||void 0,g[13]=C,g[14]=d):d=g[14],g[15]!==x||g[16]!==k||g[17]!==I||g[18]!==d?(u=(0,i.jsx)(tt.a,{fullWidth:!0,suggestions:I,triggers:tN,tabInsertsSuggestions:!1,onHideSuggestions:A,onShowSuggestions:E,onSelectSuggestion:k,suggestionsPlacement:"above",title:d,asMenu:!0,children:x}),g[15]=x,g[16]=k,g[17]=I,g[18]=d,g[19]=u):u=g[19],g[20]!==N?(h=N&&(0,i.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),g[20]=N,g[21]=h):h=g[21],g[22]!==u||g[23]!==h?(f=(0,i.jsxs)(i.Fragment,{children:[u,h]}),g[22]=u,g[23]=h,g[24]=f):f=g[24],f}function tR(){return"undefined"!=typeof document}try{tk.displayName||(tk.displayName="ChatInputAutocomplete")}catch{}let tE={container:"ChatInput-module__container--qmP6j",input:"ChatInput-module__input--HalEQ",containerShadow:"ChatInput-module__containerShadow--LEVoB",clicked:"ChatInput-module__clicked--u0igo",attachments:"ChatInput-module__attachments--Fv007",inputContainer:"ChatInput-module__inputContainer--cpjba",inputPreview:"ChatInput-module__inputPreview--Fdwj0",toolbar:"ChatInput-module__toolbar--Kv3Gl",toolbarLeft:"ChatInput-module__toolbarLeft--Hchfy",toolbarRight:"ChatInput-module__toolbarRight--vwskE",containerSmall:"ChatInput-module__containerSmall--NfPkF",CommandIconButton:"ChatInput-module__CommandIconButton--lxm7H"};var tA=n(16378),tT=n(6224);let tL=(0,p.forwardRef)(function(e,t){let n,r,a,l,s,c=(0,o.c)(14),{text:d}=e;c[0]!==d?(n=(0,tA._)(d),c[0]=d,c[1]=n):n=c[1];let{availableAgents:u}=(0,et.JE)(n);c[2]!==u?(r=void 0===u?[]:u,c[2]=u,c[3]=r):r=c[3];let m=r,{currentReferences:h}=(0,y.Pk)(),f=(0,O.b)(),g=(0,P.l)().use(M.U,{references:h,agents:m}).parse(d),x=(0,tA.O)(g),_=(0,p.useRef)(x);c[4]!==h||c[5]!==f||c[6]!==x?(a=function(){for(let e of _.current)if(!x.has(e)){let t=h.find(t=>(0,v.Vb)(t)===e);t&&f.removeReference(t)}_.current=x},c[4]=h,c[5]=f,c[6]=x,c[7]=a):a=c[7],(0,p.useEffect)(a),c[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,I.G)("copilot-chat-input-textarea-preview"),c[8]=l):l=c[8];let b=g.children.map(tP);return c[9]!==t||c[10]!==b||c[11]!==l||c[12]!==tE.inputPreview?(s=(0,i.jsx)("div",{id:"copilot-chat-textarea-preview",...l,"aria-hidden":!0,className:tE.inputPreview,ref:t,role:"presentation",children:b}),c[9]=t,c[10]=b,c[11]=l,c[12]=tE.inputPreview,c[13]=s):s=c[13],s});try{tL.displayName||(tL.displayName="ChatInputPreview")}catch{}function tP(e,t){switch(e.type){case"text":return e.value;case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,i.jsx)("span",{className:tT.A.mention,...(0,I.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,i.jsx)("span",{className:tT.A.mention,children:e.value},t)}}var tF=n(69676),tO=n(82678),tD=n(7730),tM=n(57448);let tB={container:"ChatInputReferences-module__container--bNybl",attachmentsList:"ChatInputReferences-module__attachmentsList--mEJpJ",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--DONiv",loading:"ChatInputReferences-module__loading--kAJlw",divider:"ChatInputReferences-module__divider--k8d6S",menuButton:"ChatInputReferences-module__menuButton--IVLqN",functionLoading:"ChatInputReferences-module__functionLoading--Oimop",convertToFileButton:"ChatInputReferences-module__convertToFileButton--hnPn2",hoveringDismissConvertToFile:"ChatInputReferences-module__hoveringDismissConvertToFile--OLdgF",convertToFileButtonContent:"ChatInputReferences-module__convertToFileButtonContent--CdiQX"};var t$=n(51609);let tU=(0,p.memo)(e=>{let t,n,r,a,l,s,d,h,f,g,x,_,S,w,C,j,N,k=(0,o.c)(45),{className:E,isLoading:T,returnFocusRef:L,tokenSize:P,onSelectReference:F,getReferenceVersion:D,showConvertToFileText:M,onConvertToFile:B,onConvertToFileDismiss:$}=e,U=void 0===P?"medium":P,{currentReferences:q}=(0,y.Pk)(),V=(0,O.b)(),W=(0,p.useRef)(null),H=(0,tD.g)(W),[G,K]=(0,p.useState)(!1);k[0]!==q?(n=(0,v.rT)(q),k[0]=q,k[1]=n):n=k[1],t=n;let Q=(0,p.useRef)(null);k[2]===Symbol.for("react.memo_cache_sentinel")?(r={containerRef:Q,focusableElementFilter:tz,bindKeys:tF.z0.ArrowHorizontal|tF.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},k[2]=r):r=k[2],k[3]!==t?(a=[t],k[3]=t,k[4]=a):a=k[4],(0,tO.G)(r,a),k[5]===Symbol.for("react.memo_cache_sentinel")?(l=[],k[5]=l):l=k[5];let J=(0,p.useRef)(l),X=(e,t)=>{let n=J.current[t+1]??J.current[t-1]??L.current;n?.focus(),V.removeReference(e)};k[6]!==V||k[7]!==L?(s=()=>{setTimeout(()=>L.current?.focus()),V.clearCurrentReferences()},k[6]=V,k[7]=L,k[8]=s):s=k[8];let Z=s,Y=(0,p.useRef)(t);k[9]!==t?(d=()=>{if(Y.current.length<t.length){let e=t.find(e=>!Y.current.find(t=>(0,v.x_)(t,e))),n=e?t.indexOf(e):-1;J?.current?.[n]?.scrollIntoView({behavior:"smooth",inline:"end"})}Y.current=t},h=[t],k[9]=t,k[10]=d,k[11]=h):(d=k[10],h=k[11]),(0,z.N)(d,h),k[12]!==$?(f=()=>{K(!1),$?.()},k[12]=$,k[13]=f):f=k[13];let ee=f,et=(0,p.useId)();k[14]!==ee||k[15]!==M?(g=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),M&&ee())},k[14]=ee,k[15]=M,k[16]=g):g=k[16];let en=g;if(0===t.length&&!T&&!M)return null;k[17]!==E?(x=(0,b.$)(E,tB.container),k[17]=E,k[18]=x):x=k[18];let er=H&&tB.scrolledToEnd,ea=T&&tB.loading;k[19]!==er||k[20]!==ea?(_=(0,b.$)(tB.attachmentsList,er,ea),k[19]=er,k[20]=ea,k[21]=_):_=k[21],k[22]!==et||k[23]!==ee||k[24]!==G||k[25]!==B||k[26]!==en||k[27]!==M||k[28]!==U?(S=M&&(0,i.jsx)(A.Q,{onClick:B,leadingVisual:R.FileIcon,className:(0,b.$)(tB.convertToFileButton,G&&tB.hoveringDismissConvertToFile),"aria-describedby":et,onKeyDown:en,children:(0,i.jsxs)("div",{className:tB.convertToFileButtonContent,children:["Convert to file",(0,i.jsx)(t$.lh,{size:U,onRemove:ee,descriptionId:et,onMouseOver:()=>K(!0),onMouseLeave:()=>K(!1)})]})}),k[22]=et,k[23]=ee,k[24]=G,k[25]=B,k[26]=en,k[27]=M,k[28]=U,k[29]=S):S=k[29];let ei=t.map((e,t)=>"repository"===e.type?(0,i.jsx)(tq,{reference:e,ref:e=>{J.current[t]=e},"data-index":t,size:U,onRemove:()=>X(e,t),onClick:F,getReferenceVersion:D},(0,v.Vb)(e)):(0,i.jsx)(t$.BR,{reference:e,ref:e=>{J.current[t]=e},"data-index":t,size:U,onRemove:()=>X(e,t),onClick:F,getReferenceVersion:D},(0,v.Vb)(e)));return k[30]!==T?(w=T&&(0,i.jsxs)("div",{className:tB.functionLoading,...(0,I.G)("loading-indicator"),children:[(0,i.jsx)(u.A,{size:"small"}),"Retrieving\u2026"]}),k[30]=T,k[31]=w):w=k[31],k[32]!==_||k[33]!==S||k[34]!==ei||k[35]!==w?(C=(0,i.jsxs)("div",{className:_,ref:W,children:[S,ei,w]}),k[32]=_,k[33]=S,k[34]=ei,k[35]=w,k[36]=C):C=k[36],k[37]!==Z||k[38]!==t.length||k[39]!==U?(j=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:tB.divider}),(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(eg.K,{icon:R.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tB.menuButton,size:U})}),(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsx)(m.l,{children:(0,i.jsxs)(m.l.Item,{onSelect:Z,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(R.TrashIcon,{})}),"Remove attachments"]})})})]})]}),k[37]=Z,k[38]=t.length,k[39]=U,k[40]=j):j=k[40],k[41]!==x||k[42]!==C||k[43]!==j?(N=(0,i.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:x,ref:Q,children:[C,j]}),k[41]=x,k[42]=C,k[43]=j,k[44]=N):N=k[44],N});tU.displayName="ChatInputReferences";let tq=(0,p.forwardRef)(function(e,t){let n,r,a,l=(0,o.c)(8),s=e.reference,c=(0,y.pn)(tV),d=`${s.ownerLogin}/${s.name}`,[u,m]=(0,tM.vn)(d),h=(0,p.useRef)(!1),f=u.code===tM.W5.Unindexed||u.docs===tM.W5.Unindexed;return l[0]!==c||l[1]!==f||l[2]!==m?(n=function(){!h.current&&f&&c&&(h.current=!0,m())},r=[c,f,m],l[0]=c,l[1]=f,l[2]=m,l[3]=n,l[4]=r):(n=l[3],r=l[4]),(0,p.useEffect)(n,r),l[5]!==e||l[6]!==t?(a=(0,i.jsx)(t$.BR,{ref:t,...e}),l[5]=e,l[6]=t,l[7]=a):a=l[7],a});try{tq.displayName||(tq.displayName="RepoReferenceToken")}catch{}try{tq.displayName||(tq.displayName="RepoReferenceToken")}catch{}function tz(e){return!e.hasAttribute("aria-hidden")}function tV(e){return e.model&&!e.model.hasLimitedCapabilities}var tW=n(81829),tH=n(97793),tG=n(97665),tK=n(24815),tQ=n(20426),tJ=n(88657);let tX={container:"McpToolsManager-module__container--PHa2N",header:"McpToolsManager-module__header--PXzkx",headerTitle:"McpToolsManager-module__headerTitle--CiuwN",searchInput:"McpToolsManager-module__searchInput--v2pAX",contentArea:"McpToolsManager-module__contentArea--aqxn4",loadingContainer:"McpToolsManager-module__loadingContainer--btAEV",emptyState:"McpToolsManager-module__emptyState--qpgwB",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--PLCEY",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--x7TOI",footer:"McpToolsManager-module__footer--UZmCo",serverName:"McpToolsManager-module__serverName--au45P"},tZ=({anchorRef:e,open:t,onOpenChange:n})=>{let[r,a]=(0,p.useState)(!1),[o,l]=(0,p.useState)(()=>new Set),[s,c]=(0,p.useState)(""),{service:d}=(0,O.b)(),m=(0,tG.jE)(),{data:h,isPending:f,isError:g}=(0,eB.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>d.fetchMCPServers(),placeholderData:e=>e}),y=(0,p.useMemo)(()=>h||[],[h]),x=(0,p.useMemo)(()=>y.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[y,s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ev.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,renderAnchor:()=>(0,i.jsx)(i.Fragment,{}),width:"medium",children:(0,i.jsxs)("div",{className:tX.container,children:[(0,i.jsxs)("div",{className:tX.header,children:[(0,i.jsx)("div",{className:tX.headerTitle,children:"MCP servers"}),(0,i.jsx)(tK.A,{placeholder:"Search by provider",value:s,onChange:e=>c(e.target.value),className:tX.searchInput,leadingVisual:R.SearchIcon})]}),(0,i.jsx)("div",{className:tX.contentArea,children:f?(0,i.jsx)("div",{className:tX.loadingContainer,children:(0,i.jsx)(u.A,{})}):g?(0,i.jsxs)(tJ.E,{children:[(0,i.jsx)(tJ.E.Visual,{children:"\u26A0\uFE0F"}),(0,i.jsx)(tJ.E.Heading,{children:"Error loading tools"})]}):0===y.length?(0,i.jsxs)("div",{className:tX.emptyState,children:[(0,i.jsx)(R.ToolsIcon,{size:24}),(0,i.jsx)("div",{className:tX.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,i.jsx)("div",{className:tX.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,i.jsx)(tQ.G,{"aria-label":"MCP server selection","aria-multiselectable":"true",children:x.map(e=>{let t=o.has(e.id);return(0,i.jsxs)(tQ.G.Item,{id:e.id,onSelect:()=>(e=>{l(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})})(e.id),current:t,"aria-selected":t,children:[(0,i.jsx)(tQ.G.LeadingVisual,{children:(0,i.jsx)("span",{className:tX.serverName,children:e.name})}),e.tools&&e.tools.length>0?(0,i.jsx)(tQ.G.SubTree,{children:e.tools.map(t=>(0,i.jsx)(tQ.G.Item,{id:`${e.id}-${t}`,children:t},t))}):null]},e.id)})})}),(0,i.jsx)("div",{className:tX.footer,children:(0,i.jsx)(A.Q,{variant:"default",leadingVisual:R.PlusIcon,onClick:()=>{a(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,i.jsx)(tH.O,{isOpen:r,onClose:()=>{a(!1)},onServerAdded:()=>{m.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{tZ.displayName||(tZ.displayName="McpToolsManager")}catch{}let tY=()=>{let e,t,n=(0,o.c)(3),[r,a]=(0,p.useState)(!1),l=(0,p.useRef)(null);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(A.Q,{ref:l,leadingVisual:R.SlidersIcon,variant:"invisible","aria-label":"MCP Tools",onClick:()=>a(!0),children:"Tools"}),n[0]=e):e=n[0],n[1]!==r?(t=(0,i.jsxs)(i.Fragment,{children:[e,(0,i.jsx)(tZ,{anchorRef:l,open:r,onOpenChange:a})]}),n[1]=r,n[2]=t):t=n[2],t};try{tY.displayName||(tY.displayName="McpToolMenu")}catch{}var t0=n(47745);function t1(){let e,t,n,r=(0,o.c)(7),a=(0,O.b)(),{usePlanningIntent:l}=(0,y.Pk)();r[0]!==a||r[1]!==l?(e=()=>a.setUsePlanningIntent(!l),r[0]=a,r[1]=l,r[2]=e):e=r[2];let s=e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(R.TasklistIcon,{}),r[3]=t):t=r[3],r[4]!==s||r[5]!==l?(n=(0,i.jsx)(w,{icon:t,isSelected:l,onClick:s,children:"Plan"}),r[4]=s,r[5]=l,r[6]=n):n=r[6],n}try{t1.displayName||(t1.displayName="PlanningIntentToggle")}catch{}var t2=n(79184);let t3=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],t5=e=>{let t,n,r,a,c,d,u,m,h,g,x,S,w,C,j,R,A,W,ee,et,en,er,ea,ei,eo,el,es,ec,ed,eu,em,ep,eh,ef=(0,o.c)(152),eg=(0,y.Pk)(),ey=(0,O.b)();ef[0]!==ey?(t=ey.maxMessagesReached(),ef[0]=ey,ef[1]=t):t=ef[1];let ex=t,[e_,ev]=(0,p.useState)(null),eb="loading"===eg.slashCommandLoading.state,{safeSetTimeout:eS}=(0,E.A)(),{isLicensedLimited:ew}=(0,t2.xR)(),{onSelectReference:eC}=e,ej=(0,p.useRef)(null),eI=(0,p.useRef)(""),eN=(0,p.useRef)(!1),{activeCopilotSpaceId:ek}=(0,_.C)();ef[2]!==e_||ef[3]!==eg.mode?(n=e=>{ej.current=null,eI.current="",eN.current=!1,e_&&(ev(null),void 0!==e&&e&&(0,l.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eg.mode}))},ef[2]=e_,ef[3]=eg.mode,ef[4]=n):n=ef[4];let eR=n,eE=eg.isWaitingOnCopilot||eg.isWaitingOnAttachment||eb;ef[5]!==eR||ef[6]!==e.onSubmit||ef[7]!==e.textAreaRef||ef[8]!==eE?(r={isLoading:eE,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:eR},ef[5]=eR,ef[6]=e.onSubmit,ef[7]=e.textAreaRef,ef[8]=eE,ef[9]=r):r=ef[9];let{typingHasStarted:eA,textAreaRef:eT,textareaPreviewRef:eL,textAreaPreviewContainerRef:eP,text:eF,setText:eO,handleSubmit:eD,handleSubmitToNewThread:eM,handleScroll:eB,handleChange:e$,handleStop:eU,handleFocus:eq}=function(e){let t=(0,y.Pk)(),n=(0,O.b)(),{selectedThreadID:r,mode:a,autoSubmit:i,model:o}=t,{clearPastedFile:c,isLoading:d,onSubmit:u}=e,m=V.Jt.getSavedMessage(r),h=V.Jt.getSavedUserMessageOnError(r),{pathname:f}=(0,s.zy)(),[g,x]=(0,s.ok)(),[_,v]=(0,p.useState)(()=>K(t.mode,f,g)??h??m??""),[b,S]=(0,p.useState)(!1),w=(0,p.useRef)(null),C=e.textAreaRef||w,j=(0,p.useRef)(null),I=(0,p.useRef)(null),N=(0,p.useRef)(0),k=(0,p.useRef)(null),R=(0,p.useRef)(()=>{}),E=(0,p.useRef)(!1),A=(0,G.GF)(t.availableModels),T=(0,p.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,p.useEffect)(()=>{T()},[T]),(0,p.useEffect)(()=>{V.Jt.setSavedMessage(r,_)},[r,_]),(0,z.N)(()=>{let e=0;!function t(){if(!C.current||!I.current||!j.current)return;e++,0===C.current.scrollHeight&&e<10&&setTimeout(t,1),C.current.style.height="0";let n=C.current.scrollHeight,r=Math.min(n,300);j.current.style.height=`${n}px`,C.current.style.height=`${n}px`,I.current.style.height=`${r}px`}()},[_,C,j]);let L=(0,p.useCallback)(()=>{C?.current&&j?.current&&I?.current&&(j.current.scrollTop=C.current.scrollTop,j.current.scrollLeft=C.current.scrollLeft)},[C]),P=(0,p.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),F=(0,p.useCallback)(async e=>{if(S(!1),V.Jt.clearSavedUserMessage(r),V.Jt.clearSavedUserMessageOnError(r),t.defaultRecipient&&!_.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),"assistive"===t.mode&&await H(_,t,n)){(0,l.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:_}),"/new"===_.trim()&&V.Jt.setSavedMessageFast(r,null),v("");return}if(!d){let e=_;if(!e){let[t,r]=n.tryInferMessage(P);if(!t||!r)return;e=r}v(""),await u?.(e)}},[d,n,u,r,P,t,_]),D=(0,p.useCallback)(()=>n.sendMessageToNewThread(r,_,P,t.context,A),[n,r,t.context,P,_,A]);(0,p.useEffect)(()=>{(async()=>{let e=K(a,f,g),t=new URLSearchParams(g),n=t.get("model"),r=!n||n===o.id;e&&r&&!E.current&&(t.delete("prompt"),t.delete("model"),(0,l.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),x(t,{replace:!0}),i&&(E.current=!0,await Promise.resolve(),await F()))})()},[f,g,x,a,i,o,F]);let M=(0,p.useCallback)(e=>{S(!0),C?.current&&(v(e.target.value),c?.(),N.current=0,L())},[L,c,C]),B=(0,p.useCallback)(async()=>{await n.stopStreaming(),null!=r&&(n.startThreadReload(),await new Promise(e=>{k.current=setTimeout(()=>e(r),6e3)}),R.current=await n.fetchMessages(r,!0,!0))},[n,r]);return(0,p.useEffect)(()=>{R.current&&(R.current(),R.current=()=>{})},[t.messages]),(0,p.useEffect)(()=>()=>{k.current&&(clearTimeout(k.current),k.current=null),n.cancelThreadReload(),R.current=()=>{}},[n]),{typingHasStarted:b,textAreaRef:C,textareaPreviewRef:j,textAreaPreviewContainerRef:I,text:_,setText:v,handleSubmit:F,handleSubmitToNewThread:D,handleScroll:L,handleChange:M,handleStop:B,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}}}(r);ef[10]!==e$||ef[11]!==eT?(a={inputRef:eT,fallbackEventHandler:e$},ef[10]=e$,ef[11]=eT,ef[12]=a):a=ef[12];let ez=(0,k.H)(a);ef[13]!==ez||ef[14]!==e.figmaAuthUrl||ef[15]!==eT?(c={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:eT,emitChange:ez},ef[13]=ez,ef[14]=e.figmaAuthUrl,ef[15]=eT,ef[16]=c):c=ef[16];let{replaceUrlWithReferenceMention:eV}=function(e){let t,n,r,a,i,l,s,c,d,u,m,p,h,f=(0,o.c)(37),{figmaAuthUrl:g,textAreaRef:x,emitChange:_}=e,b=(0,O.b)(),{currentReferences:S}=(0,y.Pk)();f[0]!==_||f[1]!==x?(t=(e,t,n)=>{if(!x.current||e===t)return;let r=n?.[0]??0,a=x.current.value.slice(r,n?.[1]),i=a.indexOf(e);for(;i>-1;){let n=i+e.length;_(t,[i+r,n+r]),i=(a=a.replace(e,t)).indexOf(e)}},f[0]=_,f[1]=x,f[2]=t):t=f[2];let w=t;f[3]!==b?(n=e=>{let{itemUrl:t}=e,n=(0,v.Vc)(t);return b.addReference(n,"url-attacher"),b.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),n},f[3]=b,f[4]=n):n=f[4],f[5]!==w||f[6]!==b?(r=(e,t,n)=>{let{parsedReferenceMention:r}=t;b.replaceReference(n,e);let a=D.Q.for(e);if(!a)return;let i=D.Q.stringify(r),o=D.Q.stringify(a);i!==o&&w(i,o)},a=(e,t,n)=>{let{itemUrl:r,parsedReferenceMention:a}=t;b.removeReference(n),w(D.Q.stringify(a),r)},f[5]=w,f[6]=b,f[7]=r,f[8]=a):(r=f[7],a=f[8]),f[9]!==b?(i=()=>{b.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[9]=b,f[10]=i):i=f[10],f[11]!==n||f[12]!==r||f[13]!==a||f[14]!==i?(l={mutationFn:q,onMutate:n,onSuccess:r,onError:a,onSettled:i},f[11]=n,f[12]=r,f[13]=a,f[14]=i,f[15]=l):l=f[15];let C=(0,T.n)(l);f[16]!==b?(s=e=>{let t=(0,v.Vc)(e);return b.addReference(t,"figma-attacher"),b.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),t},c=(e,t,n)=>{b.replaceReference(n,e)},f[16]=b,f[17]=s,f[18]=c):(s=f[17],c=f[18]),f[19]!==g||f[20]!==b?(d=(e,t,n)=>{n&&g&&e instanceof $?b.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:g,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):b.removeReference(n)},f[19]=g,f[20]=b,f[21]=d):d=f[21],f[22]!==b?(u=()=>{b.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[22]=b,f[23]=u):u=f[23],f[24]!==u||f[25]!==s||f[26]!==c||f[27]!==d?(m={mutationFn:U,onMutate:s,onSuccess:c,onError:d,onSettled:u},f[24]=u,f[25]=s,f[26]=c,f[27]=d,f[28]=m):m=f[28];let j=(0,T.n)(m);f[29]!==S||f[30]!==j||f[31]!==w||f[32]!==C||f[33]!==x?(p=e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=D.Q.fromUrl(t);n&&(S.every(e=>!D.Q.refersTo(n,e))&&C.mutate({itemUrl:t,parsedReferenceMention:n}),w(t,D.Q.stringify(n),e));let r=B.exec(t);return r&&(j.mutate(t),w(t,r[1],e)),t},f[29]=S,f[30]=j,f[31]=w,f[32]=C,f[33]=x,f[34]=p):p=f[34];let I=p;return f[35]!==I?(h={replaceUrlWithReferenceMention:I},f[35]=I,f[36]=h):h=f[36],h}(c),{isLoading:eW,addReferenceForMention:eH,addReferencesForMentions:eG}=function(){let e=(0,O.b)(),{currentReferences:t,mode:n}=(0,y.Pk)(),r=(0,T.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],r=await (0,L.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,l.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),a=e=>{t.every(t=>!D.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:a,addReferencesForMentions:e=>{let n=(0,P.l)().use(M.U,{references:t,agents:[]}).parse(e),r=0;(0,F.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,a(e.data.referenceMention))})}}}(),eK=(0,Y.FQ)(),eQ=ek&&eK&&f.W.spacesV3UI,eJ=!!(ek&&eK),eX=eb||eW||eg.isWaitingOnAttachment||!!e.submitDisabled,eZ=0===eF.length;ef[17]!==eU||ef[18]!==eg.mode?(d=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eg.mode}),eU()},ef[17]=eU,ef[18]=eg.mode,ef[19]=d):d=ef[19];let eY=d;ef[20]!==ek||ef[21]!==eR||ef[22]!==eD||ef[23]!==eK||ef[24]!==ey||ef[25]!==e_||ef[26]!==eJ||ef[27]!==eg.mode||ef[28]!==eg.selectedThreadID||ef[29]!==eX?(u=async()=>{if(eX)return;let e=ek?`${ek.owner}/${ek.id}`:"";(0,l.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eg.mode,selectedThreadId:eg.selectedThreadID,copilotSpace:e,fromSpaceUI:eK}),eJ&&await ey.selectPendingThread(ek),e_&&eR(!1),eD()},ef[20]=ek,ef[21]=eR,ef[22]=eD,ef[23]=eK,ef[24]=ey,ef[25]=e_,ef[26]=eJ,ef[27]=eg.mode,ef[28]=eg.selectedThreadID,ef[29]=eX,ef[30]=u):u=ef[30];let e0=u;ef[31]!==ek||ef[32]!==eM||ef[33]!==ey||ef[34]!==eJ||ef[35]!==eX?(m=async()=>{eX||(eJ&&await ey.selectPendingThread(ek),eM())},ef[31]=ek,ef[32]=eM,ef[33]=ey,ef[34]=eJ,ef[35]=eX,ef[36]=m):m=ef[36];let e1=m;ef[37]!==ey||ef[38]!==eg.messages?(h=()=>{let e=eg.messages.findLast(t8)?.id;e&&ey.startEditingMessage(e)},ef[37]=ey,ef[38]=eg.messages,ef[39]=h):h=ef[39];let e2=h,e3=eg.isWaitingOnCopilot?"Copilot is responding\u2026":eg.defaultRecipient?void 0:ex?"Message limit reached. To continue chatting with Copilot, start a new conversation.":e.placeholder?e.placeholder:"How can I help you?";eg.defaultRecipient&&""===eF&&!eA&&eO(`@${eg.defaultRecipient} `);let e5=(0,p.useRef)(null),[e4,e6]=(0,p.useState)(null),[e7,e8]=(0,p.useState)(null);ef[40]!==eg.mode?(g=()=>{(0,l.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eg.mode}),e6(t9)},ef[40]=eg.mode,ef[41]=g):g=ef[41];let e9=g;ef[42]!==ey||ef[43]!==eg.mode||ef[44]!==eg.skillOptions?.deepCodeSearch?(x=()=>{(0,l.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eg.mode}),ey.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eg.skillOptions?.deepCodeSearch})},ef[42]=ey,ef[43]=eg.mode,ef[44]=eg.skillOptions?.deepCodeSearch,ef[45]=x):x=ef[45],eg.skillOptions?.deepCodeSearch;let tt=x,{model:tn}=(0,y.bP)("model"),tr="immersive"===eg.mode&&!!tn.capabilities?.supports?.vision;ef[46]!==ek||ef[47]!==ey||ef[48]!==tn||ef[49]!==eJ||ef[50]!==e.existingFileNames||ef[51]!==tr||ef[52]!==eg?(S=async(t,n,r,a)=>{let i=new J.s(eg,ey),o=new Z.E(ey,e.existingFileNames),l=[];[...t].some(ne)&&!tn.capabilities?.supports?.vision&&(ey.addAmbientError(`The ${tn.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,X.d)("vision_not_supported_for_model",{modelId:tn.id,uploadType:n}));let[s,c]=J.s.getAllowedFiles([...t],tn);if(tr){let e=await i.addImageAttachments(s,n,ek,eJ);e&&l.push(...e)}let d=[];for(let e of c)if(await Z.E.isAttachable(e)){let t=await o.addAttachment(e,r,a);t&&l.push(t)}else d.push(e.type);return tr&&d.length>0&&(0,X.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),l},ef[46]=ek,ef[47]=ey,ef[48]=tn,ef[49]=eJ,ef[50]=e.existingFileNames,ef[51]=tr,ef[52]=eg,ef[53]=S):S=ef[53];let ta=S;ef[54]!==eR||ef[55]!==ta||ef[56]!==e_||ef[57]!==eO||ef[58]!==eg.mode||ef[59]!==eF?(w=async()=>{if(!e_)return;let e=[e_],t=await ta(e,"paste",ej.current||void 0,eI.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await e_.text();eO(eF.replaceAll(e,`@${t[0].name}`)),eR(!1),(0,l.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eg.mode})}},ef[54]=eR,ef[55]=ta,ef[56]=e_,ef[57]=eO,ef[58]=eg.mode,ef[59]=eF,ef[60]=w):w=ef[60];let ti=w;ef[61]!==eR?(C=()=>{eR(!0)},ef[61]=eR,ef[62]=C):C=ef[62];let to=C;ef[63]!==e_||ef[64]!==eg.isWaitingOnAttachment||ef[65]!==eg.mode?(j=()=>{!e_||eg.isWaitingOnAttachment||eN.current||(eN.current=!0,(0,l.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eg.mode}))},R=[e_,eg.isWaitingOnAttachment,eg.mode],ef[63]=e_,ef[64]=eg.isWaitingOnAttachment,ef[65]=eg.mode,ef[66]=j,ef[67]=R):(j=ef[66],R=ef[67]),(0,p.useEffect)(j,R),ef[68]!==eG||ef[69]!==ta||ef[70]!==ey||ef[71]!==e.existingFileNames||ef[72]!==eV||ef[73]!==eS||ef[74]!==eT?(A=t=>{let n=t.clipboardData;if(n?.items){let r=[];for(let t=0;t<n.items.length;t++){let a=n.items[t];if(a){if("file"===a.kind){let e=a.getAsFile();e&&r.push(e)}else if("string"===a.kind&&["text","text/plain"].includes(a.type)){let t=n.getData(a.type);if(t.length>1e3&&t.length<=Z.E.getAttachmentSizeLimit())eS(()=>{eN.current=!1;let n=new File([t],"",{type:Z.x}),r=new Z.E(ey,e.existingFileNames);ev(n),ej.current=r.generateFileName(t,n.type).then(e=>eI.current=e)},1);else{eG(t);let e=eT.current?.selectionStart??0;setTimeout(()=>eV([e,e+t.length]));return}}}}r.length>0&&(t.preventDefault(),ta(r,"paste"))}},ef[68]=eG,ef[69]=ta,ef[70]=ey,ef[71]=e.existingFileNames,ef[72]=eV,ef[73]=eS,ef[74]=eT,ef[75]=A):A=ef[75];let tl=A;ef[76]!==ta?(W=e=>{ta(e,"drag")},ef[76]=ta,ef[77]=W):W=ef[77];let ts=W,tc=e.isStreaming||eg.isWaitingOnCopilot,td=tc?eY:void 0,tu=eZ?e2:void 0;ef[78]!==e9||ef[79]!==e0||ef[80]!==e1||ef[81]!==tt||ef[82]!==td||ef[83]!==tu?(et={"github:cancel":td,"copilot-chat:send-message":e0,"copilot-chat:send-message-new-conversation":e1,"copilot-chat:add-attachment":e9,"copilot-chat:edit-last-message":tu,"copilot-chat:deep-codesearch":tt},ef[78]=e9,ef[79]=e0,ef[80]=e1,ef[81]=tt,ef[82]=td,ef[83]=tu,ef[84]=et):et=ef[84],ee=et;let tm="small"===e.size,tp=!e.hideShadow;ef[85]!==tm||ef[86]!==tp?(en=(0,b.$)(tE.container,{[tE.containerSmall]:tm,[tE.containerShadow]:tp}),ef[85]=tm,ef[86]=tp,ef[87]=en):en=ef[87];let th="small"===e.size?"small":"medium",tf=!!e_&&!eg.isWaitingOnAttachment;ef[88]!==ti||ef[89]!==to||ef[90]!==eW||ef[91]!==eC||ef[92]!==e.getReferenceVersion||ef[93]!==th||ef[94]!==tf?(er=(0,i.jsx)(tU,{className:tE.attachments,returnFocusRef:e5,tokenSize:th,isLoading:eW,onSelectReference:eC,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:tf,onConvertToFile:ti,onConvertToFileDismiss:to}),ef[88]=ti,ef[89]=to,ef[90]=eW,ef[91]=eC,ef[92]=e.getReferenceVersion,ef[93]=th,ef[94]=tf,ef[95]=er):er=ef[95];let tg=ex||e.disabled;ef[96]===Symbol.for("react.memo_cache_sentinel")?(ea=(0,I.G)("copilot-chat-input-textarea"),ef[96]=ea):ea=ef[96],ef[97]!==e$||ef[98]!==eq||ef[99]!==tl||ef[100]!==eB||ef[101]!==e3||ef[102]!==tg||ef[103]!==eF||ef[104]!==eT?(ei=(0,i.jsx)("textarea",{autoFocus:!0,id:Q.wg,className:tE.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:tl,ref:eT,onScroll:eB,onChange:e$,onFocus:eq,placeholder:e3,value:eF,"data-react-autofocus":!0,disabled:tg,...ea}),ef[97]=e$,ef[98]=eq,ef[99]=tl,ef[100]=eB,ef[101]=e3,ef[102]=tg,ef[103]=eF,ef[104]=eT,ef[105]=ei):ei=ef[105],ef[106]!==eH||ef[107]!==ei?(eo=(0,i.jsx)(tk,{onSelectReference:eH,onShowAgentsDialog:e6,children:ei}),ef[106]=eH,ef[107]=ei,ef[108]=eo):eo=ef[108],ef[109]!==eF||ef[110]!==eL?(el=(0,i.jsx)(tL,{text:eF,ref:eL}),ef[109]=eF,ef[110]=eL,ef[111]=el):el=ef[111],ef[112]!==eo||ef[113]!==el||ef[114]!==eP?(es=(0,i.jsxs)(N.tL.LimitKeybindingScope,{commandIds:t3,className:tE.inputContainer,ref:eP,children:[eo,el]}),ef[112]=eo,ef[113]=el,ef[114]=eP,ef[115]=es):es=ef[115];let ty=eg.skillOptions?.deepCodeSearch,tx=!!e.hideAttachmentButton;return ef[116]!==e9||ef[117]!==ew||ef[118]!==e.extraToolbarLeft||ef[119]!==e.onNewThreadSelected||ef[120]!==e.showMcpToolsButton||ef[121]!==e.showModelPicker||ef[122]!==e.showPlanningToggle||ef[123]!==e.showSpacesSelect||ef[124]!==e.submitButtonLabel||ef[125]!==eg.thirdPartyMcpAllowed||ef[126]!==tc||ef[127]!==eX||ef[128]!==ty||ef[129]!==tx?(ec=(0,i.jsx)(t4,{addAttachment:e9,attachmentButtonRef:e5,deepCodeSearch:ty,hideAttachmentButton:tx,stoppable:tc,submitDisabled:eX,onNewThreadSelected:e.onNewThreadSelected,showModelPicker:e.showModelPicker,isLicensedLimited:ew,extraToolbarLeft:e.extraToolbarLeft,submitButtonLabel:e.submitButtonLabel,showSpacesSelect:e.showSpacesSelect,showPlanningToggle:e.showPlanningToggle,showMcpToolsButton:e.showMcpToolsButton,thirdPartyMcpAllowed:eg.thirdPartyMcpAllowed}),ef[116]=e9,ef[117]=ew,ef[118]=e.extraToolbarLeft,ef[119]=e.onNewThreadSelected,ef[120]=e.showMcpToolsButton,ef[121]=e.showModelPicker,ef[122]=e.showPlanningToggle,ef[123]=e.showSpacesSelect,ef[124]=e.submitButtonLabel,ef[125]=eg.thirdPartyMcpAllowed,ef[126]=tc,ef[127]=eX,ef[128]=ty,ef[129]=tx,ef[130]=ec):ec=ef[130],ef[131]!==en||ef[132]!==er||ef[133]!==es||ef[134]!==ec?(ed=(0,i.jsxs)("form",{className:en,children:[er,es,ec]}),ef[131]=en,ef[132]=er,ef[133]=es,ef[134]=ec,ef[135]=ed):ed=ef[135],ef[136]!==ee||ef[137]!==ed?(eu=(0,i.jsx)(N.tL,{commands:ee,children:ed}),ef[136]=ee,ef[137]=ed,ef[138]=eu):eu=ef[138],ef[139]!==e4||ef[140]!==e$||ef[141]!==e7||ef[142]!==eT?(em=(0,i.jsx)(te,{inputRef:eT,inputOnChange:e$,anchorRef:e5,panel:e4,onPanelChange:e6,initialRepo:e7,onRepoSelect:e8}),ef[139]=e4,ef[140]=e$,ef[141]=e7,ef[142]=eT,ef[143]=em):em=ef[143],ef[144]!==ts||ef[145]!==eQ||ef[146]!==eg.isWaitingOnAttachment?(ep=!eQ&&(0,i.jsx)(tW.A,{onFilesDrop:ts,isUploading:eg.isWaitingOnAttachment}),ef[144]=ts,ef[145]=eQ,ef[146]=eg.isWaitingOnAttachment,ef[147]=ep):ep=ef[147],ef[148]!==eu||ef[149]!==em||ef[150]!==ep?(eh=(0,i.jsxs)(i.Fragment,{children:[eu,em,ep]}),ef[148]=eu,ef[149]=em,ef[150]=ep,ef[151]=eh):eh=ef[151],eh},t4=(0,p.memo)(e=>{let t,n,r,a,l,s,c,d,u,m,p=(0,o.c)(34),{addAttachment:h,attachmentButtonRef:g,deepCodeSearch:y,hideAttachmentButton:x,stoppable:_,submitDisabled:v,onNewThreadSelected:S,showModelPicker:w,isLicensedLimited:C,extraToolbarLeft:I,submitButtonLabel:k,showSpacesSelect:E,showPlanningToggle:T,showMcpToolsButton:L,thirdPartyMcpAllowed:P}=e;return p[0]!==y?(t=f.W.showDeepCodeSearchButton&&(0,i.jsx)(N.N5,{commandId:"copilot-chat:deep-codesearch",icon:R.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,b.$)({[tE.clicked]:y})}),p[0]=y,p[1]=t):t=p[1],p[2]!==h||p[3]!==g||p[4]!==x?(n=!x&&(0,i.jsx)(A.Q,{ref:g,leadingVisual:R.PaperclipIcon,variant:"invisible",onClick:h,"data-testid":"attachment-menu-button",children:"Attach"}),p[2]=h,p[3]=g,p[4]=x,p[5]=n):n=p[5],p[6]!==L||p[7]!==P?(r=f.W.copilotMcp&&L&&P&&(0,i.jsx)(tY,{}),p[6]=L,p[7]=P,p[8]=r):r=p[8],p[9]!==E?(a=f.W.spacesInputMenuSelect&&E&&(0,i.jsx)(j,{}),p[9]=E,p[10]=a):a=p[10],p[11]!==T?(l=f.W.planningAgent&&T&&(0,i.jsx)(t1,{}),p[11]=T,p[12]=l):l=p[12],p[13]!==I||p[14]!==t||p[15]!==n||p[16]!==r||p[17]!==a||p[18]!==l?(s=(0,i.jsxs)("div",{className:tE.toolbarLeft,children:[t,n,r,I,a,l]}),p[13]=I,p[14]=t,p[15]=n,p[16]=r,p[17]=a,p[18]=l,p[19]=s):s=p[19],p[20]!==C||p[21]!==S||p[22]!==w?(c=S&&w&&(0,i.jsx)(t0.Yb,{onNewThreadSelected:S,limited:C}),p[20]=C,p[21]=S,p[22]=w,p[23]=c):c=p[23],p[24]!==_||p[25]!==k||p[26]!==v?(d=_?(0,i.jsx)(t7,{}):(0,i.jsx)(t6,{disabled:v,label:k}),p[24]=_,p[25]=k,p[26]=v,p[27]=d):d=p[27],p[28]!==c||p[29]!==d?(u=(0,i.jsxs)("div",{className:tE.toolbarRight,children:[c,d]}),p[28]=c,p[29]=d,p[30]=u):u=p[30],p[31]!==s||p[32]!==u?(m=(0,i.jsxs)("div",{className:tE.toolbar,children:[s,u]}),p[31]=s,p[32]=u,p[33]=m):m=p[33],m});function t6(e){let t,n=(0,o.c)(3),{disabled:r,label:a}=e,l=a||"Send now";return n[0]!==r||n[1]!==l?(t=(0,i.jsx)(N.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:R.PaperAirplaneIcon,"aria-label":l,disabled:r,tooltipDirection:"n"}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}function t7(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(N.N5,{...(0,I.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:R.SquareFillIcon,tooltipDirection:"n",className:tE.CommandIconButton}),t[0]=e):e=t[0],e}t4.displayName="ChatInputToolbar";try{t5.displayName||(t5.displayName="ChatInput")}catch{}try{t6.displayName||(t6.displayName="SubmitButton")}catch{}try{t7.displayName||(t7.displayName="StopButton")}catch{}function t8(e){return"user"===e.role}function t9(e){return"attachment-types"===e?null:"attachment-types"}function ne(e){return e.type.startsWith("image/")}},81829:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(74848),a=n(21728),i=n(96540);function o(e){e.preventDefault(),e.stopPropagation()}function l(e){return e instanceof DragEvent}var s=n(71315),c=n(12004);let d=e=>{let t,n,i,o,l,s,c,d,u,m,p,h,f,g,y,x,_=(0,a.c)(17);return _[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),n=(0,r.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),_[0]=t,_[1]=n,_[2]=i):(t=_[0],n=_[1],i=_[2]),_[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),l=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),s=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),_[3]=o,_[4]=l,_[5]=s,_[6]=c):(o=_[3],l=_[4],s=_[5],c=_[6]),_[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),p=(0,r.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),_[7]=d,_[8]=u,_[9]=m,_[10]=p):(d=_[7],u=_[8],m=_[9],p=_[10]),_[11]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),_[11]=h):h=_[11],_[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),_[12]=f):f=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),_[13]=g):g=_[13],_[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsxs)("defs",{children:[f,g,(0,r.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),_[14]=y):y=_[14],_[15]!==e?(x=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,n,i,o,l,s,c,u,m,p,d,h,y]}),_[15]=e,_[16]=x):x=_[16],x};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u={overlay:"FullScreenDragOverlay-module__overlay--Q9gow",centeredContent:"FullScreenDragOverlay-module__centeredContent--iAFMy",text:"FullScreenDragOverlay-module__text--oftCM"};function m(e){let t,n,m,p=(0,a.c)(9),{onFilesDrop:h,isUploading:f}=e,g=void 0!==f&&f;p[0]!==g||p[1]!==h?(t=e=>{g||h(e)},p[0]=g,p[1]=h,p[2]=t):t=p[2];let y=t;p[3]!==y?(n={onFilesDrop:y,targetElement:s.XC},p[3]=y,p[4]=n):n=p[4];let{isDragging:x}=function(e){let t,n,r,s=(0,a.c)(6),{onFilesDrop:c,targetElement:d}=e,[u,m]=(0,i.useState)(!1),p=(0,i.useRef)(0);return s[0]!==c||s[1]!==d?(t=()=>{if(!d)return;let e=e=>{l(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(p.current=p.current+1,1===p.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),p.current=p.current-1,p.current<=0&&(p.current=0,m(!1))},n=e=>{if(!l(e))return;e.preventDefault(),e.stopPropagation(),p.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&c(t)};return d.addEventListener("dragover",o),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",n),()=>{d.removeEventListener("dragover",o),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",n)}},n=[c,d],s[0]=c,s[1]=d,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,i.useEffect)(t,n),s[4]!==u?(r={isDragging:u},s[4]=u,s[5]=r):r=s[5],r}(n),_=null;if(g){let e;p[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{size:"large"}),(0,r.jsx)("p",{className:u.text,children:"Uploading files..."})]}),p[5]=e):e=p[5],_=e}else if(x){let e;p[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{}),(0,r.jsx)("p",{className:u.text,children:"Drop files to upload"})]}),p[6]=e):e=p[6],_=e}return _?(p[7]!==_?(m=(0,r.jsx)("div",{className:u.overlay,children:(0,r.jsx)("div",{className:u.centeredContent,children:_})}),p[7]=_,p[8]=m):m=p[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},35673:(e,t,n)=>{n.d(t,{UJ:()=>y,E5:()=>c,Dq:()=>d,Gj:()=>u,f1:()=>m,cB:()=>p,zc:()=>h,Cb:()=>f,hl:()=>g});var r=n(74848),a=n(21728),i=n(16255),o=n(5945),l=n(96540);let s={chatPortalContainer:"PortalContainerUtils-module__chatPortalContainer--Otmle",menuPortalContainer:"PortalContainerUtils-module__menuPortalContainer--D7AeL"},c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",p=()=>{let e,t,n,o=(0,a.c)(3),c=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(c.current,u)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:c,className:s.chatPortalContainer}),o[2]=n):n=o[2],n},h=()=>{let e,t,n,o=(0,a.c)(3),d=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(d.current,c)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:d,className:s.menuPortalContainer}),o[2]=n):n=o[2],n},f=()=>{let e,t,n,o=(0,a.c)(3),s=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(s.current,d)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:s}),o[2]=n):n=o[2],n},g=()=>{let e,t,n,o=(0,a.c)(3),s=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(s.current,m)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:s}),o[2]=n):n=o[2],n},y=e=>{let t,n,i,s,d,u,m=(0,a.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[p,h]=(0,l.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>h(!0),d=[],m[4]=s,m[5]=d):(s=m[4],d=m[5]),(0,l.useEffect)(s,d),!p)return null;let f=i||c;return m[6]!==t||m[7]!==n||m[8]!==f?(u=(0,r.jsx)(o.W.Overlay,{...n,portalContainerName:f,children:t}),m[6]=t,m[7]=n,m[8]=f,m[9]=u):u=m[9],u};try{p.displayName||(p.displayName="ChatPortalContainer")}catch{}try{h.displayName||(h.displayName="MenuPortalContainer")}catch{}try{f.displayName||(f.displayName="MessagesPortalContainer")}catch{}try{g.displayName||(g.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},51609:(e,t,n)=>{n.d(t,{BR:()=>b,lh:()=>j,a_:()=>S});var r,a=n(74848),i=n(21728),o=n(41738),l=n(49851),s=n(38621),c=n(12004),d=n(87330),u=n(19342),m=n(34164),p=n(96540),h=n(25641),f=n(2635),g=n(33592),y=n(23967),x=n(89237);let _={referenceToken:"ReferenceToken-module__referenceToken--WsIyo",small:"ReferenceToken-module__small--JKhUS",loadingName:"ReferenceToken-module__loadingName--tXmXP",name:"ReferenceToken-module__name--nPIg4",trailingVisual:"ReferenceToken-module__trailingVisual--X22Ay",removeButton:"ReferenceToken-module__removeButton--BwDIm",icon:"ReferenceToken-module__icon--YHCrp",openIcon:"ReferenceToken-module__openIcon--SCaYN",closedIcon:"ReferenceToken-module__closedIcon--McXYG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--qLOQA",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--yvGds",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--sVqOV",figmaIcon:"ReferenceToken-module__figmaIcon--lsVAI",nodeIconOuter:"ReferenceToken-module__nodeIconOuter--ooSEn"};var v=n(26100);let b=(0,p.forwardRef)(function(e,t){let n,r,o,l,c,d,y,x,b,w,C,N=(0,i.c)(41),{reference:k,message:R,onClick:E,onRemove:A,size:T,getReferenceVersion:L}=e;N[0]!==A?(n=e=>{A&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),A())},N[0]=A,N[1]=n):n=N[1];let P=n,F=(0,g.b)(),O=(0,f.pn)(I),D=(0,f.A3)("selectedThreadID");N[2]!==O||N[3]!==F||N[4]!==R||N[5]!==E||N[6]!==k||N[7]!==D?(r=e=>{if(!E||(E(k,e),!e.defaultPrevented)){if(!O){if(("issue"===k.type||"pull-request"===k.type||"discussion"===k.type)&&(window.open(k.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(k.type)){let e=D?`/copilot/c/${D}`:"/copilot";e+=`?reference_id=${(0,h.Vb)(k)}`,R&&(e+=`&message_index=${R.messageIndex}`),window.open(e,"_blank");return}["repository","folder","docset","third-party","image","issue","pull-request","loop-node"].includes(k.type)||(e.preventDefault(),F.selectReference(k))}}},N[2]=O,N[3]=F,N[4]=R,N[5]=E,N[6]=k,N[7]=D,N[8]=r):r=N[8];let M=r,B=(0,f.A3)("currentTopic");N[9]!==k||N[10]!==B?(o=S(k,(0,h.P)(B)),N[9]=k,N[10]=B,N[11]=o):o=N[11];let $=o,U=(0,p.useId)();N[12]!==L||N[13]!==k?(l=L?.(k),N[12]=L,N[13]=k,N[14]=l):l=N[14];let q=l;N[15]!==k?(c=(0,h.JP)(k),N[15]=k,N[16]=c):c=N[16];let z="small"===T&&_.small;N[17]!==z?(d=(0,m.$)(_.referenceToken,z),N[17]=z,N[18]=d):d=N[18];let V=A&&U;return N[19]!==$||N[20]!==k.type?(y=$&&(0,a.jsx)($,{size:"small",className:(0,m.$)(_.icon,$===s.IssueOpenedIcon&&_.openIcon,$===s.GitPullRequestIcon&&_.openIcon,$===s.IssueClosedIcon&&_.closedIcon,$===s.GitPullRequestClosedIcon&&_.pullRequestClosedIcon,$===s.GitMergeIcon&&_.pullRequestMergedIcon),"data-testid":"loading"===k.type?"reference-token-loading":void 0}),N[19]=$,N[20]=k.type,N[21]=y):y=N[21],N[22]!==k?(x="loading"===k.type?(0,a.jsx)("span",{className:_.loadingName,children:(0,a.jsx)(u.r,{"aria-hidden":"true"})}):(0,a.jsx)("span",{className:_.name,children:(0,h.z$)(k)}),N[22]=k,N[23]=x):x=N[23],N[24]!==q?(b=void 0!==q&&(0,a.jsx)("span",{className:_.trailingVisual,children:(0,a.jsx)(v.g,{version:q})}),N[24]=q,N[25]=b):b=N[25],N[26]!==U||N[27]!==A||N[28]!==T?(w=A&&(0,a.jsx)(j,{size:T,onRemove:A,descriptionId:U}),N[26]=U,N[27]=A,N[28]=T,N[29]=w):w=N[29],N[30]!==M||N[31]!==P||N[32]!==t||N[33]!==y||N[34]!==x||N[35]!==b||N[36]!==w||N[37]!==c||N[38]!==d||N[39]!==V?(C=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:c,className:d,onKeyDown:P,onClick:M,ref:t,"aria-describedby":V,children:[y,x,b,w]})}),N[30]=M,N[31]=P,N[32]=t,N[33]=y,N[34]=x,N[35]=b,N[36]=w,N[37]=c,N[38]=d,N[39]=V,N[40]=C):C=N[40],C});function S(e,t){switch(e.type){case"figma":return w;case"file":return s.FileIcon;case"folder":return s.FileDirectoryFillIcon;case"file-diff":return s.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&y.Yr.has(e.languageName)?s.BookIcon:s.CodeIcon;case"repository":return s.RepoIcon;case"symbol":return s.CodeSquareIcon;case"docset":return s.BookIcon;case"commit":return s.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return s.GitPullRequestDraftIcon;switch(e.state){case"open":default:return s.GitPullRequestIcon;case"closed":return s.GitPullRequestClosedIcon;case"merged":return s.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return s.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return s.IssueOpenedIcon;case"closed":return s.IssueClosedIcon;case"not_planned":return s.SkipIcon}return;case"draft-issue":return s.IssueDraftIcon;case"discussion":return s.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return o._;else return s.GlobeIcon;return;case"thread-scoped-file":return"language"in e&&y.Yr.has(e.language)?s.MarkdownIcon:s.CodeIcon;case"loop-node":return C;case"loading":return c.A;default:return}}function w(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:_.figmaIconOuter,children:(0,a.jsx)(x._,{className:_.figmaIcon})}),t[0]=e):e=t[0],e}function C(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:_.nodeIconOuter,children:(0,a.jsx)(l.GS,{size:16})}),t[0]=e):e=t[0],e}let j=e=>{let t,n,r,o,l=(0,i.c)(12),{size:c,onRemove:u,descriptionId:m,onMouseOver:p,onMouseLeave:h}=e;return l[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},l[0]=u,l[1]=t):t=l[1],l[2]!==h||l[3]!==p||l[4]!==c||l[5]!==t?(n=(0,a.jsx)(d.K,{tabIndex:-1,"aria-hidden":!0,size:c,icon:s.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:_.removeButton,onMouseOver:p,onMouseLeave:h}),l[2]=h,l[3]=p,l[4]=c,l[5]=t,l[6]=n):n=l[6],l[7]!==m?(r=(0,a.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),l[7]=m,l[8]=r):r=l[8],l[9]!==n||l[10]!==r?(o=(0,a.jsxs)(a.Fragment,{children:[n,r]}),l[9]=n,l[10]=r,l[11]=o):o=l[11],o};try{b.displayName||(b.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{w.displayName||(w.displayName="StylizedFigmaIcon")}catch{}try{C.displayName||(C.displayName="StylizedNodeIcon")}catch{}try{j.displayName||(j.displayName="RemoveReferenceTokenButton")}catch{}function I(e){return"immersive"===e.mode}},87086:(e,t,n)=>{n.d(t,{FZ:()=>j,X1:()=>k});var r,a=n(74848),i=n(21728),o=n(69599),l=n(53419),s=n(33544),c=n(29731),d=n(52446),u=n(79274),m=n(34164),p=n(96540),h=n(40961),f=n(26408),g=n(26875),y=n(25641),x=n(79064),_=n(2635),v=n(33592),b=n(70845),S=n(35673);let w={ActionList:"RepoSelectPanel-module__ActionList--ud9yE",emptyStateMessage:"RepoSelectPanel-module__emptyStateMessage--qQwDm"};var C=n(27844);function j(e){let t,n,r,o,l=(0,i.c)(12),{currentReferences:s}=(0,_.Pk)(),c=(0,v.b)();l[0]!==s?(n=new Set((t=s.filter(N)).map(I)),l[0]=s,l[1]=t,l[2]=n):(t=l[1],n=l[2]);let d=n,[u,m]=(0,p.useState)();l[3]!==c||l[4]!==e||l[5]!==t?(r=async n=>{m(void 0);let r=t.find(e=>e.id===n);if(r)return void c.removeReference(r);let a=await c.service.fetchRepo(n);if(!a.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,y.qS)(a.payload);c.addReference(i,"repoMenu")},l[3]=c,l[4]=e,l[5]=t,l[6]=r):r=l[6];let h=r;return l[7]!==u||l[8]!==e||l[9]!==d||l[10]!==h?(o=(0,a.jsx)(k,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:h,description:"Choose repositories to chat about.",error:u}),l[7]=u,l[8]=e,l[9]=d,l[10]=h,l[11]=o):o=l[11],o}function I(e){return e.id}function N(e){return"repository"===e.type}function k(e){let t,n,r,y,x,v,j,I,N,k,A,T,L,P,F,O,D,M,B,$,U=(0,i.c)(54),{open:q,onOpenChange:z,submitReturnFocusRef:V,cancelReturnFocusRef:W,selectedRepoIds:H,featuredRepoIds:G,onSelectRepo:K,selectionVariant:Q,description:J,error:X,ownerDisplayLogin:Z,includeForks:Y}=e,ee=void 0===G?H:G,{ssoOrganizations:et}=(0,_.Pk)(),[en,er]=(0,p.useState)("");U[0]!==q?(t=()=>{q||er("")},n=[q],U[0]=q,U[1]=t,U[2]=n):(t=U[1],n=U[2]),(0,p.useEffect)(t,n);let{repositories:ea,loading:ei}=(0,f.U)(en,q,void 0,Z,void 0!==Y&&Y);e:{if(ei){r="Loading repositories";break e}if(0===ea.length){r="No repositories found";break e}if(1===ea.length){r="1 repository found";break e}r=`${ea.length} repositories found`}let eo=r;U[3]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{er(e.currentTarget.value)},U[3]=y):y=U[3];let el=y;t:{let e;if(!et){let e;U[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],U[4]=e):e=U[4],x=e;break t}U[5]!==et?(e=et.map(E),U[5]=et,U[6]=e):e=U[6],x=e}let es=x;U[7]!==ee?(v=e=>ee.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",U[7]=ee,U[8]=v):v=U[8];let{featuredRepos:ec,nonFeaturedRepos:ed}=(0,g.O)(ea,v),[eu,em]=(0,p.useState)(!1);U[9]!==K?(j=async e=>{em(!0),await K(e),em(!1)},U[9]=K,U[10]=j):j=U[10];let ep=j;U[11]===Symbol.for("react.memo_cache_sentinel")?(I=(0,c.G)("repo-select-panel"),U[11]=I):I=U[11];let eh=u.X;U[12]!==W.current||U[13]!==z?(N=()=>{(0,h.flushSync)(()=>z(!1)),W.current?.focus(),(0,l.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},U[12]=W.current,U[13]=z,U[14]=N):N=U[14],U[15]!==z||U[16]!==V.current?(k=()=>{(0,h.flushSync)(()=>z(!1)),V.current?.focus()},U[15]=z,U[16]=V.current,U[17]=k):k=U[17];let ef="multiple"===Q?"Select repositories":"Select a repository",eg=es.length>0&&"border-bottom-0";U[18]!==eg?(A=(0,m.$)(eg),U[18]=eg,U[19]=A):A=U[19];let ey=!0===ei||eu;U[20]!==ey?(T=(0,a.jsx)(u.X.SearchInput,{loading:ey,onChange:el,placeholder:"Search repositories","aria-label":"Search repositories"}),U[20]=ey,U[21]=T):T=U[21],U[22]!==A||U[23]!==T?(L=(0,a.jsx)(u.X.Header,{className:A,children:T}),U[22]=A,U[23]=T,U[24]=L):L=U[24],U[25]!==Z||U[26]!==es?(P=(void 0===Z||""===Z)&&!(0,o.G7)("global_sso_banner")&&(0,a.jsx)(s.x,{portalContainerName:S.f1,protectedOrgs:es,redirectURI:R,useFullWidthStyle:!0}),U[25]=Z,U[26]=es,U[27]=P):P=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(F=(0,a.jsx)(S.hl,{}),U[28]=F):F=U[28],U[29]!==X?(O=X&&(0,a.jsx)(u.X.Message,{variant:"error",size:"inline",children:X}),U[29]=X,U[30]=O):O=U[30];let ex=d.l;U[31]!==eo?(D=(0,a.jsx)("div",{className:"sr-only",children:eo}),U[31]=eo,U[32]=D):D=U[32];let e_="initial"===ei?(0,a.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"}):0!==ea.length||ei?(0,a.jsxs)(a.Fragment,{children:[ec?.map(e=>(0,a.jsx)(C.W,{repo:e,onSelect:ep,selected:H.has(e.databaseId)},e.databaseId)),ec&&ed&&(0,a.jsx)(d.l.Divider,{}),ed?.map(e=>(0,a.jsx)(C.W,{repo:e,onSelect:ep,selected:H.has(e.databaseId)},e.databaseId))]}):(0,a.jsx)("div",{className:w.emptyStateMessage,children:(0,a.jsx)(b.O,{delay:750,children:(0,a.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})});return U[33]!==ex||U[34]!==w.ActionList||U[35]!==D||U[36]!==e_?(M=(0,a.jsxs)(ex,{className:w.ActionList,children:[D,e_]}),U[33]=ex,U[34]=w.ActionList,U[35]=D,U[36]=e_,U[37]=M):M=U[37],U[38]!==eh||U[39]!==J||U[40]!==q||U[41]!==Q||U[42]!==N||U[43]!==k||U[44]!==ef||U[45]!==L||U[46]!==P||U[47]!==F||U[48]!==O||U[49]!==M?(B=(0,a.jsxs)(eh,{width:"large",maxHeight:"xlarge",onCancel:N,onSubmit:k,open:q,variant:"modal",selectionVariant:Q,title:ef,description:J,children:[L,P,F,O,M]}),U[38]=eh,U[39]=J,U[40]=q,U[41]=Q,U[42]=N,U[43]=k,U[44]=ef,U[45]=L,U[46]=P,U[47]=F,U[48]=O,U[49]=M,U[50]=B):B=U[50],U[51]!==I||U[52]!==B?($=(0,a.jsx)("div",{...I,children:B}),U[51]=I,U[52]=B,U[53]=$):$=U[53],$}function R(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function E(e){return e.login}try{(r=function(e){let t,n,r,o=(0,i.c)(9),{selectedThreadID:l,currentTopic:s}=(0,_.Pk)(),c=(0,v.b)();o[0]!==c||o[1]!==l?(t=async e=>{x.Jt.setSelectedTopic(l??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},o[0]=c,o[1]=l,o[2]=t):t=o[2];let d=t;return o[3]!==s?(n=new Set(s?[s.id]:[]),o[3]=s,o[4]=n):n=o[4],o[5]!==d||o[6]!==e||o[7]!==n?(r=(0,a.jsx)(k,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),o[5]=d,o[6]=e,o[7]=n,o[8]=r):r=o[8],r}).displayName||(r.displayName="RepoTopicSelectPanel")}catch{}try{j.displayName||(j.displayName="RepoReferencesSelectPanel")}catch{}try{k.displayName||(k.displayName="RepoSelectPanel")}catch{}},27844:(e,t,n)=>{n.d(t,{W:()=>l});var r=n(74848),a=n(21728),i=n(77430),o=n(52446);function l(e){let t,n,l,s,c=(0,a.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:p}=e,{databaseId:h,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==h||c[1]!==d?(t=()=>d(h),c[0]=h,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(n=(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=n):n=c[5],c[6]!==p?(l=p&&(0,r.jsx)(o.l.TrailingVisual,{children:p}),c[6]=p,c[7]=l):l=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==l?(s=(0,r.jsxs)(o.l.Item,{onSelect:t,selected:m,children:[n,g,l]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=n,c[12]=l,c[13]=s):s=c[13],s}try{l.displayName||(l.displayName="RepositoryListItem")}catch{}},26100:(e,t,n)=>{n.d(t,{g:()=>l});var r=n(74848),a=n(21728),i=n(10396);let o={version:"VersionName-module__version--FC1cb"};function l(e){let t,n=(0,a.c)(3),{"data-testid":l,version:s}=e;return n[0]!==l||n[1]!==s?(t=(0,r.jsxs)(i.A,{className:o.version,as:"span","data-testid":l,children:["v",s]}),n[0]=l,n[1]=s,n[2]=t):t=n[2],t}try{l.displayName||(l.displayName="VersionName")}catch{}},89237:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848),a=n(21728);function i(e){let t,n,i,o,l,s=(0,a.c)(8);return s[0]!==e?({className:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),s[3]=i):i=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),s[4]=o):o=s[4],s[5]!==t||s[6]!==n?(l=(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[i,o]}),s[5]=t,s[6]=n,s[7]=l):l=s[7],l}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},70845:(e,t,n)=>{n.d(t,{O:()=>o});var r=n(74848),a=n(21728),i=n(96540);let o=e=>{let t,n,o,l=(0,a.c)(6),{children:s,delay:c,assertive:d}=e,u=void 0===c?500:c,[m,p]=(0,i.useState)(!1);if(l[0]!==u?(t=()=>{p(!1);let e=setTimeout(()=>p(!0),u);return()=>clearTimeout(e)},n=[u,p],l[0]=u,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,i.useEffect)(t,n),!m)return null;let h=void 0!==d&&d?"assertive":"polite";return l[3]!==s||l[4]!==h?(o=(0,r.jsx)("div",{role:"alert","aria-live":h,"aria-atomic":"true",children:s}),l[3]=s,l[4]=h,l[5]=o):o=l[5],o};try{o.displayName||(o.displayName="DelayedComponent")}catch{}},37178:(e,t,n)=>{n.d(t,{O:()=>I});var r=n(74848),a=n(21728),i=n(38621),o=n(75177),l=n(87330),s=n(63557),c=n(55847),d=n(52446),u=n(12004),m=n(30729),p=n(96540);function h(e){let t,n,i,l,s=(0,a.c)(5),{children:c}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},s[1]=n):n=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column"},s[2]=i):i=s[2],s[3]!==c?(l=(0,r.jsx)(o.A,{sx:t,children:(0,r.jsx)(o.A,{sx:n,children:(0,r.jsx)(o.A,{sx:i,children:c})})}),s[3]=c,s[4]=l):l=s[4],l}function f(e){let t,n,c,d,u,m=(0,a.c)(9),{children:p,onDismiss:h}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},m[0]=t):t=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},m[1]=n):n=m[1],m[2]!==p?(c=(0,r.jsx)(o.A,{sx:n,children:p}),m[2]=p,m[3]=c):c=m[3],m[4]!==h?(d=h&&(0,r.jsx)(l.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:h,variant:"invisible",sx:{flexShrink:0}}),m[4]=h,m[5]=d):d=m[5],m[6]!==c||m[7]!==d?(u=(0,r.jsxs)(s.A,{as:"h3",sx:t,children:[c,d]}),m[6]=c,m[7]=d,m[8]=u):u=m[8],u}function g(e){let t,n,i=(0,a.c)(3),{children:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},i[0]=t):t=i[0],i[1]!==l?(n=(0,r.jsx)(o.A,{sx:t,children:l}),i[1]=l,i[2]=n):n=i[2],n}function y(e){let t,n,o,l,s,d,u=(0,a.c)(11),{children:h,title:f,initiallyOpen:g}=e,[y,_]=(0,p.useState)(g??!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>_(x),u[0]=t):t=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},u[1]=n):n=u[1];let v=y?i.ChevronDownIcon:i.ChevronRightIcon;u[2]===Symbol.for("react.memo_cache_sentinel")?(o={mr:2},u[2]=o):o=u[2],u[3]!==v?(l=(0,r.jsx)(m.A,{icon:v,sx:o}),u[3]=v,u[4]=l):l=u[4],u[5]!==l||u[6]!==f?(s=(0,r.jsxs)(c.Q,{onClick:t,sx:n,children:[l,f]}),u[5]=l,u[6]=f,u[7]=s):s=u[7];let b=y&&h;return u[8]!==s||u[9]!==b?(d=(0,r.jsxs)(r.Fragment,{children:[s,b]}),u[8]=s,u[9]=b,u[10]=d):d=u[10],d}function x(e){return!e}function _(e){let t,n,i=(0,a.c)(3),{children:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},i[0]=t):t=i[0],i[1]!==l?(n=(0,r.jsx)(o.A,{sx:t,children:l}),i[1]=l,i[2]=n):n=i[2],n}function v(e){let t,n,l,s,d,u,p,h=(0,a.c)(14),{direction:f,onExpand:g}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},h[0]=t):t=h[0],h[1]!==f?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===f?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},h[1]=f,h[2]=n):n=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(l={display:"flex",alignItems:"center"},h[3]=l):l=h[3];let y="below"===f?i.FoldDownIcon:i.FoldUpIcon;return h[4]===Symbol.for("react.memo_cache_sentinel")?(s={mr:2},h[4]=s):s=h[4],h[5]!==y?(d=(0,r.jsx)(m.A,{icon:y,sx:s}),h[5]=y,h[6]=d):d=h[6],h[7]!==f||h[8]!==d?(u=(0,r.jsxs)(o.A,{sx:l,children:[d,"Show content ",f]}),h[7]=f,h[8]=d,h[9]=u):u=h[9],h[10]!==g||h[11]!==n||h[12]!==u?(p=(0,r.jsx)(c.Q,{onClick:g,sx:n,children:u}),h[10]=g,h[11]=n,h[12]=u,h[13]=p):p=h[13],p}function b(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(d.l.GroupHeading,{as:"h3",children:"Reference details"}),i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(d.l,{children:(0,r.jsxs)(d.l.Group,{children:[t,o]})}),i[1]=o,i[2]=n):n=i[2],n}function S(e){let t,n,i=(0,a.c)(6),{children:o,href:l,icon:s}=e;return i[0]!==s?(t=(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(m.A,{icon:s})}),i[0]=s,i[1]=t):t=i[1],i[2]!==o||i[3]!==l||i[4]!==t?(n=(0,r.jsxs)(d.l.LinkItem,{href:l,children:[t,o]}),i[2]=o,i[3]=l,i[4]=t,i[5]=n):n=i[5],n}function w(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(o.A,{sx:e,children:[(0,r.jsx)(u.A,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function C(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.A,{sx:e,children:(0,r.jsx)(o.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function j(e){let t,n=(0,a.c)(4),{children:i,detailsError:o,detailsLoading:l}=e;return n[0]!==i||n[1]!==o||n[2]!==l?(t=o?(0,r.jsx)(C,{}):l?(0,r.jsx)(w,{}):(0,r.jsx)(r.Fragment,{children:i}),n[0]=i,n[1]=o,n[2]=l,n[3]=t):t=n[3],t}let I={Frame:h,Header:f,Body:j,Content:_,CollapsibleSubsection:y,ContentExpander:v,Details:b,DetailLink:S,SectionDivider:g};try{h.displayName||(h.displayName="Frame")}catch{}try{f.displayName||(f.displayName="Header")}catch{}try{g.displayName||(g.displayName="SectionDivider")}catch{}try{y.displayName||(y.displayName="CollapsibleSubsection")}catch{}try{_.displayName||(_.displayName="Content")}catch{}try{v.displayName||(v.displayName="ContentExpander")}catch{}try{b.displayName||(b.displayName="Details")}catch{}try{S.displayName||(S.displayName="DetailLink")}catch{}try{w.displayName||(w.displayName="Loading")}catch{}try{C.displayName||(C.displayName="Error")}catch{}try{j.displayName||(j.displayName="Body")}catch{}},41738:(e,t,n)=>{n.d(t,{_:()=>m,I:()=>d});var r=n(74848),a=n(21728),i=n(75177),o=n(84511),l=n(81246),s=n(37178);let c={"bing-icon":"WebSearchReferencePreview-module__bing-icon--lhPED"};function d(e){let t,n,c,d,p,h,f,g,y,x,_,v=(0,a.c)(19),{reference:b,onDismiss:S}=e;v[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,r.jsx)(m,{}),v[0]=t,v[1]=n):(t=v[0],n=v[1]),v[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:0,fontWeight:400,color:"fg.muted"},v[2]=c):c=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(d={fontSize:1,fontWeight:600,color:"fg.default"},v[3]=d):d=v[3];let w=1===b.results.length?" result ":" results ";return v[4]!==b.results.length||v[5]!==w?(p=(0,r.jsxs)(i.A,{sx:t,children:[n,(0,r.jsxs)(o.A,{sx:c,children:[(0,r.jsxs)(o.A,{sx:d,children:[b.results.length," ",w]}),"from Bing search."]})]}),v[4]=b.results.length,v[5]=w,v[6]=p):p=v[6],v[7]!==S||v[8]!==p?(h=(0,r.jsx)(s.O.Header,{onDismiss:S,children:p}),v[7]=S,v[8]=p,v[9]=h):h=v[9],v[10]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},v[10]=f):f=v[10],v[11]!==b.results?(g=b.results.map(u),v[11]=b.results,v[12]=g):g=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)(o.A,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(l.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),v[13]=y):y=v[13],v[14]!==g?(x=(0,r.jsx)(s.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(i.A,{sx:f,children:[g,y]})}),v[14]=g,v[15]=x):x=v[15],v[16]!==x||v[17]!==h?(_=(0,r.jsxs)(s.O.Frame,{children:[h,x]}),v[16]=x,v[17]=h,v[18]=_):_=v[18],_}function u(e,t){return(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(l.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(i.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let m=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:c["bing-icon"]}),t[0]=e):e=t[0],e};try{d.displayName||(d.displayName="WebSearchReferencePreview")}catch{}try{m.displayName||(m.displayName="BingIcon")}catch{}},37238:(e,t,n)=>{n.d(t,{D:()=>_});var r=n(74848),a=n(23657),i=n(84646),o=n(79634),l=n(96459),s=n(96665),c=n(46309),d=n(65029),u=n(24815),m=n(75298),p=n(96540),h=n(51563),f=n(6236);let g={createSpaceDialog:"CreateSpaceDialog-module__createSpaceDialog--YECfV",textAreaWrapper:"CreateSpaceDialog-module__textAreaWrapper--Y5Mtu"};var y=n(44956),x=n(53419);function _({closeDialog:e}){let t=(0,l.Z)(),n=(0,p.useRef)(null),{name:_,setName:b,defaultName:S}=(0,i.AV)(),[w,C]=(0,p.useState)(""),[j,I]=(0,p.useState)(null),[N,k]=(0,p.useState)({}),{upsertCopilotSpace:R,isPending:E}=(0,h.$)(),{copilotSpacesConfig:{maxDescriptionLength:A}}=(0,o.X)(),T=(0,p.useCallback)(e=>{let t={...N};for(let n of e)t[n]&&delete t[n];k(t)},[N]),L=(0,p.useCallback)(e=>I(e),[]);(0,p.useEffect)(()=>{n.current&&_===S&&n.current.select()},[_,S]),(0,p.useEffect)(()=>{(0,x.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]);let P=async()=>{if(!E)try{let e=await R({name:_,description:w,ownerId:j?.id,ownerType:j?.type});k({});let n=(0,a.Cb)(e);return t(n)}catch(e){k(e??{})}},F=()=>{e()};return(0,r.jsx)(s.l,{position:{narrow:"fullscreen"},title:"New Space",onClose:e,width:"large","aria-label":"New Space",className:g.createSpaceDialog,renderFooter:()=>(0,r.jsx)(y.m,{onCancel:F,onSave:P,isLoading:E,disabled:!j}),children:(0,r.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await P()},children:(0,r.jsxs)(c.B,{children:[(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!0,children:"Name"}),(0,r.jsx)(u.A,{ref:n,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:_,onChange:e=>{b(e.target.value),T(["name","slug"])}}),N.name?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Name ",N.name]})}):N.slug?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsx)("span",{children:a.j0})}):null]}),(0,r.jsx)(f.E,{onSelect:L,required:!0,showCaption:!1}),(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!1,children:"Description"}),(0,r.jsx)(m.Ay,{block:!0,name:"description",value:w,rows:3,resize:"vertical",className:g.textAreaWrapper,onChange:e=>{C(e.target.value),T(["description"])}}),N.description?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Description ",N.description]})}):(0,r.jsx)(v,{text:w,promptCharLimit:A})]})]})})})}function v({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,r.jsxs)(r.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)(d.A.Validation,{variant:"error",children:a}):(0,r.jsx)(d.A.Caption,{children:a})})}try{_.displayName||(_.displayName="CreateSpaceDialog")}catch{}try{v.displayName||(v.displayName="CharacterCount")}catch{}},19566:(e,t,n)=>{n.d(t,{Q:()=>eC});var r=n(74848),a=n(87330),i=n(96665),o=n(46309),l=n(65029),s=n(55847),c=n(69410),d=n(38621),u=n(96540),m=n(97564),p=n(54030),h=n(6665),f=n(19189),g=n(25556),y=n(34535),x=n(96459),_=n(20426),v=n(87826),b=n(75177),S=n(12004),w=n(30729),C=n(96379),j=n(65556);function I(e,t,n){let r=[];for(let a of t)if(a.startsWith(e)){let t=a.slice(e.length+1),i=t.indexOf("/"),o=i>0?t.slice(0,i):t,l=`${e}/${o}`;if(n&&n.some(e=>e.path===l))continue;let s={items:[],data:{contentType:l===a?"file":"directory",name:o,path:l,isClientOnly:!0}};r.push(s)}return r}let N={checkbox:"FileTreePicker-module__checkbox--uY6AK",itemContainer:"FileTreePicker-module__itemContainer--ShYuv",Box:"FileTreePicker-module__Box--RKQKr",Box_1:"FileTreePicker-module__Box_1--usRNW",Octicon:"FileTreePicker-module__Octicon--rINlU",Box_2:"FileTreePicker-module__Box_2--yFodr"};var k=n(53419);function R(e,t){let n=new Set(e);switch(t.type){case"SELECT_FILE":n.add(t.path),(0,k.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:n.size});break;case"DESELECT_FILE":n.delete(t.path),(0,k.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:n.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);(0,k.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e);(0,k.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length})}return n}function E({isActive:e,file:t,onItemSelected:n,getItemUrl:a,selectedItemRef:i,navigate:o,onRenderRow:l,getFileTrailingVisual:s,getFileIcon:c,navigateOnClick:m,isSelected:p}){let{sendRepoClickEvent:f}=(0,h.T)(),x=u.useRef(null),b=(0,y.Z)({focusRowRef:x,mouseRowRef:x}),S="submodule"===t.data.contentType,w=s?.(t.data);(0,u.useEffect)(()=>{e&&x.current&&requestAnimationFrame(()=>{x.current?.scrollIntoView({block:"center"})})},[e]);let C=u.useCallback(e=>{S?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(a(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),f("FILES_TREE.ITEM",{item_path:t.data.path}),m&&o(a(t.data)),e.stopPropagation())},[t,a,S,o,m,n,f]);return l?.(),(0,r.jsxs)(_.G.Item,{ref:x,onSelect:C,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(_.G.LeadingVisual,{children:c?c(t.data):S?(0,r.jsx)(d.FileSubmoduleIcon,{}):(0,r.jsx)(d.FileIcon,{})}),(0,r.jsxs)("div",{className:N.itemContainer,children:[(0,r.jsx)(v.A,{className:N.checkbox,checked:p||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,r.jsx)("span",{ref:i,style:{color:S?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,r.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),b&&(0,r.jsx)(g.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:x,"aria-label":t.data.name,open:!0,direction:"ne"}),!!w?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:w.screenReaderText}),!!w?.trailingVisual&&(0,r.jsx)(_.G.TrailingVisual,{children:w.trailingVisual})]})}let A=u.memo(E),T=u.memo(v.A);function L({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:a,leadingPath:i,onItemSelected:o,getItemUrl:l,getFetchUrl:s,selectedItemRef:c,navigate:d,onRenderRow:m,getFileTrailingVisual:p,getFileIcon:f,navigateOnClick:x,selectedChildren:v,expandedPath:b}){let[S,w]=(0,u.useState)(a),{sendRepoClickEvent:k}=(0,h.T)(),R=u.useRef(null),E=u.useRef(null),A=(0,y.Z)({focusRowRef:E,mouseRowRef:R}),L=u.useMemo(()=>v?.filter(e=>e.startsWith(`${t.data.path}/`)),[v,t.data.path]),P=u.useMemo(()=>(function(e,t){if(!t||0===t.length)return"none";if(t.includes(e.data.path))return"all";let n=e.data.totalCount||0,r=t.filter(t=>t.startsWith(`${e.data.path}/`)).length;return 0===r?"none":r===n?"all":"partial"})(t,v),[t,v]),[F,D,B,$,U,q,z]=function(e,t,n){let[r,a]=u.useState(e.items),[i,o]=u.useState(e.data.totalCount||0),[l,s]=u.useState(!1),[c,d]=u.useState(!1),{safeSetTimeout:m}=(0,j.A)();u.useEffect(()=>{a(e.items)},[e.items]),u.useEffect(()=>{void 0!==e.data.totalCount&&o(e.data.totalCount)},[e.data.totalCount]);let p=u.useCallback(()=>{d(!1)},[]),h=u.useCallback((e,t)=>{let n=e||[...r];a(n.slice(0,100)),m(()=>{a(n),void 0!==t&&o(t)},1)},[r,m]);return[u.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let n=I(e.data.path,r);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?h(n,n.length):(a(n),o(n.length))}}else{let l=n(e.data);d(!1),s(!0);let c=Date.now(),u=await (0,C.lS)(`${l}?noancestors=1`);try{if(u.ok){let n=await u.json(),l=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let a=n.name.slice(0,n.name.lastIndexOf("/")),i=a.indexOf("/")>-1,o={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:a,hasSimplifiedPath:i},l={items:[t],data:o};return(r.set(o.path,l),i)?e(l,{...o},r):l}(t,e,i):t});if(r){let t=e.data.path,a=I(t,r,n.payload.tree.items);for(let e of(l.push(...a),a))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=l,e.data.totalCount=n.payload.tree.totalCount,l.length>100?h(l,n.payload.tree.totalCount):(a(l),o(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}s(!1)},[n,e,t,h]),h,r,l,c,p,i]}(t,()=>{},s),V=i?`${i}/`:"",W=z-B.length;(0,u.useEffect)(()=>{n&&R.current&&requestAnimationFrame(()=>{R.current?.scrollIntoView({block:"center"})})},[n]);let H=u.useCallback(e=>{!e||S||$||U||!(t.items.length>100)||D(),e!==S&&w(e)},[S,$,U,t.items.length,D]),G=u.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&x?(window.open(l(t.data),"_blank"),e.preventDefault()):(o?.(t.data,t),k("FILES_TREE.ITEM",{item_path:t.data.path}),x&&d(l(t.data)),e.stopPropagation())},[t,l,d,x,o,k]);u.useEffect(()=>{a&&!S&&H?.(!0)},[a]),u.useEffect(()=>{0===t.items.length&&S?H?.(!1):!S&&t.autoExpand&&H?.(!0)},[t.items.length]);let K=u.useCallback(e=>{c&&n&&c(e),R.current=e},[c,n]);if(1===t.items.length){let a=t.items[0];if(a&&"directory"===a.data.contentType)return(0,r.jsx)(O,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:V+t.data.name,inheritsActive:n,onItemSelected:o,selectedItemRef:c,getItemUrl:l,directoryNavigateOnClick:x,navigateOnClick:x,getFileTrailingVisual:p,getFileIcon:f,selectedChildren:L,expandedPath:b})}return m?.(),(0,r.jsxs)(_.G.Item,{ref:E,expanded:S,onExpandedChange:H,current:n,onSelect:G,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,r.jsx)(_.G.LeadingVisual,{children:(0,r.jsx)(_.G.DirectoryIcon,{})}),(0,r.jsxs)("div",{className:N.itemContainer,children:[(0,r.jsx)(T,{className:N.checkbox,checked:"all"===P,indeterminate:"partial"===P,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===P?"true":void 0}),(0,r.jsxs)("span",{ref:K,children:[V&&(0,r.jsx)("span",{children:V}),(0,r.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),A&&(0,r.jsx)(g.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:E,"aria-label":`${V}${t.data.name}`,open:!0,direction:"ne"}),(0,r.jsx)(_.G.SubTree,{state:$?"loading":U?"error":"done",children:U?(0,r.jsx)(_.G.ErrorDialog,{onRetry:F,onDismiss:q,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{clientOnlyFilePaths:e,directoryItems:B,onItemSelected:o,selectedItemRef:c,getItemUrl:l,directoryNavigateOnClick:x,navigateOnClick:x,getFileTrailingVisual:p,getFileIcon:f,selectedChildren:L,expandedPath:b}),W>0&&(0,r.jsx)(M,{message:`${W} entries not shown`})]})})]})}let P=u.memo(L,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function F({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:a,onItemSelected:i,selectedItemRef:o,onRenderRow:l,getItemUrl:s,getFileTrailingVisual:c,getFileIcon:d,directoryNavigateOnClick:m,navigateOnClick:p,selectedChildren:h,expandedPath:g}){let y=(0,f.Z)(),_=(0,x.Z)(),v=u.useRef(_),b=u.useRef(i);u.useEffect(()=>{b.current=i,v.current=_},[i,_]);let S=u.useCallback((e,t)=>{b.current?.(e,t)},[]),w=u.useMemo(()=>t.map(t=>{let i=g===t.data.path,u=h?.includes(t.data.path),f=i||g.startsWith(`${t.data.path}/`),x=h?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,r.jsx)(P,{clientOnlyFilePaths:e,isActive:a||i,isAncestorOfActive:f,onItemSelected:S,leadingPath:n,directory:t,getItemUrl:s,getFetchUrl:y.getItemUrl,selectedItemRef:f?o:void 0,navigate:_,onRenderRow:l,navigateOnClick:m,getFileTrailingVisual:c,getFileIcon:d,itemCount:t.items.length,isSelected:u,selectedChildren:x,expandedPath:g},t.data.name):(0,r.jsx)(A,{onItemSelected:S,file:t,isActive:i,getItemUrl:s,selectedItemRef:i?o:void 0,navigate:_,navigateOnClick:p,onRenderRow:l,getFileTrailingVisual:c,getFileIcon:d,isSelected:u},t.data.name)}),[t,g,h,e,a,S,n,s,y.getItemUrl,o,_,l,m,c,d,p]);return(0,r.jsx)(r.Fragment,{children:w})}let O=u.memo(F);function D(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:a,loading:i,onRenderRow:o,getItemUrl:l,getFileTrailingVisual:s,getFileIcon:c,expandedPath:d,onSelectionChange:m}=e,[p,h]=(0,u.useReducer)(R,new Set),f=e.selectedItems||p,g=(0,u.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of g(n))t.add(e);return Array.from(t)},[]),y=(0,u.useCallback)((e,t)=>{let n=t?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};m?m(R(f,n)):h(n)},[m,f]),x=(0,u.useCallback)((e,t)=>{let n=g(e),r=t?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};m?m(R(f,r)):h(r)},[g,m,f]),v=(0,u.useCallback)((e,t)=>{if("directory"===e.contentType){let e=g(t).every(e=>f.has(e));x(t,e)}else y(e.path,f.has(e.path))},[g,x,y,f]),w=(0,u.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(b.A,{onMouseDown:w,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:N.Box,children:i?(0,r.jsxs)("div",{className:N.Box_1,children:[(0,r.jsx)(S.A,{"aria-label":"Loading file tree"}),(0,r.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(_.G,{"aria-label":"Files",children:[a&&(0,r.jsx)(M,{message:"Some files could not be loaded."}),(0,r.jsx)(O,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:v,selectedChildren:f?Array.from(f):[],selectedItemRef:e.selectedItemRef,onRenderRow:o,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:l,getFileTrailingVisual:s,getFileIcon:c,expandedPath:d})]})})})}function M({message:e}){return(0,r.jsxs)(_.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(_.G.LeadingVisual,{children:(0,r.jsx)(w.A,{icon:d.AlertFillIcon,className:N.Octicon})}),(0,r.jsx)("div",{className:N.Box_2,children:e||"Couldn't load."})]})}try{E.displayName||(E.displayName="WrappedFileTreeRow")}catch{}try{A.displayName||(A.displayName="FileTreeRow")}catch{}try{T.displayName||(T.displayName="MemoizedCheckbox")}catch{}try{L.displayName||(L.displayName="WrappedDirectoryTreeRow")}catch{}try{P.displayName||(P.displayName="DirectoryTreeRow")}catch{}try{F.displayName||(F.displayName="WrappedDirectoryContents")}catch{}try{O.displayName||(O.displayName="DirectoryContents")}catch{}try{D.displayName||(D.displayName="FileTreePicker")}catch{}try{M.displayName||(M.displayName="ErrorTreeRow")}catch{}var B=n(87086),$=n(78314),U=n(31078),q=n(53552),z=n(64375),V=n(29731),W=n(7808),H=n(64642),G=n(65787),K=n(25407),Q=n(66108),J=n(94195),X=n(69676),Z=n(82678),Y=n(52446),ee=n(9745),et=n(91385),en=n(70170),er=n(37272),ea=n(71315),ei=n(24815),eo=n(34164);let el={TextInput:"FilesSearchBox-module__TextInput--o9VJM",Box:"FilesSearchBox-module__Box--_nCUu"},es=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:a,className:i,onBlur:o,onFocus:l,onKeyDown:s,onPreload:c,onSearch:m,query:p,searchPlaceholder:f,loading:g,sx:y},x)=>{let{sendRepoClickEvent:_}=(0,h.T)(),[v,b]=u.useState(p),S=u.useRef((0,en.s)(e=>m(e),250));u.useEffect(()=>{b(p)},[p]);let w=p?(0,r.jsx)(ei.A.Action,{onClick:()=>{_("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(ei.A,{autoFocus:ec(),className:(0,eo.$)(i,el.TextInput),ref:x,value:v,onKeyDown:s,onChange:e=>{b(e.target.value),c(),S.current(e.target.value)},sx:y,"aria-label":f||"Go to file","aria-activedescendant":e,role:a?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":a?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:f||"Go to file",loading:""!==p&&g,leadingVisual:d.SearchIcon,trailingAction:w,trailingVisual:w?void 0:()=>(0,r.jsx)(er.E,{children:(0,r.jsx)("div",{className:el.Box,children:(0,r.jsx)("kbd",{children:"t"})})}),onFocus:e=>{c(),e.target.select(),l?.(e)},onBlur:o,onClick:()=>_("FILE_TREE.SEARCH_BOX")})});function ec(){return"1"===new URLSearchParams(ea.fV.search).get("search")}es.displayName="FilesSearchBox";let ed={Box:"FileResultsList-module__Box--cUmDY",ActionList:"FileResultsList-module__ActionList--kDNEZ",FilesSearchBox:"FileResultsList-module__FilesSearchBox--KW9Zl",HighlightMatch:"FileResultsList-module__HighlightMatch--Jy_cG",Octicon:"FileResultsList-module__Octicon--PvMf4"},eu={excludeDirectories:!1,excludeSeeAllResults:!1};function em({actionListSx:e,additionalResults:t,className:n,commitOid:a,config:i=eu,findFileWorkerPath:o,getItemUrl:l,onRenderRow:s,onItemSelected:d,searchBoxRef:m,sx:g}){let{excludeDirectories:y,excludeSeeAllResults:_}=i,{query:v,setQuery:S}=(0,U.JS)(),w=(0,$.t)(),C=u.useRef(null),j=m??C,[I,N]=u.useState(v.length>0),[k,R]=u.useState(!!v),{list:E,directories:A,loading:T,error:L}=(0,p.o)(a,I,!!y),{path:P}=(0,q.eu)(),{getUrl:F}=(0,f.Z)(),{queryText:O,queryLine:D}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(v),{matches:M,clearMatches:B}=function(e,t,n,r){let[a,i]=u.useState(),o=u.useRef(""),l=u.useRef(),{sendStats:s}=(0,h.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new W.z(n,H.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),o.current=e.query,e.startTime&&s("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},l.current=e},[s,n]);return u.useEffect(()=>{if(r)return d(),function(){l.current?.terminate()}},[d,r]),u.useEffect(()=>{if(e.length&&t){c.current&&(l.current?.terminate(),d());let n=o.current&&t.startsWith(o.current);c.current=!0,l.current?.postMessage({baseList:n&&a||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:a,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...E,...t??[]].sort(),[t,E]),O,o,I),{sendRepoClickEvent:z}=(0,h.T)(),V=(0,x.Z)(),[Q,et]=u.useState(0),[en,er]=u.useState(()=>ec()),ea=u.useRef(null),ei=u.useRef(null),eo="file-results-list",{sendRepoKeyDownEvent:el}=(0,h.T)(),{screenSize:em}=(0,J.lm)(),ep=i.enableOverlay??em>=J.Gy.large,eh=u.useCallback(e=>{z("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),R(!1)},[z,d]),ef=(e,t,n)=>l?l(e,t,n):F({path:e,action:t?"tree":"blob",hash:n}),{containerRef:ey}=(0,Z.G)({bindKeys:X.z0.ArrowVertical|X.z0.HomeAndEnd,focusInStrategy:"previous"},[T,L]);u.useEffect(()=>{v||R(!1)},[v]),u.useEffect(()=>{document.activeElement!==j.current&&ep&&R(!1)},[P,j,ep]);let ex=M?.slice(0,20)||[],e_=M&&M.length>ex.length,ev=!i.disableNavigation,eb=ei.current?.getBoundingClientRect().width,eS=(0,r.jsx)(b.A,{sx:{maxHeight:ep?"180px":"100% !important",width:ep?eb:"100%"},className:ed.Box,children:L?(0,r.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(Y.l,{ref:ey,sx:{p:ep?2:3,pr:3*!!ep,pt:ep?3:"2px !important",...e},role:"listbox",className:ed.ActionList,children:[!T&&ex.map((e,t)=>{let n=A.includes(e),a=ef(e,n,D?`L${D}`:"");return(0,r.jsx)(eg,{active:!1,index:t,focused:en&&Q===t,match:e,onRender:s,query:O,onClick:eh,isDirectory:n,to:a,useOverlay:ep,listRef:ey,noAnchor:i.disableNavigation},e)}),0===ex.length&&(0,r.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:n,ref:ei,sx:g,children:(0,r.jsx)(es,{ariaActiveDescendant:(!ep&&v||ep&&k)&&en&&Q>-1?e_&&Q===ex.length?"see-all-results-link":`file-result-${Q}`:void 0,ariaExpanded:ep?k:void 0,ariaHasPopup:ep,ariaControls:ep?eo:void 0,ref:j,loading:T,query:v,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:r,altKey:a,ctrlKey:i}=e;if(!n&&!r&&!a){if("Escape"===t)v?(el("FILE_TREE.CANCEL_SEARCH"),S(""),B()):document.activeElement&&document.activeElement.blur();else if(!v)return;else if("Enter"===t){if(!_&&e_&&Q===ex.length)ev&&V((0,K.Y8Y)({owner:w.ownerLogin,repo:w.name,searchTerm:`path:${O}`})),d?.();else if(ex[Q]){let e=ex[Q];ev&&V(ef(ex[Q],!1,D?`L${D}`:"")),R(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!_&&e_&&Q>=ex.length-1){if(et(ex.length),ea.current&&ey.current){let e=(0,G.U)(ey.current);(0,X.Rt)(ea.current,e,{behavior:"instant"})}}else et(Math.min(Q+1,ex.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){et(Math.max(Q-1,0)),e.preventDefault();return}}},onPreload:()=>N(!0),onSearch:e=>{S(e),e?R(!0):(B(),R(!1)),et(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(R(!1),er(!1))},onFocus:()=>{v&&R(!0),er(!0)},searchPlaceholder:i.searchPlaceholder,className:ed.FilesSearchBox})}),ep&&ex.length>0&&(0,r.jsx)(ee.T,{anchorRef:ei,open:ep&&k,renderAnchor:null,onClose:()=>{R(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:eo,role:"dialog"},children:eS}),!ep&&v&&eS]})}let ep=({active:e,focused:t,index:n,match:a,query:i,to:o,isDirectory:l,onClick:s,onRender:c,useOverlay:d,listRef:m,noAnchor:p})=>{let h=(0,et.Xq)(i,a);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,G.U)(m.current);(0,X.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${n}`,active:e,onSelect:(0,u.useCallback)(()=>{s?.(a)},[a,s]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},x=(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(ey,{text:a,positionsList:h,LeadingIcon:l?eh:ef,className:ed.HighlightMatch})})});return p?(0,r.jsx)(Y.l.Item,{...y,children:x},a):(0,r.jsx)(Y.l.LinkItem,{...y,ref:f,as:Q.N,to:o,children:x},a)},eh=()=>(0,r.jsx)(w.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:ed.Octicon}),ef=()=>(0,r.jsx)(w.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),eg=u.memo(ep);function ey({className:e,text:t,positionsList:n,sx:a,LeadingIcon:i}){let o=[],l=0;for(let e of n){if(Number(e)!==e||e<l||e>t.length)continue;let n=t.slice(l,e);n&&o.push(ex(n)),l=e+1,o.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return o.push(ex(t.slice(l))),(0,r.jsx)(b.A,{className:e,sx:a,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),o]})})}function ex(e){return e.replaceAll("/","/\u200B")}try{em.displayName||(em.displayName="FileResultsList")}catch{}try{ep.displayName||(ep.displayName="FileResultRow")}catch{}try{eh.displayName||(eh.displayName="DirectoryIcon")}catch{}try{ef.displayName||(ef.displayName="FileResultIcon")}catch{}try{eg.displayName||(eg.displayName="MemoizedFileResultRow")}catch{}try{ey.displayName||(ey.displayName="HighlightMatch")}catch{}let e_={dialogHeader:"MultiFilePicker-module__dialogHeader--CApsB",Box:"MultiFilePicker-module__Box--gINxM",Dialog:"MultiFilePicker-module__Dialog--ls9MF"};var ev=n(73017),eb=n(35247);function eS({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:a,processingTime:i,expandedPath:o}){let[l,s]=(0,u.useState)(()=>new Set),[c,d]=(0,u.useState)(()=>new Set),{list:m,directories:h,loading:f}=(0,p.o)(e.commitOID,!0),[g,y]=(0,u.useState)([]);(0,u.useEffect)(()=>{y(function e(t,n){let r=t[n];return r?r.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,r={},a=new Set(n);for(let e of(r[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!a.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}({paths:m,directories:h}),"")),d(new Set(h))},[m,h,y,e.commitOID]),(0,u.useEffect)(()=>{let n=Array.from(l).filter(e=>!c.has(e));a?.(n.length),t(n.map(t=>({id:`${e.id}-${t}`,repositoryId:e.id,nwo:`${e.ownerLogin}/${e.name}`,filePath:t,type:"github_file"})))},[l,c,e,t,a]);let x=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:e_.Box,children:(0,r.jsx)(D,{rootItems:g,expandedPath:o,selectedItemRef:()=>{},setRootItems:y,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:l,onSelectionChange:s,processingTime:i,loading:f||!1,fetchError:!!n,getItemUrl:x,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})})}function ew({onClose:e}){return(0,r.jsx)(a.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function eC({formData:e,onCancel:t,onSaveFiles:n,onSaveRepository:p,findFileWorkerPath:h,attachmentButtonRef:f,owner:g,resourceCounts:y,initialRepo:x,onRepoSelect:_,hideBackButton:v=!1}){let[b,S]=(0,u.useState)({}),[w,C]=(0,u.useState)(null),[j,I]=(0,u.useState)(x||null),[N,R]=(0,u.useState)(!0),[E,A]=(0,u.useState)(e),[T]=(0,u.useState)(0),[L,P]=(0,u.useState)(!1),[F,O]=(0,u.useState)(null),[D,M]=(0,u.useState)(""),[W,H]=(0,u.useState)(0),G=(0,u.useRef)(!1),K=eb.W.spacesRepoContext,Q=async e=>{let t;if(G.current=!0,b[e]){I(t=b[e]),_?.(t);return}try{t=await (0,m.V)(e),S(n=>({...n,[e]:t})),I(t),_?.(t),R(!1)}catch(e){C(e instanceof Error?e.message:"An unknown error occurred")}G.current=!1},J=()=>{_?.(null),I(null),A([]),R(!0)},X=!1,Z=void 0!==y;X=Z?y.currentResourceCount+W>y.maxResourceCount:W>50;let Y=async()=>{if(P(!0),K&&0===W&&j)try{(0,k.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_FILE_PICKER"}),p({type:"repository",id:`${j.id}`,repositoryId:j.id,nwo:`${j.ownerLogin}/${j.name}`,ownerAvatarUrl:j.ownerAvatarUrl,ownerType:j.ownerType,markedForDestroy:!1});return}catch{O("Could not save repository. Please try again.")}finally{P(!1)}if(X)return void P(!1);try{(0,k.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await n(E)}catch(t){let e="An unknown error occurred";if(t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base)if(t.base.startsWith("unsupported_file_type")&&"files"in t){let n=t.files;if(1===n.length)e=`This file can't be submitted: ${n[0]}. Only supported file types are allowed.`;else{let[t,r]=[n.slice(0,3),n.slice(3)];e="One or more files can't be submitted: "+t.map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(e.length-t,e.length)}`;return`<b>${n}</b>`})(e)).join(", "),r.length>0?e+=`, and ${r.length} more.`:e+=".",e+=" Only supported file types are allowed."}}else e=t.base;e.startsWith("The size of the space exceeds the current limit")&&(e="The size of the space exceeds the current limit"),O(e)}finally{P(!1)}};(0,u.useEffect)(()=>{O(null)},[E]);let ee=X&&(Z?`${y.currentResourceCount+W} / ${y.maxResourceCount} possible sources selected, add fewer files.`:"Up to 50 files can be added at a time.");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B.X1,{selectionVariant:"instant",open:!j&&N,onOpenChange:e=>{G.current||(R(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(A([]),(0,k.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await Q(e))},cancelReturnFocusRef:f,submitReturnFocusRef:f,error:w??void 0,ownerDisplayLogin:g,includeForks:!0}),j&&(0,r.jsx)(i.l,{onClose:t,title:`Add files from ${j.ownerLogin}/${j.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,r.jsxs)(i.l.Header,{children:[(0,r.jsx)("div",{className:e_.dialogHeader,children:(0,r.jsx)(i.l.Title,{children:(0,r.jsxs)(o.B,{align:"center",direction:"horizontal",gap:"none",children:[!v&&(0,r.jsx)(o.B.Item,{children:(0,r.jsx)(a.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:J,variant:"invisible"})}),(0,r.jsxs)(o.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",j.ownerLogin,"/",j.name]}),(0,r.jsx)(o.B.Item,{children:(0,r.jsx)(ew,{onClose:()=>e("close-button")})})]})})}),(0,r.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,r.jsx)($.d,{repository:j,children:(0,r.jsx)(U.Ck,{children:(0,r.jsx)(q.qV,{refInfo:{name:j.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:j.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(z.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(em,{commitOid:j.commitOID,findFileWorkerPath:h,onItemSelected:e=>{e&&M(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsxs)(i.l.Footer,{children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:ee&&(0,r.jsx)(l.A.Validation,{variant:"error",children:ee})}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(s.Q,{onClick:t,children:"Cancel"}),(0,r.jsxs)(s.Q,{...(0,V.G)("save-resource-button"),variant:"primary",onClick:Y,count:L?void 0:W||void 0,loading:L,children:["Add ",(0,r.jsx)("span",{children:K&&0===W?"repository":""})]})]})]}),renderBody:()=>(0,r.jsxs)("div",{className:"d-flex flex-column",children:[w&&(0,r.jsx)("span",{children:w}),F&&(0,r.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,r.jsx)(c.A,{full:!0,variant:"danger",children:(0,r.jsx)(ev.JR,{as:"span",html:F})})}),(0,r.jsx)($.d,{repository:j,children:(0,r.jsx)(U.Ck,{children:(0,r.jsx)(q.qV,{refInfo:{name:j.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:j.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(eS,{expandedPath:D,currentRepo:j,localFormData:E,setLocalFormData:A,onFileCountChange:H,fetchError:w,processingTime:T})})})})})]}),className:e_.Dialog})]})}try{eS.displayName||(eS.displayName="FilePickerForm")}catch{}try{ew.displayName||(ew.displayName="CloseButton")}catch{}try{eC.displayName||(eC.displayName="MultiFilePicker")}catch{}},44956:(e,t,n)=>{n.d(t,{m:()=>o});var r=n(74848),a=n(55847);let i={footerContainer:"SpaceDialogFooter-module__footerContainer--J2LGP"};function o({onSave:e,onCancel:t,isLoading:n=!1,loadingAnnouncement:o="",disabled:l=!1}){return(0,r.jsxs)("div",{className:i.footerContainer,children:[(0,r.jsx)(a.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,r.jsx)(a.Q,{variant:"primary",loading:n,loadingAnnouncement:o,onClick:e,disabled:l||n,children:"Save"})]})}try{o.displayName||(o.displayName="SpaceDialogFooter")}catch{}},6236:(e,t,n)=>{n.d(t,{E:()=>u});var r=n(74848),a=n(77430),i=n(96379),o=n(5945),l=n(65029),s=n(52446),c=n(96540);let d={ownerDropdownOverlay:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",ownerListGroup:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",errorListItem:"SpacesOwnerDropdown-module__errorListItem--eq64y"};function u({onSelect:e,showCaption:t=!0,required:n=!1}){let[u,m]=(0,c.useState)([]),[p,h]=(0,c.useState)(!1),[f,g]=(0,c.useState)(void 0),y=(0,c.useCallback)(t=>{g(t),e(t)},[e]),x=(0,c.useCallback)(()=>{m([]),h(!0)},[]);return(0,c.useEffect)(()=>{(async()=>{try{let e=await (0,i.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),n=t?.owners;if(!e.ok||!n)return void x();m(n),n[0]&&y(n[0])}catch{x()}})()},[x,y]),(0,r.jsxs)(l.A,{children:[(0,r.jsx)(l.A.Label,{required:n,children:"Owner"}),(0,r.jsxs)(o.W,{children:[(()=>{let e=f?.name||"Choose an owner",t=f?(0,r.jsx)(a.r,{src:f.avatarUrl},f.avatarUrl):void 0;return(0,r.jsx)(o.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,r.jsx)(o.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",className:d.ownerDropdownOverlay,children:(0,r.jsx)(s.l,{children:(0,r.jsx)(s.l.Group,{className:d.ownerListGroup,children:(0,r.jsxs)(s.l,{selectionVariant:"single",children:[u&&u.map(e=>{let{name:t,avatarUrl:n,displayName:i}=e;return(0,r.jsxs)(s.l.Item,{selected:t===f?.name,onSelect:()=>y(e),children:[(0,r.jsx)(s.l.LeadingVisual,{children:(0,r.jsx)(a.r,{src:n})}),t,(0,r.jsx)(s.l.Description,{children:i})]},t)}),!u.length&&!p&&(0,r.jsx)(s.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),p&&(0,r.jsx)(s.l.Item,{disabled:!0,className:d.errorListItem,children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),t&&(0,r.jsx)(l.A.Caption,{children:"Where we will store your space. Once created the space is not transferable."})]})}try{u.displayName||(u.displayName="SpacesOwnerDropdown")}catch{}},78314:(e,t,n)=>{n.d(t,{d:()=>l,t:()=>s});var r=n(74848),a=n(21728),i=n(96540);let o=i.createContext({});function l(e){let t,n=(0,a.c)(3),{repository:i,children:l}=e;return n[0]!==l||n[1]!==i?(t=(0,r.jsxs)(o.Provider,{value:i,children:[" ",l," "]}),n[0]=l,n[1]=i,n[2]=t):t=n[2],t}function s(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentRepositoryContext")}catch{}try{l.displayName||(l.displayName="CurrentRepositoryProvider")}catch{}},35898:(e,t,n)=>{n.d(t,{Q:()=>l,i:()=>s});var r=n(74848),a=n(21728),i=n(96540);let o=i.createContext(void 0);function l(e){let t,n=(0,a.c)(3),{user:i,children:l}=e;return n[0]!==l||n[1]!==i?(t=(0,r.jsxs)(o.Provider,{value:i,children:[" ",l," "]}),n[0]=l,n[1]=i,n[2]=t):t=n[2],t}function s(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentUserContext")}catch{}try{l.displayName||(l.displayName="CurrentUserProvider")}catch{}},56487:(e,t,n)=>{n.d(t,{F:()=>s,t:()=>c});var r=n(74848),a=n(35247),i=n(53419),o=n(52446),l=n(60429);function s({eventName:e,menuLocation:t,mode:n,action:r,text:a}){let o=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,i.BI)("dotcom_chat.activate",{target:o,text:a,category:t,action:r,mode:n})}function c({menuLocation:e,mode:t,onItemClick:n}){return Object.entries(l.A).map(([i,{name:l,url:c,icon:d}])=>(0,r.jsxs)(o.l.LinkItem,{href:c,onClick:()=>{n?.(),a.W.freeToPaidTelemetry&&s({eventName:i,menuLocation:e,mode:t,action:"menu_item_click",text:l})},children:[l,(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},i))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},49851:(e,t,n)=>{n.d(t,{Dy:()=>s,GS:()=>i,KJ:()=>o,LP:()=>c,OZ:()=>d});var r=n(74848),a=n(21728);let i=e=>{let t,n,i,o,l,s=(0,a.c)(7);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:c}=t,d=void 0===c?16:c;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M.5 6v4.5A2.5 2.5 0 0 0 3 13h1.645a3.5 3.5 0 0 1-.11-1.5H3a1 1 0 0 1-1-1V6zM14 6v4.5a1 1 0 0 1-1 1h-1.535a3.5 3.5 0 0 1-.11 1.5H13a2.5 2.5 0 0 0 2.5-2.5V6zm-4 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"}),o=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.5 10V5.5A2.5 2.5 0 0 0 13 3h-1.645a3.5 3.5 0 0 1 .11 1.5H13a1 1 0 0 1 1 1V10zM2 10V5.5a1 1 0 0 1 1-1h1.535a3.5 3.5 0 0 1 .11-1.5H3A2.5 2.5 0 0 0 .5 5.5V10zm4-6a2 2 0 1 1 4 0 2 2 0 0 1-4 0",clipRule:"evenodd"}),s[2]=n,s[3]=i,s[4]=o):(n=s[2],i=s[3],o=s[4]),s[5]!==d?(l=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),s[5]=d,s[6]=l):l=s[6],l},o=e=>{let t,n,i,o,l=(0,a.c)(6);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:s}=t,c=void 0===s?16:s;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),l[2]=n,l[3]=i):(n=l[2],i=l[3]),l[4]!==c?(o=(0,r.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),l[4]=c,l[5]=o):o=l[5],o},l=e=>{let t,n,i,o,l=(0,a.c)(6);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:s}=t,c=void 0===s?16:s;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),l[2]=n,l[3]=i):(n=l[2],i=l[3]),l[4]!==c?(o=(0,r.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),l[4]=c,l[5]=o):o=l[5],o},s=e=>{let t,n,i,o,l,s=(0,a.c)(7);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:c}=t,d=void 0===c?16:c;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M7.41299 14.25H1.75C1.19772 14.25 0.75 13.8023 0.75 13.25V2.75C0.75 2.19772 1.19772 1.75 1.75 1.75H5C5.31476 1.75 5.61115 1.89819 5.8 2.15L6.7 3.35C6.88885 3.60181 7.18524 3.75 7.5 3.75H14.25C14.8023 3.75 15.25 4.19772 15.25 4.75V8.48779",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),o=(0,r.jsx)("path",{d:"M12.265 9.15977C12.3446 8.94235 12.6521 8.94235 12.7317 9.15977L12.9693 9.80865C13.3464 10.8387 14.158 11.6503 15.1881 12.0274L15.8369 12.265C16.0544 12.3446 16.0544 12.6521 15.8369 12.7317L15.1881 12.9692C14.158 13.3463 13.3464 14.158 12.9693 15.188L12.7317 15.8369C12.6521 16.0543 12.3446 16.0543 12.265 15.8369L12.0275 15.188C11.6504 14.158 10.8387 13.3463 9.80871 12.9692L9.15983 12.7317C8.94241 12.6521 8.94241 12.3446 9.15983 12.265L9.80871 12.0274C10.8387 11.6503 11.6504 10.8387 12.0275 9.80865L12.265 9.15977Z",fill:"currentColor"}),s[2]=n,s[3]=i,s[4]=o):(n=s[2],i=s[3],o=s[4]),s[5]!==d?(l=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),s[5]=d,s[6]=l):l=s[6],l},c=e=>{let t,n,i,o,l,s=(0,a.c)(7);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:c}=t,d=void 0===c?16:c;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M16.0376 9.67565V5.82038C16.0376 5.69043 15.9257 5.58508 15.7876 5.58508H11.6914C11.4687 5.58508 11.3571 5.83853 11.5146 5.98676L15.6108 9.84196C15.7683 9.99019 16.0376 9.88525 16.0376 9.67565Z",fill:"currentColor"}),o=(0,r.jsx)("path",{d:"M1.89601 3.25629C4.26064 1.03075 8.04807 0.960969 10.5015 3.04765L10.7339 3.25629L10.7857 3.3096C11.0259 3.58685 11.0085 3.99602 10.7339 4.25445C10.4593 4.51252 10.0254 4.52825 9.73097 4.30225L9.67336 4.25445L9.4966 4.09544C7.63201 2.50983 4.75358 2.56313 2.95656 4.25445C1.10158 6.00031 1.10158 8.83023 2.95656 10.5761C4.81155 12.322 7.8184 12.3219 9.67336 10.5761L13.563 6.91622C13.8559 6.64063 14.3307 6.64058 14.6236 6.91622C14.9163 7.19186 14.9163 7.63873 14.6236 7.91438L10.7339 11.5752C8.29328 13.8718 4.33667 13.8718 1.89601 11.5752C-0.544758 9.27799 -0.544771 5.55349 1.89601 3.25629Z",fill:"currentColor"}),s[2]=n,s[3]=i,s[4]=o):(n=s[2],i=s[3],o=s[4]),s[5]!==d?(l=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),s[5]=d,s[6]=l):l=s[6],l},d={compose:o,dice:l,loops:c,node:i,spaces:s};try{i.displayName||(i.displayName="NodeIcon")}catch{}try{o.displayName||(o.displayName="ComposeIcon")}catch{}try{l.displayName||(l.displayName="DiceIcon")}catch{}try{s.displayName||(s.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}},82595:(e,t,n)=>{n.d(t,{I:()=>d});var r=n(74848),a=n(21728),i=n(34164),o=n(49851),l=n(38621);let s={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(s).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,n,d,u,m,p,h=(0,a.c)(19),{icon:f,hasBackground:g,color:y,size:x,className:_}=e,v=void 0!==g&&g,b=void 0===y?"gray":y,S=void 0===x?16:x;if("string"==typeof f)if(f in o.OZ)t=o.OZ[f];else{let e;h[0]!==f?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return t in l?l[t]:void 0}(f),h[0]=f,h[1]=e):e=h[1],t=e}else t=f;if(!t)return null;h[2]!==b?(n=c.has(b),h[2]=b,h[3]=n):n=h[3];let w=n,C=`${v?2*S:S}px`;h[4]!==b||h[5]!==w||h[6]!==C?(d={"--custom-size":C},w||(d["--custom-color"]=b),h[4]=b,h[5]=w,h[6]=C,h[7]=d):d=h[7];let j=w?s[b]:s.customColor,I=v&&s.hasBackground;return h[8]!==_||h[9]!==j||h[10]!==I?(u=(0,i.$)(s.container,j,I,_),h[8]=_,h[9]=j,h[10]=I,h[11]=u):u=h[11],h[12]!==t||h[13]!==S?(m=(0,r.jsx)(t,{size:S,fill:"currentColor"}),h[12]=t,h[13]=S,h[14]=m):m=h[14],h[15]!==d||h[16]!==u||h[17]!==m?(p=(0,r.jsx)("div",{style:d,className:u,children:m}),h[15]=d,h[16]=u,h[17]=m,h[18]=p):p=h[18],p}try{d.displayName||(d.displayName="Icon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>b});var r=n(74848),a=n(21728),i=n(96540),o=n(85788),l=n(19342);let s={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemButton:"ListBlock-module__itemButton--o9fcO",actions:"ListBlock-module__actions--LfUWo",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function c(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.container,children:i}),n[0]=i,n[1]=t):t=n[1],t}function d(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.header,children:i}),n[0]=i,n[1]=t):t=n[1],t}function u(e){let t,n,i,o,l=(0,a.c)(11);if(l[0]!==e?({children:t,loading:i,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=i):(t=l[1],n=l[2],i=l[3]),void 0!==i&&i){let e,t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(m),l[4]=e):e=l[4],l[5]!==n||l[6]!==e?(t=(0,r.jsx)("ul",{className:s.list,"data-testid":"list-block-skeleton",...n,children:e}),l[5]=n,l[6]=e,l[7]=t):t=l[7],t}return l[8]!==t||l[9]!==n?(o=(0,r.jsx)("ul",{className:s.list,...n,children:t}),l[8]=t,l[9]=n,l[10]=o):o=l[10],o}function m(e,t){return(0,r.jsx)(f,{},t)}function p(e){let t,n,l,c,d,u=(0,a.c)(39),m=null,p=null,f=null,v=null,b=null;if(u[0]!==e.children){for(let t of i.Children.toArray(e.children))i.isValidElement(t)&&(t.type===g?m=t:t.type===y?p=t:t.type===x?f=t:t.type===_?v=t:t.type===h&&(b=t));u[0]=e.children,u[1]=m,u[2]=p,u[3]=f,u[4]=v,u[5]=b}else m=u[1],p=u[2],f=u[3],v=u[4],b=u[5];u[6]!==f||u[7]!==m||u[8]!==v||u[9]!==p?(t=(0,r.jsxs)(r.Fragment,{children:[m,p,f,v]}),u[6]=f,u[7]=m,u[8]=v,u[9]=p,u[10]=t):t=u[10];let S=t;if("href"in e){let t,n,a,i,l;if(u[11]!==e?({href:t,isExternalLink:a,...n}=e,u[11]=e,u[12]=t,u[13]=n,u[14]=a):(t=u[12],n=u[13],a=u[14]),void 0!==a&&a){let e,a;return u[15]!==S||u[16]!==t||u[17]!==n?(e=(0,r.jsx)("a",{href:t,className:s.itemButton,target:"_self",rel:"noopener noreferrer",...n,children:S}),u[15]=S,u[16]=t,u[17]=n,u[18]=e):e=u[18],u[19]!==b||u[20]!==e?(a=(0,r.jsxs)("li",{className:s.item,children:[e,b]}),u[19]=b,u[20]=e,u[21]=a):a=u[21],a}return u[22]!==S||u[23]!==t||u[24]!==n?(i=(0,r.jsx)(o.N_,{...n,to:t,className:s.itemButton,children:S}),u[22]=S,u[23]=t,u[24]=n,u[25]=i):i=u[25],u[26]!==b||u[27]!==i?(l=(0,r.jsxs)("li",{className:s.item,children:[i,b]}),u[26]=b,u[27]=i,u[28]=l):l=u[28],l}return u[29]!==e?({onClick:n,...l}=e,u[29]=e,u[30]=n,u[31]=l):(n=u[30],l=u[31]),u[32]!==S||u[33]!==n||u[34]!==l?(c=(0,r.jsx)("button",{...l,className:s.itemButton,onClick:n,type:"button",children:S}),u[32]=S,u[33]=n,u[34]=l,u[35]=c):c=u[35],u[36]!==b||u[37]!==c?(d=(0,r.jsxs)("li",{className:s.item,children:[c,b]}),u[36]=b,u[37]=c,u[38]=d):d=u[38],d}function h(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.actions,children:i}),n[0]=i,n[1]=t):t=n[1],t}function f(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("li",{className:s.item,children:(0,r.jsx)("div",{className:s.skeletonItem,children:(0,r.jsx)(l.r,{lines:2})})}),t[0]=e):e=t[0],e}function g(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.leadingVisual,children:i}),n[0]=i,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.title,children:i}),n[0]=i,n[1]=t):t=n[1],t}function x(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.description,children:i}),n[0]=i,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:s.metadata,children:i}),n[0]=i,n[1]=t):t=n[1],t}function v(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("li",{className:s.emptyState,children:i}),n[0]=i,n[1]=t):t=n[1],t}p.LeadingVisual=g,p.Title=y,p.Description=x,p.SecondaryDescription=_,p.Metadata=_,p.Actions=h,p.Skeleton=f;let b=c;b.Header=d,b.List=u,b.Item=p,b.EmptyState=v,b.displayName="ListBlock",d.displayName="ListBlock.Header",u.displayName="ListBlock.List",p.displayName="ListBlock.Item",g.displayName="ListBlock.Item.LeadingVisual",y.displayName="ListBlock.Item.Title",x.displayName="ListBlock.Item.Description",_.displayName="ListBlock.Item.Metadata",h.displayName="ListBlock.Item.Actions",f.displayName="ListBlock.Item.Skeleton",v.displayName="ListBlock.EmptyState";try{c.displayName||(c.displayName="ListBlock")}catch{}},25556:(e,t,n)=>{n.d(t,{m:()=>g});var r=n(74848),a=n(69676),i=n(96540),o=n(59299),l=n(44999),s=n(16255),c=n(34164);let d=n(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-b39269ff-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,o.Jt)("fonts.normal"),(0,o.Jt)("colors.fg.onEmphasis"),(0,o.Jt)("colors.neutral.emphasisPlus"),(0,o.Jt)("radii.2"),(0,o.Jt)("space.3"),(0,o.Jt)("space.3"),(0,o.Jt)("space.3"),(0,o.Jt)("space.3"),l.A),u=()=>()=>void 0,m=()=>!1,p=()=>!0,h=(0,i.forwardRef)(function({direction:e="n",className:t,text:n,noDelay:a,align:o,wrap:l,open:h=!1,portalProps:f={},...g},y){let x=(0,i.useSyncExternalStore)(u,p,m),_=(0,c.$)(t,`tooltipped-${e}`,o&&`tooltipped-align-${o}-2`,a&&"tooltipped-no-delay",l&&"tooltipped-multiline",h&&"tooltipped-open");return x?(0,r.jsx)(s.Z,{...f,children:(0,r.jsx)(d,{ref:y,role:"tooltip","aria-label":n,"data-visible-text":n||g["aria-label"],...g,sx:{position:"fixed",zIndex:1,...g.sx},className:_})}):null});try{h.displayName||(h.displayName="ControlledTooltip")}catch{}var f=n(65787);let g=(0,i.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:n,anchorSide:o,anchorOffset:l,alignmentOffset:s,allowOutOfBounds:c,...d},u){let m=(0,i.useRef)(null);(0,i.useImperativeHandle)(u,()=>m.current);let p=(0,i.useRef)({left:0,top:0}),g=(0,i.useSyncExternalStore)((0,i.useCallback)(n=>{if(!m.current||!e.current||!t)return()=>void 0;let r=(0,f.U)(e.current);return r?.addEventListener("scroll",n),()=>{r?.removeEventListener("scroll",n)}},[e,t]),(0,i.useCallback)(()=>{if(!m.current||!e.current)return p.current;let t=(0,a.uG)(m.current,e.current,{align:n??"center",side:o??"outside-top",alignmentOffset:s??0,anchorOffset:l??0,allowOutOfBounds:c});return(t.left!==p.current.left||t.top!==p.current.top)&&(p.current=t),p.current},[e,s,l,n,o,c]),(0,i.useCallback)(()=>p.current,[]));return(0,r.jsx)(h,{...d,ref:m,open:t,style:{position:"absolute",...g,...d.style}})});try{g.displayName||(g.displayName="PortalTooltip")}catch{}},68237:(e,t,n)=>{n.d(t,{U:()=>g});var r=n(74848),a=n(21728),i=n(57224),o=n(76629),l=n(43258),s=n(30391),c=n(97665),d=n(68270),u=n(45887),m=n(49890),p=n(16235),h=n(83952);let f={};function g(e){let t,n,g,y,x,_,v,b=(0,a.c)(20),{appName:S,children:w,wasServerRendered:C,dataRouterEnabled:j}=e,{colorMode:I,dayScheme:N,nightScheme:k}=(0,h.A)();b[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,p.S)(),b[0]=t):t=b[0];let R=t;return b[1]!==w?(n=(0,r.jsx)(l.k6,{children:w}),b[1]=w,b[2]=n):n=b[2],b[3]!==S||b[4]!==n?(g=(0,r.jsx)(u.V,{appName:S,children:n}),b[3]=S,b[4]=n,b[5]=g):g=b[5],b[6]!==j||b[7]!==g?(y=(0,r.jsx)(d.v,{enabled:j,children:g}),b[6]=j,b[7]=g,b[8]=y):y=b[8],b[9]!==I||b[10]!==N||b[11]!==k||b[12]!==y?(x=(0,r.jsx)(m.n,{children:(0,r.jsx)(s.NP,{colorMode:I,dayScheme:N,nightScheme:k,preventSSRMismatch:!0,children:y})}),b[9]=I,b[10]=N,b[11]=k,b[12]=y,b[13]=x):x=b[13],b[14]!==S||b[15]!==x?(_=(0,r.jsx)(i.y,{appName:S,category:"",metadata:f,children:x}),b[14]=S,b[15]=x,b[16]=_):_=b[16],b[17]!==_||b[18]!==C?(v=(0,r.jsx)(c.Ht,{client:R,children:(0,r.jsx)(o.D3,{wasServerRendered:C,children:_})}),b[17]=_,b[18]=C,b[19]=v):v=b[19],v}try{g.displayName||(g.displayName="BaseProviders")}catch{}},396:(e,t,n)=>{n.d(t,{h:()=>g});var r=n(74848),a=n(21728),i=n(96540),o=n(43258),l=n(38621),s=n(65556),c=n(16255);let d={info:"",success:"Toast--success",error:"Toast--error"},u={info:(0,r.jsx)(l.InfoIcon,{}),success:(0,r.jsx)(l.CheckIcon,{}),error:(0,r.jsx)(l.StopIcon,{})},m=({message:e,timeToLive:t,icon:n,type:a="info",role:o="log"})=>{let[l,m]=i.useState(!0),{safeSetTimeout:p}=(0,s.A)();return(0,i.useEffect)(()=>{t&&p(()=>m(!1),t-300)},[p,t]),(0,r.jsx)(c.Z,{children:(0,r.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,r.jsxs)("div",{className:`Toast ${d[a]} ${l?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${a}`,role:o,children:[(0,r.jsx)("span",{className:"Toast-icon",children:n||u[a]}),(0,r.jsx)("span",{className:"Toast-content",children:e})]})})})};try{m.displayName||(m.displayName="Toast")}catch{}function p(){let{toasts:e,persistedToast:t}=(0,i.useContext)(o.T8);return(0,r.jsxs)(r.Fragment,{children:[e.map((e,t)=>(0,r.jsx)(m,{message:e.message,icon:e.icon,timeToLive:o.Qn,type:e.type,role:e.role},t)),t&&(0,r.jsx)(m,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{p.displayName||(p.displayName="Toasts")}catch{}var h=n(7820);function f({ssrError:e}){let{addToast:t}=(0,o.Y6)(),n=h.z[e.textContent||""];return(0,i.useEffect)(()=>{n||t({type:"error",message:"SSR failed, see console for error details (Staff Only)"})},[]),null}try{f.displayName||(f.displayName="SSRErrorToast")}catch{}function g(e){let t,n,i,o=(0,a.c)(5),{ssrError:l}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(p,{}),o[0]=t):t=o[0],o[1]!==l?(n=l&&(0,r.jsx)(f,{ssrError:l}),o[1]=l,o[2]=n):n=o[2],o[3]!==n?(i=(0,r.jsxs)(r.Fragment,{children:[t,n]}),o[3]=n,o[4]=i):i=o[4],i}try{g.displayName||(g.displayName="CommonElements")}catch{}},11934:(e,t,n)=>{n.d(t,{U:()=>u,f:()=>d});var r=n(74848),a=n(21728),i=n(73189),o=n(96540),l=n(69599),s=n(11083);let c=(0,o.createContext)(null),d=(0,o.memo)(function(e){let t,n,i=(0,a.c)(6),{isDataRouterEnabled:d,appName:u,children:m}=e;i[0]!==u||i[1]!==d?(t={appName:u,isDataRouterEnabled:d},i[0]=u,i[1]=d,i[2]=t):t=i[2];let{onRender:p}=function(e){let t,n,r=(0,a.c)(5),{appName:i,isDataRouterEnabled:c}=e;r[0]!==i||r[1]!==c?(t=(e,t,n,r,a,d)=>{"undefined"!=typeof window&&(0,l.G7)("react_quality_profiling")&&(0,s.i)({requestUrl:window.location.href,reactRenderPerformance:{actualDuration:n,baseDuration:r,commitLag:d-a,phase:t,appName:i,isDataRouterEnabled:c,componentId:e,reactVersion:o.version}})},r[0]=i,r[1]=c,r[2]=t):t=r[2];let d=t;return r[3]!==d?(n={onRender:d},r[3]=d,r[4]=n):n=r[4],n}(t);return i[3]!==m||i[4]!==p?(n=(0,r.jsx)(c.Provider,{value:p,children:m}),i[3]=m,i[4]=p,i[5]=n):n=i[5],n}),u=(0,o.memo)(function(e){let t,n=(0,a.c)(4),{id:l,children:s}=e,d=(0,o.useContext)(c)??i.l;return n[0]!==s||n[1]!==l||n[2]!==d?(t=(0,r.jsx)(o.Profiler,{id:l,onRender:d,children:s}),n[0]=s,n[1]=l,n[2]=d,n[3]=t):t=n[3],t});try{c.displayName||(c.displayName="ProfilerContext")}catch{}try{d.displayName||(d.displayName="ProfilerProvider")}catch{}try{u.displayName||(u.displayName="Profiler")}catch{}},40558:(e,t,n)=>{n.d(t,{H:()=>ReactBaseElement});var r=n(35750),a=n(18150),i=n(85242),o=n(88243),l=n(16213),s=n(31635),c=n(74848),d=n(39595),u=n(38102),m=n(73189),p=n(28600),h=n(11083),f=n(96540),g=n(5338),y=n(7820);let x=/Minified React error #(?<invariant>\d+)/,_=["419","421"];var v=new WeakMap,b=new WeakMap,S=new WeakSet,w=new WeakSet,C=new WeakSet,j=new WeakSet,I=new WeakSet,N=new WeakSet;let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}get attemptedSSR(){return"true"===this.getAttribute("data-attempted-ssr")}connectedCallback(){(0,o._)(this,j,T).call(this)}disconnectedCallback(){(0,r._)(this,v)?.unmount(),(0,i._)(this,v,void 0)}constructor(...e){super(...e),(0,a._)(this,b,{get:k,set:void 0}),(0,l._)(this,S),(0,l._)(this,w),(0,l._)(this,C),(0,l._)(this,j),(0,l._)(this,I),(0,l._)(this,N),(0,a._)(this,v,{writable:!0,value:void 0})}};function k(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}function R(){return p.A.isEnabled()||"true"===this.getAttribute("data-react-profiling")}function E(e,t,n){try{window.performance.mark(n),queueMicrotask(()=>{try{if(1===window.performance.getEntriesByName(t).length&&1===window.performance.getEntriesByName(n).length){let r=window.performance.measure(e,t,n);(0,h.i)({reactHydrationTimings:{duration:r.duration,appName:this.name,reactVersion:f.version,renderType:this.hasSSRContent?"hydrateRoot":"createRoot"},requestUrl:location.href})}}catch{}finally{window.performance.clearMarks(t),window.performance.clearMarks(n),window.performance.clearMeasures(e)}})}catch{}}function A(){try{let e=crypto.randomUUID(),t=`react-base-element-initial-render-${this.name}-[${e}]`,n=`${t}-start`,r=`${t}-end`,a=`${t}-entry`;return window.performance.mark(n),()=>{(0,o._)(this,w,E).call(this,a,n,r)}}catch{return m.l}}async function T(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:g.H,hydrateRoot:g.c};(0,o._)(this,S,R).call(this)&&(e=await (0,o._)(this,I,L).call(this));let t=(0,o._)(this,C,A).call(this),n=!1,a=(e,t={})=>{n=!0;let r={critical:!0,reactAppName:this.name,...t};setTimeout(()=>{(0,u.N7)(e,r)})},l=JSON.parse((0,r._)(this,b)),s=this.ssrError?.textContent,d=await this.getReactNode(l,a),m=(0,c.jsx)(f.StrictMode,{children:d});if(s&&(0,o._)(this,N,P).call(this,s),this.hasSSRContent){let t=[...this.querySelectorAll('style[data-styled="true"]'),...this.querySelectorAll('link[data-remove-after-hydration="true"]')];for(let e of t)document.head.appendChild(e);(0,i._)(this,v,e.hydrateRoot(this.reactRoot,m,{onRecoverableError:(e,t)=>{if(!(e instanceof Error))return;let r=x.exec(e.message),a=String(r?.groups?.invariant);n=!_.includes(a),(0,h.i)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:a},requestUrl:window.location.href}),n&&(0,h.X)()&&(console.groupCollapsed(`%c\u{26A0}\u{FE0F} Recoverable hydration error - ${this.name} - ${e.message}`,"background: rgba(255, 193, 7, 0.2); font-weight: bold; padding: 4px; border: 1px solid rgba(255, 193, 7, 0.5); border-radius: 4px;","This is only visible to staff users and is safe to ignore. Reach out to #react for help understanding and fixing these hydration errors"),e.cause&&console.warn("cause",e.cause),t.componentStack&&console.warn("componentStack",t.componentStack),t.digest&&console.warn("digest",t.digest),console.groupEnd())}})),t.length>0&&requestIdleCallback(()=>{for(let e of t)e.parentElement?.removeChild(e)}),(0,h.i)({incrementKey:"REACT_RENDER",incrementTags:{appName:this.name,csr:!1,error:n,ssr:!0,ssrError:!1}})}else(0,i._)(this,v,e.createRoot(this.reactRoot)),(0,r._)(this,v).render(m),(0,h.i)({incrementKey:"REACT_RENDER",incrementTags:{appName:this.name,csr:!0,error:n,ssr:this.attemptedSSR,ssrError:!!this.ssrError}});this.classList.add("loaded"),t()}function L(){return n.e("react-profiling").then(n.t.bind(n,87335,19))}function P(e){if((0,h.X)()){if(y.z[e])return console.error("SSR failed with an expected error:",y.z[e]);try{let t=JSON.parse(e),n=function(e){if(!e.stacktrace)return"";let t=`
 `;return e.stacktrace.map(e=>{let{function:n,filename:r,lineno:a,colno:i}=e,o=`${t} at ${n} (${r}:${a}:${i})`;return t=" ",o}).join(`
`)}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,n)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}}(0,s.Cg)([d.aC],ReactBaseElement.prototype,"embeddedData",void 0),(0,s.Cg)([d.aC],ReactBaseElement.prototype,"ssrError",void 0),(0,s.Cg)([d.aC],ReactBaseElement.prototype,"reactRoot",void 0);try{x.displayName||(x.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}},5330:(e,t,n)=>{n.d(t,{d:()=>o});var r=n(74848),a=n(21728),i=n(24518);function o(e){let t,n,o,l=(0,a.c)(5),{routes:s,children:c}=e;return l[0]!==s?(n={routes:s},l[0]=s,l[1]=n):n=l[1],t=n,l[2]!==t||l[3]!==c?(o=(0,r.jsx)(i.k.Provider,{value:t,children:c}),l[2]=t,l[3]=c,l[4]=o):o=l[4],o}try{o.displayName||(o.displayName="RoutesContextProvider")}catch{}},68270:(e,t,n)=>{n.d(t,{e:()=>i,v:()=>o});var r=n(74848),a=n(21728);let i=(0,n(96540).createContext)(!1);function o(e){let t,n=(0,a.c)(3),{enabled:o,children:l}=e;return n[0]!==l||n[1]!==o?(t=(0,r.jsx)(i.Provider,{value:o,children:l}),n[0]=l,n[1]=o,n[2]=t):t=n[2],t}try{i.displayName||(i.displayName="IsDataRouterEnabledContext")}catch{}try{o.displayName||(o.displayName="IsDataRouterEnabledContextProvider")}catch{}},45887:(e,t,n)=>{n.d(t,{V:()=>c,l:()=>d});var r=n(74848),a=n(21728),i=n(38102),o=n(96540),l=n(48602);let s=(0,o.createContext)(null),c=(0,o.memo)(function(e){let t,n,c,d,u=(0,a.c)(9),{appName:m,children:p,critical:h}=e;u[0]!==h||u[1]!==m?(t={reactAppName:m,critical:h},u[0]=h,u[1]=m,u[2]=t):t=u[2];let f=(0,o.useRef)(t);u[3]!==h||u[4]!==m?(n=()=>{f.current={reactAppName:m,critical:h}},u[3]=h,u[4]=m,u[5]=n):n=u[5],(0,o.useEffect)(n),u[6]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{if(e)return(0,l.km)(e,e=>{(0,i.N7)(e,{critical:f.current.critical,reactAppName:f.current.reactAppName,...t})})},u[6]=c):c=u[6];let g=c;return u[7]!==p?(d=(0,r.jsx)(s.Provider,{value:g,children:p}),u[7]=p,u[8]=d):d=u[8],d});function d(){let e=(0,o.useContext)(s);if(null==e)throw Error("useReportErrorContext must be used within a ReportErrorContextProvider");return e}try{s.displayName||(s.displayName="ReportErrorContext")}catch{}try{c.displayName||(c.displayName="ReportErrorContextProvider")}catch{}},48602:(e,t,n)=>{n.d(t,{Ly:()=>f,hw:()=>p,km:()=>m});var r=n(74848),a=n(21728),i=n(38102),o=n(85788),l=n(88657),s=n(96540),c=n(95224),d=n(76143);let u=new WeakSet;function m(e,t){u.has(e)||(u.add(e),t(e))}let p=e=>{let t,n=(0,a.c)(3),{appName:i}=e,l=(0,o.r5)();return!function(e){return(0,o.pX)(e)&&404===e.status}(l)?(n[0]!==i||n[1]!==l?(t=(0,r.jsx)(h,{appName:i,routeError:l}),n[0]=i,n[1]=l,n[2]=t):t=n[2],t):null};function h(e){let t,n,o,c,d=(0,a.c)(6),{appName:u,routeError:p}=e,h=(0,s.useRef)(u);return d[0]!==u?(t=()=>{h.current=u},d[0]=u,d[1]=t):t=d[1],(0,s.useEffect)(t),d[2]!==p?(n=()=>{p&&m(p,e=>{(0,i.N7)(e,{critical:!0,reactAppName:h.current})})},o=[p],d[2]=p,d[3]=n,d[4]=o):(n=d[3],o=d[4]),(0,s.useEffect)(n,o),d[5]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsxs)(l.E,{border:!1,spacious:!1,children:[(0,r.jsx)(l.E.Heading,{children:"Unable to load page."}),(0,r.jsx)(l.E.Description,{children:"Please reload page and try again"})]}),d[5]=c):c=d[5],c}let f=e=>{let t,n=(0,a.c)(6),{appName:i}=e,l=(0,o.r5)();if((0,c.c)(l)){let e;return n[0]!==i||n[1]!==l?(e=(0,r.jsx)(g,{appName:i,responseError:l}),n[0]=i,n[1]=l,n[2]=e):e=n[2],e}return n[3]!==i||n[4]!==l?(t=(0,r.jsx)(h,{routeError:l,appName:i}),n[3]=i,n[4]=l,n[5]=t):t=n[5],t};function g(e){let t,n,o,c,u,p,h,f,g,y=(0,a.c)(11),{appName:x,responseError:_}=e,v=(0,a.c)(3),b=_.response.status;v[0]!==b?(f=()=>{let e=function(e){let t=404===e?"404 Page not found":500===e?"500 Internal server error":`Error ${e}`;return(0,d.Y)(t)}(b);(0,d.D)(e)},g=[b],v[0]=b,v[1]=f,v[2]=g):(f=v[1],g=v[2]),(0,s.useEffect)(f,g);let S=(0,s.useRef)(x);y[0]!==x?(t=()=>{S.current=x},y[0]=x,y[1]=t):t=y[1],(0,s.useEffect)(t),y[2]!==_?(n=()=>{m(_,e=>{(0,i.N7)(e,{critical:!0,reactAppName:S.current})})},o=[_],y[2]=_,y[3]=n,y[4]=o):(n=y[3],o=y[4]),(0,s.useEffect)(n,o),y[5]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(l.E.Heading,{children:"Unable to load page."}),y[5]=c):c=y[5];let w=`Status: ${_.response.status} Message: ${_.message}`;return y[6]!==w?(u=(0,r.jsx)(l.E.Description,{children:w}),y[6]=w,y[7]=u):u=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(l.E.Description,{children:"Please reload page and try again"}),y[8]=p):p=y[8],y[9]!==u?(h=(0,r.jsxs)(l.E,{border:!1,spacious:!1,children:[c,u,p]}),y[9]=u,y[10]=h):h=y[10],h}try{p.displayName||(p.displayName="UnhandledRouteError")}catch{}try{h.displayName||(h.displayName="BaseRouteErrorBoundary")}catch{}try{f.displayName||(f.displayName="RootAppRouteErrorElement")}catch{}try{g.displayName||(g.displayName="ResponseErrorElement")}catch{}},46642:(e,t,n)=>{n.d(t,{P:()=>d});var r=n(74848),a=n(96540),i=n(38621),o=n(1002),l=n(55847),s=n(70170),c=n(86391);function d({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:d,selectAllOption:u,additionalButtonProps:m,buttonText:p="",width:h}){let[f,g]=(0,a.useState)(""),[y,x]=(0,a.useState)([]),[_,v]=(0,a.useState)(!0),b=(0,a.useCallback)((0,s.s)(async e=>{try{let n=await t(e);x(n)}catch{}v(!1)},200),[t,x,v]);(0,a.useEffect)(()=>{v(!0),b(f)},[f,b,v]);let S=(0,a.useCallback)(e=>{"single"===d?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[d,n]),w=(0,a.useMemo)(()=>"multiple"===d?e||[]:e?[e]:[],[d,e]),C=(0,a.useCallback)(e=>{let t,n="medium"===h?35:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,r.jsx)(i.RepoLockedIcon,{size:16}):(0,r.jsx)(i.RepoIcon,{size:16})}},[h]),j=(0,a.useCallback)(e=>e.name,[]),I=(0,a.useMemo)(()=>{let e=[];return e.push(...w.filter(e=>y.every(t=>t.name!==e.name))||[]),e.push(...y),u&&e.push({name:"$all$",_all:!0}),e},[y,u,w]),N=p,k=i.RepoIcon;return N||("multiple"===d?N=w.length>0?`${w.length} repositor${w.length>1?"ies":"y"}`:"Select repositories":w.length>0&&w[0]?(N=w[0].name,k=w[0].private?i.RepoLockedIcon:i.RepoIcon):N=u?"All repositories":"Select a repository"),(0,r.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,r.jsx)(l.Q,{leadingVisual:k,trailingAction:i.TriangleDownIcon,"aria-labelledby":` ${e}`,...t,...m,children:(0,r.jsx)(o.A,{title:N,maxWidth:195,children:N})}),placeholderText:"Search",items:I,loading:_,groups:u?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:d,initialSelectedItems:w,onSelectionChange:S,filterItems:g,getItemKey:j,convertToItemProps:C,title:"Select a repository",width:h})}try{d.displayName||(d.displayName="ReposSelector")}catch{}},94195:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>h,nn:()=>f,lm:()=>m});var r=n(74848),a=n(96540);let i=null,o=null,l=new Set;function s(e){return l.add(e),i||(i=new ResizeObserver(()=>{o||(o=requestAnimationFrame(()=>{for(let e of(o=null,l))e()}))})).observe(document.documentElement),()=>{l.delete(e),0===l.size&&i&&(i.disconnect(),i=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=a.createContext({screenSize:c.small});function m(){return a.useContext(u)}function p(){return f(window.innerWidth)}function h({children:e,initialValue:t=c.small}){let n=(0,a.useSyncExternalStore)(s,p,(0,a.useCallback)(()=>t,[t])),i=(0,a.useMemo)(()=>({screenSize:n}),[n]);return(0,r.jsx)(u.Provider,{value:i,children:e})}function f(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{h.displayName||(h.displayName="ScreenSizeProvider")}catch{}},33544:(e,t,n)=>{n.d(t,{x:()=>g});var r=n(74848),a=n(38621),i=n(75177),o=n(69410),l=n(81246),s=n(5945),c=n(52446),d=n(85788),u=n(96540),m=n(11083),p=n(62227),h=n(34164),f=n(69599);function g({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:s=3,redirectURI:c,useFullWidthStyle:g,forceWrap:_,sx:v}){let b=(0,d.zy)(),S=(0,u.useRef)(!1);if((0,u.useEffect)(()=>{(0,f.G7)("record_sso_banner_metrics")&&!S.current&&n&&n.length>0&&((0,m.i)({incrementKey:(0,f.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),S.current=!0)},[n]),!n||0===n.length)return null;let w=Math.max(0,n.length-s),C=1===n.length||w>0?(0,r.jsx)("b",{children:n.slice(0,s).join(", ")}):(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,r.jsx)("b",{children:n[n.length-1]})]});return(0,r.jsx)(i.A,{sx:v,className:e,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:p.A.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(o.A,{sx:{borderRadius:2*!g,borderWidth:g?"1px 0":1},className:p.A.Flash,children:1===n.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ShieldLockIcon,{className:p.A.ShieldLockIcon}),(0,r.jsx)(l.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${x({location:b,redirectURI:c})}`,children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:n[0]})," organization."]}):(0,r.jsxs)("div",{className:p.A.Box_1,children:[(0,r.jsx)(a.ShieldLockIcon,{className:p.A.Octicon}),(0,r.jsxs)("div",{className:(0,h.$)(p.A.Box_2,_&&p.A.ForceWrap),children:[(0,r.jsxs)("p",{className:p.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===w&&"the ",s>0&&(0,r.jsxs)(r.Fragment,{children:[C," "]}),w>0&&(0,r.jsxs)(r.Fragment,{children:[s>0&&"and ",w," other"," "]}),n.length>1&&1!==w?"organizations":"organization","."]}),(0,r.jsx)("p",{className:p.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(y,{portalContainerName:t,protectedOrgs:n,redirectURI:c})})]})]})})})})})}function y({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,d.zy)();return(0,r.jsxs)(s.W,{children:[(0,r.jsx)(s.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(s.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(c.l,{children:t.map(e=>(0,r.jsx)(c.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${x({location:a,redirectURI:n})}`},children:e},`org-${e}`))})})]})}function x({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{g.displayName||(g.displayName="SingleSignOnBanner")}catch{}try{y.displayName||(y.displayName="SingleSignOnButton")}catch{}}}]);
//# sourceMappingURL=packages_react-core_deferred-registry_ts-packages_agent-sessions_components_NewTaskChatInput_-2881e7-c7fa0ff2a7ad.js.map